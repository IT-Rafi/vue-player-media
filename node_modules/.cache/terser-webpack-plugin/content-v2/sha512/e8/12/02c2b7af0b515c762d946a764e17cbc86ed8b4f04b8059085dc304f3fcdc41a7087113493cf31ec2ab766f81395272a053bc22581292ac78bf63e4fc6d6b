{"code":"!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"VuePlayer\",[],t):\"object\"==typeof exports?exports.VuePlayer=t():e.VuePlayer=t()}(window,(function(){return r={},e.m=t={\"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/dplayer/dist/DPlayer.min.css\":function(e,t,r){(t=r(\"./node_modules/css-loader/dist/runtime/api.js\")(!1)).push([e.i,\"button[data-balloon]{overflow:visible}[data-balloon]{position:relative;cursor:pointer}[data-balloon]:after{font-family:sans-serif !important;font-weight:400 !important;font-style:normal !important;text-shadow:none !important;font-size:12px !important;background:rgba(18,18,18,0.9);border-radius:4px;color:#fff;content:attr(data-balloon);padding:.5em 1em;white-space:nowrap}[data-balloon]:after,[data-balloon]:before{filter:alpha(opactiy=0);-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\\\";-moz-opacity:0;-khtml-opacity:0;opacity:0;pointer-events:none;transition:all .18s ease-out .18s;position:absolute;z-index:10}[data-balloon]:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='12'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M2.658 0h32.004c-6 0-11.627 12.002-16.002 12.002C14.285 12.002 8.594 0 2.658 0z'/%3E%3C/svg%3E\\\");background-size:100% auto;width:18px;height:6px;content:\\\"\\\"}[data-balloon]:hover:after,[data-balloon]:hover:before,[data-balloon][data-balloon-visible]:after,[data-balloon][data-balloon-visible]:before{filter:alpha(opactiy=100);-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\\\";-moz-opacity:1;-khtml-opacity:1;opacity:1;pointer-events:auto}[data-balloon].font-awesome:after{font-family:FontAwesome}[data-balloon][data-balloon-break]:after{white-space:pre}[data-balloon][data-balloon-blunt]:after,[data-balloon][data-balloon-blunt]:before{transition:none}[data-balloon][data-balloon-pos=up]:after{margin-bottom:11px}[data-balloon][data-balloon-pos=up]:after,[data-balloon][data-balloon-pos=up]:before{bottom:100%;left:50%;-webkit-transform:translate(-50%, 10px);transform:translate(-50%, 10px);-webkit-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=up]:before{margin-bottom:5px}[data-balloon][data-balloon-pos=up]:hover:after,[data-balloon][data-balloon-pos=up]:hover:before,[data-balloon][data-balloon-pos=up][data-balloon-visible]:after,[data-balloon][data-balloon-pos=up][data-balloon-visible]:before{-webkit-transform:translate(-50%);transform:translate(-50%)}[data-balloon][data-balloon-pos=up-left]:after{left:0;margin-bottom:11px}[data-balloon][data-balloon-pos=up-left]:after,[data-balloon][data-balloon-pos=up-left]:before{bottom:100%;-webkit-transform:translateY(10px);transform:translateY(10px);-webkit-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=up-left]:before{left:5px;margin-bottom:5px}[data-balloon][data-balloon-pos=up-left]:hover:after,[data-balloon][data-balloon-pos=up-left]:hover:before,[data-balloon][data-balloon-pos=up-left][data-balloon-visible]:after,[data-balloon][data-balloon-pos=up-left][data-balloon-visible]:before{-webkit-transform:translate(0);transform:translate(0)}[data-balloon][data-balloon-pos=up-right]:after{right:0;margin-bottom:11px}[data-balloon][data-balloon-pos=up-right]:after,[data-balloon][data-balloon-pos=up-right]:before{bottom:100%;-webkit-transform:translateY(10px);transform:translateY(10px);-webkit-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=up-right]:before{right:5px;margin-bottom:5px}[data-balloon][data-balloon-pos=up-right]:hover:after,[data-balloon][data-balloon-pos=up-right]:hover:before,[data-balloon][data-balloon-pos=up-right][data-balloon-visible]:after,[data-balloon][data-balloon-pos=up-right][data-balloon-visible]:before{-webkit-transform:translate(0);transform:translate(0)}[data-balloon][data-balloon-pos=down]:after{margin-top:11px}[data-balloon][data-balloon-pos=down]:after,[data-balloon][data-balloon-pos=down]:before{left:50%;top:100%;-webkit-transform:translate(-50%, -10px);transform:translate(-50%, -10px)}[data-balloon][data-balloon-pos=down]:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='12'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M33.342 12H1.338c6 0 11.627-12.002 16.002-12.002C21.715-.002 27.406 12 33.342 12z'/%3E%3C/svg%3E\\\");background-size:100% auto;width:18px;height:6px;margin-top:5px}[data-balloon][data-balloon-pos=down]:hover:after,[data-balloon][data-balloon-pos=down]:hover:before,[data-balloon][data-balloon-pos=down][data-balloon-visible]:after,[data-balloon][data-balloon-pos=down][data-balloon-visible]:before{-webkit-transform:translate(-50%);transform:translate(-50%)}[data-balloon][data-balloon-pos=down-left]:after{left:0;margin-top:11px;top:100%;-webkit-transform:translateY(-10px);transform:translateY(-10px)}[data-balloon][data-balloon-pos=down-left]:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='12'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M33.342 12H1.338c6 0 11.627-12.002 16.002-12.002C21.715-.002 27.406 12 33.342 12z'/%3E%3C/svg%3E\\\");background-size:100% auto;width:18px;height:6px;left:5px;margin-top:5px;top:100%;-webkit-transform:translateY(-10px);transform:translateY(-10px)}[data-balloon][data-balloon-pos=down-left]:hover:after,[data-balloon][data-balloon-pos=down-left]:hover:before,[data-balloon][data-balloon-pos=down-left][data-balloon-visible]:after,[data-balloon][data-balloon-pos=down-left][data-balloon-visible]:before{-webkit-transform:translate(0);transform:translate(0)}[data-balloon][data-balloon-pos=down-right]:after{right:0;margin-top:11px;top:100%;-webkit-transform:translateY(-10px);transform:translateY(-10px)}[data-balloon][data-balloon-pos=down-right]:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='12'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M33.342 12H1.338c6 0 11.627-12.002 16.002-12.002C21.715-.002 27.406 12 33.342 12z'/%3E%3C/svg%3E\\\");background-size:100% auto;width:18px;height:6px;right:5px;margin-top:5px;top:100%;-webkit-transform:translateY(-10px);transform:translateY(-10px)}[data-balloon][data-balloon-pos=down-right]:hover:after,[data-balloon][data-balloon-pos=down-right]:hover:before,[data-balloon][data-balloon-pos=down-right][data-balloon-visible]:after,[data-balloon][data-balloon-pos=down-right][data-balloon-visible]:before{-webkit-transform:translate(0);transform:translate(0)}[data-balloon][data-balloon-pos=left]:after{margin-right:11px;right:100%;top:50%;-webkit-transform:translate(10px, -50%);transform:translate(10px, -50%)}[data-balloon][data-balloon-pos=left]:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='36'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M0 33.342V1.338c0 6 12.002 11.627 12.002 16.002C12.002 21.715 0 27.406 0 33.342z'/%3E%3C/svg%3E\\\");background-size:100% auto;width:6px;height:18px;margin-right:5px;right:100%;top:50%;-webkit-transform:translate(10px, -50%);transform:translate(10px, -50%)}[data-balloon][data-balloon-pos=left]:hover:after,[data-balloon][data-balloon-pos=left]:hover:before,[data-balloon][data-balloon-pos=left][data-balloon-visible]:after,[data-balloon][data-balloon-pos=left][data-balloon-visible]:before{-webkit-transform:translateY(-50%);transform:translateY(-50%)}[data-balloon][data-balloon-pos=right]:after{left:100%;margin-left:11px;top:50%;-webkit-transform:translate(-10px, -50%);transform:translate(-10px, -50%)}[data-balloon][data-balloon-pos=right]:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='36'%3E%3Cpath fill='rgba(17, 17, 17, 0.9)' d='M12 2.658v32.004c0-6-12.002-11.627-12.002-16.002C-.002 14.285 12 8.594 12 2.658z'/%3E%3C/svg%3E\\\");background-size:100% auto;width:6px;height:18px;left:100%;margin-left:5px;top:50%;-webkit-transform:translate(-10px, -50%);transform:translate(-10px, -50%)}[data-balloon][data-balloon-pos=right]:hover:after,[data-balloon][data-balloon-pos=right]:hover:before,[data-balloon][data-balloon-pos=right][data-balloon-visible]:after,[data-balloon][data-balloon-pos=right][data-balloon-visible]:before{-webkit-transform:translateY(-50%);transform:translateY(-50%)}[data-balloon][data-balloon-length=small]:after{white-space:normal;width:80px}[data-balloon][data-balloon-length=medium]:after{white-space:normal;width:150px}[data-balloon][data-balloon-length=large]:after{white-space:normal;width:260px}[data-balloon][data-balloon-length=xlarge]:after{white-space:normal;width:380px}@media screen and (max-width: 768px){[data-balloon][data-balloon-length=xlarge]:after{white-space:normal;width:90vw}}[data-balloon][data-balloon-length=fit]:after{white-space:normal;width:100%}@-webkit-keyframes my-face{2%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}4%{-webkit-transform:translateY(-1.5px) rotate(-0.5deg);transform:translateY(-1.5px) rotate(-0.5deg)}6%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}8%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}10%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}12%{-webkit-transform:translateY(-0.5px) rotate(1.5deg);transform:translateY(-0.5px) rotate(1.5deg)}14%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}16%{-webkit-transform:translateY(-0.5px) rotate(-1.5deg);transform:translateY(-0.5px) rotate(-1.5deg)}18%{-webkit-transform:translateY(0.5px) rotate(-1.5deg);transform:translateY(0.5px) rotate(-1.5deg)}20%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}22%{-webkit-transform:translateY(0.5px) rotate(-1.5deg);transform:translateY(0.5px) rotate(-1.5deg)}24%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}26%{-webkit-transform:translateY(0.5px) rotate(0.5deg);transform:translateY(0.5px) rotate(0.5deg)}28%{-webkit-transform:translateY(0.5px) rotate(1.5deg);transform:translateY(0.5px) rotate(1.5deg)}30%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}32%{-webkit-transform:translateY(1.5px) rotate(-0.5deg);transform:translateY(1.5px) rotate(-0.5deg)}34%{-webkit-transform:translateY(1.5px) rotate(-0.5deg);transform:translateY(1.5px) rotate(-0.5deg)}36%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}38%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}40%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}42%{-webkit-transform:translateY(2.5px) rotate(-1.5deg);transform:translateY(2.5px) rotate(-1.5deg)}44%{-webkit-transform:translateY(1.5px) rotate(0.5deg);transform:translateY(1.5px) rotate(0.5deg)}46%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}48%{-webkit-transform:translateY(-0.5px) rotate(0.5deg);transform:translateY(-0.5px) rotate(0.5deg)}50%{-webkit-transform:translateY(0.5px) rotate(0.5deg);transform:translateY(0.5px) rotate(0.5deg)}52%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}54%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}56%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}58%{-webkit-transform:translateY(0.5px) rotate(2.5deg);transform:translateY(0.5px) rotate(2.5deg)}60%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}62%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}64%{-webkit-transform:translateY(-0.5px) rotate(1.5deg);transform:translateY(-0.5px) rotate(1.5deg)}66%{-webkit-transform:translateY(1.5px) rotate(-0.5deg);transform:translateY(1.5px) rotate(-0.5deg)}68%{-webkit-transform:translateY(-1.5px) rotate(-0.5deg);transform:translateY(-1.5px) rotate(-0.5deg)}70%{-webkit-transform:translateY(1.5px) rotate(0.5deg);transform:translateY(1.5px) rotate(0.5deg)}72%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}74%{-webkit-transform:translateY(-0.5px) rotate(0.5deg);transform:translateY(-0.5px) rotate(0.5deg)}76%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}78%{-webkit-transform:translateY(-0.5px) rotate(1.5deg);transform:translateY(-0.5px) rotate(1.5deg)}80%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}82%{-webkit-transform:translateY(-0.5px) rotate(0.5deg);transform:translateY(-0.5px) rotate(0.5deg)}84%{-webkit-transform:translateY(1.5px) rotate(2.5deg);transform:translateY(1.5px) rotate(2.5deg)}86%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}88%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}90%{-webkit-transform:translateY(2.5px) rotate(-0.5deg);transform:translateY(2.5px) rotate(-0.5deg)}92%{-webkit-transform:translateY(0.5px) rotate(-0.5deg);transform:translateY(0.5px) rotate(-0.5deg)}94%{-webkit-transform:translateY(2.5px) rotate(0.5deg);transform:translateY(2.5px) rotate(0.5deg)}96%{-webkit-transform:translateY(-0.5px) rotate(1.5deg);transform:translateY(-0.5px) rotate(1.5deg)}98%{-webkit-transform:translateY(-1.5px) rotate(-0.5deg);transform:translateY(-1.5px) rotate(-0.5deg)}0%,to{-webkit-transform:translate(0) rotate(0deg);transform:translate(0) rotate(0deg)}}@keyframes my-face{2%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}4%{-webkit-transform:translateY(-1.5px) rotate(-0.5deg);transform:translateY(-1.5px) rotate(-0.5deg)}6%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}8%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}10%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}12%{-webkit-transform:translateY(-0.5px) rotate(1.5deg);transform:translateY(-0.5px) rotate(1.5deg)}14%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}16%{-webkit-transform:translateY(-0.5px) rotate(-1.5deg);transform:translateY(-0.5px) rotate(-1.5deg)}18%{-webkit-transform:translateY(0.5px) rotate(-1.5deg);transform:translateY(0.5px) rotate(-1.5deg)}20%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}22%{-webkit-transform:translateY(0.5px) rotate(-1.5deg);transform:translateY(0.5px) rotate(-1.5deg)}24%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}26%{-webkit-transform:translateY(0.5px) rotate(0.5deg);transform:translateY(0.5px) rotate(0.5deg)}28%{-webkit-transform:translateY(0.5px) rotate(1.5deg);transform:translateY(0.5px) rotate(1.5deg)}30%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}32%{-webkit-transform:translateY(1.5px) rotate(-0.5deg);transform:translateY(1.5px) rotate(-0.5deg)}34%{-webkit-transform:translateY(1.5px) rotate(-0.5deg);transform:translateY(1.5px) rotate(-0.5deg)}36%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}38%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}40%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}42%{-webkit-transform:translateY(2.5px) rotate(-1.5deg);transform:translateY(2.5px) rotate(-1.5deg)}44%{-webkit-transform:translateY(1.5px) rotate(0.5deg);transform:translateY(1.5px) rotate(0.5deg)}46%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}48%{-webkit-transform:translateY(-0.5px) rotate(0.5deg);transform:translateY(-0.5px) rotate(0.5deg)}50%{-webkit-transform:translateY(0.5px) rotate(0.5deg);transform:translateY(0.5px) rotate(0.5deg)}52%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}54%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}56%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}58%{-webkit-transform:translateY(0.5px) rotate(2.5deg);transform:translateY(0.5px) rotate(2.5deg)}60%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}62%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}64%{-webkit-transform:translateY(-0.5px) rotate(1.5deg);transform:translateY(-0.5px) rotate(1.5deg)}66%{-webkit-transform:translateY(1.5px) rotate(-0.5deg);transform:translateY(1.5px) rotate(-0.5deg)}68%{-webkit-transform:translateY(-1.5px) rotate(-0.5deg);transform:translateY(-1.5px) rotate(-0.5deg)}70%{-webkit-transform:translateY(1.5px) rotate(0.5deg);transform:translateY(1.5px) rotate(0.5deg)}72%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}74%{-webkit-transform:translateY(-0.5px) rotate(0.5deg);transform:translateY(-0.5px) rotate(0.5deg)}76%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}78%{-webkit-transform:translateY(-0.5px) rotate(1.5deg);transform:translateY(-0.5px) rotate(1.5deg)}80%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}82%{-webkit-transform:translateY(-0.5px) rotate(0.5deg);transform:translateY(-0.5px) rotate(0.5deg)}84%{-webkit-transform:translateY(1.5px) rotate(2.5deg);transform:translateY(1.5px) rotate(2.5deg)}86%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}88%{-webkit-transform:translateY(-0.5px) rotate(2.5deg);transform:translateY(-0.5px) rotate(2.5deg)}90%{-webkit-transform:translateY(2.5px) rotate(-0.5deg);transform:translateY(2.5px) rotate(-0.5deg)}92%{-webkit-transform:translateY(0.5px) rotate(-0.5deg);transform:translateY(0.5px) rotate(-0.5deg)}94%{-webkit-transform:translateY(2.5px) rotate(0.5deg);transform:translateY(2.5px) rotate(0.5deg)}96%{-webkit-transform:translateY(-0.5px) rotate(1.5deg);transform:translateY(-0.5px) rotate(1.5deg)}98%{-webkit-transform:translateY(-1.5px) rotate(-0.5deg);transform:translateY(-1.5px) rotate(-0.5deg)}0%,to{-webkit-transform:translate(0) rotate(0deg);transform:translate(0) rotate(0deg)}}.dplayer{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1}.dplayer *{box-sizing:content-box}.dplayer svg{width:100%;height:100%}.dplayer svg circle,.dplayer svg path{fill:#fff}.dplayer:-webkit-full-screen{width:100%;height:100%;background:#000;position:fixed;z-index:100000;left:0;top:0;margin:0;padding:0;-webkit-transform:translate(0);transform:translate(0)}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{-webkit-animation:danmaku-center 6s linear;animation:danmaku-center 6s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer:-webkit-full-screen .dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{-webkit-animation:danmaku 8s linear;animation:danmaku 8s linear;-webkit-animation-play-state:inherit;animation-play-state:inherit}.dplayer.dplayer-live .dplayer-bar-wrap,.dplayer.dplayer-live.dplayer-no-danmaku .dplayer-setting,.dplayer.dplayer-live .dplayer-setting-loop,.dplayer.dplayer-live .dplayer-setting-speed,.dplayer.dplayer-live .dplayer-time,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-comment,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danmaku,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-danunlimit,.dplayer.dplayer-no-danmaku .dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box .dplayer-setting-showdan,.dplayer.dplayer-no-danmaku .dplayer-danmaku{display:none}.dplayer.dplayer-arrow .dplayer-danmaku{font-size:18px}.dplayer.dplayer-arrow .dplayer-icon{margin:0 -3px}.dplayer.dplayer-playing .dplayer-danmaku .dplayer-danmaku-move{-webkit-animation-play-state:running;animation-play-state:running}@media (min-width: 900px){.dplayer.dplayer-playing .dplayer-controller,.dplayer.dplayer-playing .dplayer-controller-mask{opacity:0}.dplayer.dplayer-playing:hover .dplayer-controller,.dplayer.dplayer-playing:hover .dplayer-controller-mask{opacity:1}}.dplayer.dplayer-loading .dplayer-bezel .diplayer-loading-icon{display:block}.dplayer.dplayer-loading .dplayer-danmaku,.dplayer.dplayer-loading .dplayer-danmaku-move,.dplayer.dplayer-paused .dplayer-danmaku,.dplayer.dplayer-paused .dplayer-danmaku-move{-webkit-animation-play-state:paused;animation-play-state:paused}.dplayer.dplayer-hide-controller{cursor:none}.dplayer.dplayer-hide-controller .dplayer-controller,.dplayer.dplayer-hide-controller .dplayer-controller-mask{opacity:0;-webkit-transform:translateY(100%);transform:translateY(100%)}.dplayer.dplayer-show-controller .dplayer-controller,.dplayer.dplayer-show-controller .dplayer-controller-mask{opacity:1}.dplayer.dplayer-fulled{position:fixed;z-index:100000;left:0;top:0;width:100%;height:100%}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-camera-icon,.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-volume{display:none}.dplayer.dplayer-mobile .dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:static;display:inline-block}.dplayer.dplayer-mobile .dplayer-bar-time{display:none}.dplayer-web-fullscreen-fix{position:fixed;top:0;left:0;margin:0;padding:0}[data-balloon]:before{display:none}[data-balloon]:after{padding:.3em .7em;background:rgba(18,18,18,0.7)}[data-balloon][data-balloon-pos=up]:after{margin-bottom:0}.dplayer-bezel{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon{position:absolute;top:50%;left:50%;margin:-26px 0 0 -26px;height:52px;width:52px;padding:12px;box-sizing:border-box;background:rgba(0,0,0,0.5);border-radius:50%;opacity:0;pointer-events:none}.dplayer-bezel .dplayer-bezel-icon.dplayer-bezel-transition{-webkit-animation:bezel-hide .5s linear;animation:bezel-hide .5s linear}@-webkit-keyframes bezel-hide{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(2);transform:scale(2)}}@keyframes bezel-hide{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(2);transform:scale(2)}}.dplayer-bezel .dplayer-danloading{position:absolute;top:50%;margin-top:-7px;width:100%;text-align:center;font-size:14px;line-height:14px;-webkit-animation:my-face 5s infinite ease-in-out;animation:my-face 5s infinite ease-in-out}.dplayer-bezel .diplayer-loading-icon{display:none;position:absolute;top:50%;left:50%;margin:-18px 0 0 -18px;height:36px;width:36px;pointer-events:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-hide{display:none}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot{-webkit-animation:diplayer-loading-dot-fade .8s ease infinite;animation:diplayer-loading-dot-fade .8s ease infinite;opacity:0;-webkit-transform-origin:4px 4px;transform-origin:4px 4px}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-7{-webkit-animation-delay:.7s;animation-delay:.7s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-6{-webkit-animation-delay:.6s;animation-delay:.6s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-5{-webkit-animation-delay:.5s;animation-delay:.5s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-4{-webkit-animation-delay:.4s;animation-delay:.4s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-3{-webkit-animation-delay:.3s;animation-delay:.3s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-2{-webkit-animation-delay:.2s;animation-delay:.2s}.dplayer-bezel .diplayer-loading-icon .diplayer-loading-dot.diplayer-loading-dot-1{-webkit-animation-delay:.1s;animation-delay:.1s}@-webkit-keyframes diplayer-loading-dot-fade{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(0.9);transform:scale(0.9)}to{opacity:.25;-webkit-transform:scale(0.85);transform:scale(0.85)}}@keyframes diplayer-loading-dot-fade{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(0.9);transform:scale(0.9)}to{opacity:.25;-webkit-transform:scale(0.85);transform:scale(0.85)}}.dplayer-controller-mask{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;height:98px;width:100%}.dplayer-controller,.dplayer-controller-mask{position:absolute;bottom:0;transition:all .3s ease}.dplayer-controller{left:0;right:0;height:41px;padding:0 20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons{display:none}.dplayer-controller.dplayer-controller-comment .dplayer-icons.dplayer-comment-box{display:block}.dplayer-controller .dplayer-bar-wrap{padding:5px 0;cursor:pointer;position:absolute;bottom:33px;width:calc(100% - 40px);height:3px}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-bar .dplayer-played .dplayer-thumb{-webkit-transform:scale(1);transform:scale(1)}.dplayer-controller .dplayer-bar-wrap:hover .dplayer-highlight{display:block;width:8px;-webkit-transform:translateX(-4px);transform:translateX(-4px);top:4px;height:40%}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight{z-index:12;position:absolute;top:5px;width:6px;height:20%;border-radius:6px;background-color:#fff;text-align:center;-webkit-transform:translateX(-3px);transform:translateX(-3px);transition:all .2s ease-in-out}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover .dplayer-highlight-text{display:block}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover ~ .dplayer-bar-preview,.dplayer-controller .dplayer-bar-wrap .dplayer-highlight:hover ~ .dplayer-bar-time{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-highlight .dplayer-highlight-text{display:none;position:absolute;left:50%;top:-24px;padding:5px 8px;background-color:rgba(0,0,0,0.62);color:#fff;border-radius:4px;font-size:12px;white-space:nowrap;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview{position:absolute;background:#fff;pointer-events:none;display:none;background-size:16000px 100%}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-preview-canvas{position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time{position:absolute;left:0;top:-20px;border-radius:4px;padding:5px 7px;background-color:rgba(0,0,0,0.62);color:#fff;font-size:12px;text-align:center;opacity:1;transition:opacity .1s ease-in-out;word-wrap:normal;word-break:normal;z-index:2;pointer-events:none}.dplayer-controller .dplayer-bar-wrap .dplayer-bar-time.hidden{opacity:0}.dplayer-controller .dplayer-bar-wrap .dplayer-bar{position:relative;height:3px;width:100%;background:rgba(255,255,255,0.2);cursor:pointer}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded{background:rgba(255,255,255,0.4);transition:all .5s ease}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-loaded,.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width}.dplayer-controller .dplayer-bar-wrap .dplayer-bar .dplayer-played .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;-webkit-transform:scale(0);transform:scale(0)}.dplayer-controller .dplayer-icons{height:38px;position:absolute;bottom:0}.dplayer-controller .dplayer-icons.dplayer-comment-box{display:none;position:absolute;transition:all .3s ease-in-out;z-index:2;height:38px;bottom:0;left:20px;right:20px;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-icon{position:absolute;left:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-send-icon{position:absolute;right:0;top:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box{position:absolute;background:rgba(28,28,28,0.9);bottom:41px;left:0;box-shadow:0 0 25px rgba(0,0,0,0.3);border-radius:4px;padding:10px 10px 16px;font-size:14px;width:204px;transition:all .3s ease-in-out;-webkit-transform:scale(0);transform:scale(0)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box.dplayer-comment-setting-open{-webkit-transform:scale(1);transform:scale(1)}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box input[type=radio]{display:none}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box label{cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-title{font-size:13px;color:#fff;line-height:30px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type .dplayer-comment-setting-title{margin-bottom:6px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(2) span{border-radius:4px 0 0 4px}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type label:nth-child(4) span{border-radius:0 4px 4px 0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type span{width:33%;padding:4px 6px;line-height:16px;display:inline-block;font-size:12px;color:#fff;border:1px solid #fff;margin-right:-1px;box-sizing:border-box;text-align:center;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-type input:checked+span{background:#e4e4e6;color:#1c1c1c}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color{font-size:0}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color label{font-size:0;padding:6px;display:inline-block}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span{width:22px;height:22px;display:inline-block;border-radius:50%;box-sizing:border-box;cursor:pointer}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-setting-box .dplayer-comment-setting-color span:hover{-webkit-animation:my-face 5s infinite ease-in-out;animation:my-face 5s infinite ease-in-out}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input{outline:none;border:none;padding:8px 31px;font-size:14px;line-height:18px;text-align:center;border-radius:4px;background:none;margin:0;height:100%;box-sizing:border-box;width:100%;color:#fff}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-webkit-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input:-ms-input-placeholder,.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-input-placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::placeholder{color:#fff;opacity:.8}.dplayer-controller .dplayer-icons.dplayer-comment-box .dplayer-comment-input::-ms-clear{display:none}.dplayer-controller .dplayer-icons.dplayer-icons-left .dplayer-icon{padding:7px}.dplayer-controller .dplayer-icons.dplayer-icons-right{right:20px}.dplayer-controller .dplayer-icons.dplayer-icons-right .dplayer-icon{padding:8px}.dplayer-controller .dplayer-icons .dplayer-live-badge,.dplayer-controller .dplayer-icons .dplayer-time{line-height:38px;color:#eee;text-shadow:0 0 2px rgba(0,0,0,0.5);vertical-align:middle;font-size:13px;cursor:default}.dplayer-controller .dplayer-icons .dplayer-live-dot{display:inline-block;width:6px;height:6px;vertical-align:4%;margin-right:5px;content:\\\"\\\";border-radius:6px}.dplayer-controller .dplayer-icons .dplayer-icon{width:40px;height:100%;border:none;background-color:transparent;outline:none;cursor:pointer;vertical-align:middle;box-sizing:border-box;display:inline-block}.dplayer-controller .dplayer-icons .dplayer-icon .dplayer-icon-content{transition:all .2s ease-in-out;opacity:.8}.dplayer-controller .dplayer-icons .dplayer-icon:hover .dplayer-icon-content{opacity:1}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-quality-icon{color:#fff;width:auto;line-height:22px;font-size:14px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-comment-icon{padding:10px 9px 9px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-setting-icon{padding-top:8.5px}.dplayer-controller .dplayer-icons .dplayer-icon.dplayer-volume-icon{width:43px}.dplayer-controller .dplayer-icons .dplayer-volume{position:relative;display:inline-block;cursor:pointer;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume:hover .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{-webkit-transform:scale(1);transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar{width:45px}.dplayer-controller .dplayer-icons .dplayer-volume.dplayer-volume-active .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{-webkit-transform:scale(1);transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap{display:inline-block;margin:0 10px 0 -5px;vertical-align:middle;height:100%}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar{position:relative;top:17px;width:0;height:3px;background:#aaa;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;will-change:width}.dplayer-controller .dplayer-icons .dplayer-volume .dplayer-volume-bar-wrap .dplayer-volume-bar .dplayer-volume-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;-webkit-transform:scale(0);transform:scale(0)}.dplayer-controller .dplayer-icons .dplayer-setting,.dplayer-controller .dplayer-icons .dplayer-subtitle-btn{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box{position:absolute;right:0;bottom:50px;-webkit-transform:scale(0);transform:scale(0);width:150px;border-radius:2px;background:rgba(28,28,28,0.9);padding:7px 0;transition:all .3s ease-in-out;overflow:hidden;z-index:2}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box>div.dplayer-setting-origin-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-open{-webkit-transform:scale(1);transform:scale(1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-narrow{width:70px;height:180px;text-align:center}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-origin-panel{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-box.dplayer-setting-box-speed .dplayer-setting-speed-panel{display:block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item{height:30px;padding:5px 10px;box-sizing:border-box;cursor:pointer;position:relative}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-item:hover,.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-speed-item:hover{background-color:rgba(255,255,255,0.1)}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku{padding:5px 0}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-label{padding:0 10px;display:inline}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku:hover .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-label{display:none}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku.dplayer-setting-danmaku-active .dplayer-danmaku-bar-wrap{display:inline-block}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap{padding:0 10px;box-sizing:border-box;display:none;vertical-align:middle;height:100%;width:100%}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar{position:relative;top:8.5px;width:100%;height:3px;background:#fff;transition:all .3s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner{position:absolute;bottom:0;left:0;height:100%;transition:all .1s ease;background:#aaa;will-change:width}.dplayer-controller .dplayer-icons .dplayer-setting .dplayer-setting-danmaku .dplayer-danmaku-bar-wrap .dplayer-danmaku-bar .dplayer-danmaku-bar-inner .dplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;background:#aaa}.dplayer-controller .dplayer-icons .dplayer-full{display:inline-block;height:100%;position:relative}.dplayer-controller .dplayer-icons .dplayer-full:hover .dplayer-full-in-icon{display:block}.dplayer-controller .dplayer-icons .dplayer-full .dplayer-full-in-icon{position:absolute;top:-30px;z-index:1;display:none}.dplayer-controller .dplayer-icons .dplayer-quality{position:relative;display:inline-block;height:100%;z-index:2}.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-list,.dplayer-controller .dplayer-icons .dplayer-quality:hover .dplayer-quality-mask{display:block}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-mask{display:none;position:absolute;bottom:38px;left:-18px;width:80px;padding-bottom:12px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-list{display:none;font-size:12px;width:80px;border-radius:2px;background:rgba(28,28,28,0.9);padding:5px 0;transition:all .3s ease-in-out;overflow:hidden;color:#fff;text-align:center}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item{height:25px;box-sizing:border-box;cursor:pointer;line-height:25px}.dplayer-controller .dplayer-icons .dplayer-quality .dplayer-quality-item:hover{background-color:rgba(255,255,255,0.1)}.dplayer-controller .dplayer-icons .dplayer-comment{display:inline-block;height:100%}.dplayer-controller .dplayer-icons .dplayer-label{color:#eee;font-size:13px;display:inline-block;vertical-align:middle;white-space:nowrap}.dplayer-controller .dplayer-icons .dplayer-toggle{width:32px;height:20px;text-align:center;font-size:0;vertical-align:middle;position:absolute;top:5px;right:10px}.dplayer-controller .dplayer-icons .dplayer-toggle input{max-height:0;max-width:0;display:none}.dplayer-controller .dplayer-icons .dplayer-toggle input+label{display:inline-block;position:relative;box-shadow:inset 0 0 0 0 #dfdfdf;border:1px solid #dfdfdf;height:20px;width:32px;border-radius:10px;box-sizing:border-box;cursor:pointer;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after,.dplayer-controller .dplayer-icons .dplayer-toggle input+label:before{content:\\\"\\\";position:absolute;display:block;height:18px;width:18px;top:0;left:0;border-radius:15px;transition:.2s ease-in-out}.dplayer-controller .dplayer-icons .dplayer-toggle input+label:after{background:#fff;box-shadow:0 1px 3px rgba(0,0,0,0.4)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label{border-color:rgba(255,255,255,0.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:before{width:30px;background:rgba(255,255,255,0.5)}.dplayer-controller .dplayer-icons .dplayer-toggle input:checked+label:after{left:12px}.dplayer-danmaku{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff}.dplayer-danmaku .dplayer-danmaku-item{display:inline-block;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;white-space:nowrap;text-shadow:0.5px 0.5px 0.5px rgba(0,0,0,0.5)}.dplayer-danmaku .dplayer-danmaku-item--demo{position:absolute;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-right{position:absolute;right:0;-webkit-transform:translateX(100%);transform:translateX(100%)}.dplayer-danmaku .dplayer-danmaku-right.dplayer-danmaku-move{will-change:transform;-webkit-animation:danmaku 5s linear;animation:danmaku 5s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku{0%{-webkit-transform:translateX(100%);transform:translateX(100%)}}@keyframes danmaku{0%{-webkit-transform:translateX(100%);transform:translateX(100%)}}.dplayer-danmaku .dplayer-danmaku-bottom,.dplayer-danmaku .dplayer-danmaku-top{position:absolute;width:100%;text-align:center;visibility:hidden}.dplayer-danmaku .dplayer-danmaku-bottom.dplayer-danmaku-move,.dplayer-danmaku .dplayer-danmaku-top.dplayer-danmaku-move{will-change:visibility;-webkit-animation:danmaku-center 4s linear;animation:danmaku-center 4s linear;-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}@keyframes danmaku-center{0%{visibility:visible}to{visibility:visible}}.dplayer-logo{pointer-events:none;position:absolute;left:20px;top:20px;max-width:50px;max-height:50px}.dplayer-logo img{max-width:100%;max-height:100%;background:none}.dplayer-menu{position:absolute;width:170px;border-radius:2px;background:rgba(28,28,28,0.85);padding:5px 0;overflow:hidden;z-index:3;display:none}.dplayer-menu.dplayer-menu-show{display:block}.dplayer-menu .dplayer-menu-item{height:30px;box-sizing:border-box;cursor:pointer}.dplayer-menu .dplayer-menu-item:hover{background-color:rgba(255,255,255,0.1)}.dplayer-menu .dplayer-menu-item a{padding:0 10px;line-height:30px;color:#eee;font-size:13px;display:inline-block;vertical-align:middle;width:100%;box-sizing:border-box;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-menu .dplayer-menu-item a:hover{text-decoration:none}.dplayer-notice{opacity:0;position:absolute;bottom:60px;left:20px;font-size:14px;border-radius:2px;background:rgba(28,28,28,0.9);padding:7px 20px;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none}.dplayer-subtitle{position:absolute;bottom:40px;width:90%;left:5%;text-align:center;color:#fff;text-shadow:0.5px 0.5px 0.5px rgba(0,0,0,0.5);font-size:20px}.dplayer-subtitle.dplayer-subtitle-hide{display:none}.dplayer-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1;display:none}.dplayer-mask.dplayer-mask-show{display:block}.dplayer-video-wrap{position:relative;background:#000;font-size:0;width:100%;height:100%}.dplayer-video-wrap .dplayer-video{width:100%;height:100%;display:none}.dplayer-video-wrap .dplayer-video-current{display:block}.dplayer-video-wrap .dplayer-video-prepare{display:none}.dplayer-info-panel{position:absolute;top:10px;left:10px;width:400px;background:rgba(28,28,28,0.8);padding:10px;color:#fff;font-size:12px;border-radius:2px}.dplayer-info-panel-hide{display:none}.dplayer-info-panel .dplayer-info-panel-close{cursor:pointer;position:absolute;right:10px;top:10px}.dplayer-info-panel .dplayer-info-panel-item>span{display:inline-block;vertical-align:middle;line-height:15px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.dplayer-info-panel .dplayer-info-panel-item-title{width:100px;text-align:right;margin-right:10px}.dplayer-info-panel .dplayer-info-panel-item-data{width:260px}\\n\",\"\"]),e.exports=t},\"./node_modules/css-loader/dist/runtime/api.js\":function(e,t,r){\"use strict\";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||\"\",a=e[3];if(!a)return r;if(t&&\"function\"==typeof btoa){var n=function(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),r=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(t);return\"/*# \".concat(r,\" */\")}(a),i=a.sources.map((function(e){return\"/*# sourceURL=\".concat(a.sourceRoot||\"\").concat(e,\" */\")}));return[r].concat(i).concat([n]).join(\"\\n\")}return[r].join(\"\\n\")}(t,e);return t[2]?\"@media \".concat(t[2],\" {\").concat(r,\"}\"):r})).join(\"\")},t.i=function(e,r,a){\"string\"==typeof e&&(e=[[null,e,\"\"]]);var n={};if(a)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);a&&n[l[0]]||(r&&(l[2]?l[2]=\"\".concat(r,\" and \").concat(l[2]):l[2]=r),t.push(l))}},t}},\"./node_modules/dplayer/dist/DPlayer.min.css\":function(e,t,r){var a=r(\"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./node_modules/dplayer/dist/DPlayer.min.css\");\"string\"==typeof a&&(a=[[e.i,a,\"\"]]);r(\"./node_modules/style-loader/lib/addStyles.js\")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},\"./node_modules/dplayer/dist/DPlayer.min.js\":function(e,t,r){(function(t,r){window,e.exports=function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"/\",r(r.s=78)}([function(e,t,r){\"use strict\";var a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n=r(11),i=r(65),o=Object.prototype.toString;function s(e){return\"[object Array]\"===o.call(e)}function l(e){return null!==e&&\"object\"===(void 0===e?\"undefined\":a(e))}function d(e){return\"[object Function]\"===o.call(e)}function u(e,t){if(null!=e)if(\"object\"!==(void 0===e?\"undefined\":a(e))&&(e=[e]),s(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:s,isArrayBuffer:function(e){return\"[object ArrayBuffer]\"===o.call(e)},isBuffer:i,isFormData:function(e){return\"undefined\"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return\"undefined\"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return\"string\"==typeof e},isNumber:function(e){return\"number\"==typeof e},isObject:l,isUndefined:function(e){return void 0===e},isDate:function(e){return\"[object Date]\"===o.call(e)},isFile:function(e){return\"[object File]\"===o.call(e)},isBlob:function(e){return\"[object Blob]\"===o.call(e)},isFunction:d,isStream:function(e){return l(e)&&d(e.pipe)},isURLSearchParams:function(e){return\"undefined\"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return(\"undefined\"==typeof navigator||\"ReactNative\"!==navigator.product)&&\"undefined\"!=typeof window&&\"undefined\"!=typeof document},forEach:u,merge:function e(){var t={};function r(r,n){\"object\"===a(t[n])&&\"object\"===(void 0===r?\"undefined\":a(r))?t[n]=e(t[n],r):t[n]=r}for(var n=0,i=arguments.length;n<i;n++)u(arguments[n],r);return t},extend:function(e,t,r){return u(t,(function(t,a){e[a]=r&&\"function\"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\\s*/,\"\").replace(/\\s*$/,\"\")}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=/mobile/i.test(window.navigator.userAgent),n={secondToTime:function(e){var t=Math.floor(e/3600),r=Math.floor((e-3600*t)/60),a=Math.floor(e-3600*t-60*r);return(0<t?[t,r,a]:[r,a]).map((function(e){return e<10?\"0\"+e:\"\"+e})).join(\":\")},getElementViewLeft:function(e){var t=e.offsetLeft,r=e.offsetParent,a=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==r&&r!==e;)t+=r.offsetLeft,r=r.offsetParent;else for(;null!==r;)t+=r.offsetLeft,r=r.offsetParent;return t-a},getBoundingClientRectViewLeft:function(e){var t,r=document.documentElement.scrollTop;if(e.getBoundingClientRect){\"number\"!=typeof this.getBoundingClientRectViewLeft.offset&&((t=document.createElement(\"div\")).style.cssText=\"position:absolute;top:0;left:0;\",document.body.appendChild(t),this.getBoundingClientRectViewLeft.offset=-t.getBoundingClientRect().top-r,document.body.removeChild(t),t=null);var a=e.getBoundingClientRect(),n=this.getBoundingClientRectViewLeft.offset;return a.left+n}return this.getElementViewLeft(e)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(e){var t=e.left,r=void 0===t?0:t,a=e.top,n=void 0===a?0:a;this.isFirefox?(document.documentElement.scrollLeft=r,document.documentElement.scrollTop=n):window.scrollTo(r,n)},isMobile:a,isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)}},cumulativeOffset:function(e){for(var t=0,r=0;t+=e.offsetTop||0,r+=e.offsetLeft||0,e=e.offsetParent;);return{top:t,left:r}},nameMap:{dragStart:a?\"touchstart\":\"mousedown\",dragMove:a?\"touchmove\":\"mousemove\",dragEnd:a?\"touchend\":\"mouseup\"},color2Number:function(e){return\"#\"===e[0]&&(e=e.substr(1)),3===e.length&&(e=\"\"+e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),parseInt(e,16)+0&16777215},number2Color:function(e){return\"#\"+(\"00000\"+e.toString(16)).slice(-6)},number2Type:function(e){switch(e){case 0:return\"right\";case 1:return\"top\";case 2:return\"bottom\";default:return\"right\"}}};t.default=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=b(r(46)),n=b(r(45)),i=b(r(44)),o=b(r(43)),s=b(r(42)),l=b(r(41)),d=b(r(40)),u=b(r(39)),c=b(r(38)),p=b(r(37)),h=b(r(36)),f=b(r(35)),g=b(r(34)),m=b(r(33)),y=b(r(32)),v=b(r(31));function b(e){return e&&e.__esModule?e:{default:e}}var w={play:a.default,pause:n.default,volumeUp:i.default,volumeDown:o.default,volumeOff:s.default,full:l.default,fullWeb:d.default,setting:u.default,right:c.default,comment:p.default,commentOff:h.default,send:f.default,pallette:g.default,camera:m.default,subtitle:y.default,loading:v.default};t.default=w},function(e,t,r){\"use strict\";(function(t){var a=r(0),n=r(63),i={\"Content-Type\":\"application/x-www-form-urlencoded\"};function o(e,t){!a.isUndefined(e)&&a.isUndefined(e[\"Content-Type\"])&&(e[\"Content-Type\"]=t)}var s,l={adapter:(\"undefined\"==typeof XMLHttpRequest&&void 0===t||(s=r(10)),s),transformRequest:[function(e,t){return n(t,\"Content-Type\"),a.isFormData(e)||a.isArrayBuffer(e)||a.isBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(o(t,\"application/x-www-form-urlencoded;charset=utf-8\"),e.toString()):a.isObject(e)?(o(t,\"application/json;charset=utf-8\"),JSON.stringify(e)):e}],transformResponse:[function(e){if(\"string\"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:\"XSRF-TOKEN\",xsrfHeaderName:\"X-XSRF-TOKEN\",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:\"application/json, text/plain, */*\"}}};a.forEach([\"delete\",\"get\",\"head\"],(function(e){l.headers[e]={}})),a.forEach([\"post\",\"put\",\"patch\"],(function(e){l.headers[e]=a.merge(i)})),e.exports=l}).call(this,r(12))},function(e,t,r){\"use strict\";var a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"===(\"undefined\"==typeof window?\"undefined\":a(window))&&(n=window)}e.exports=n},function(e,t,r){var a=r(6);e.exports=function(e){\"use strict\";var t=\"\",r=e=e||{},n=e.subtitle,i=e.current,o=e.pic,s=a.$escape,l=e.screenshot,d=e.preload,u=e.url;r=n&&\"webvtt\"===n.type;return t+='\\n<video\\n    class=\"dplayer-video ',i&&(t+=\"dplayer-video-current\"),t+='\"\\n    webkit-playsinline\\n    playsinline\\n    ',o&&(t+='poster=\"',t+=s(o),t+='\"'),t+=\"\\n    \",(l||r)&&(t+='crossorigin=\"anonymous\"'),t+=\"\\n    \",d&&(t+='preload=\"',t+=s(d),t+='\"'),t+=\"\\n    \",u&&(t+='src=\"',t+=s(u),t+='\"'),t+=\"\\n    >\\n    \",r&&(t+='\\n    <track kind=\"metadata\" default src=\"',t+=s(n.url),t+='\"></track>\\n    '),t+\"\\n</video>\"}},function(e,t,r){\"use strict\";e.exports=r(29)},function(e,t,r){\"use strict\";function a(e){this.message=e}a.prototype.toString=function(){return\"Cancel\"+(this.message?\": \"+this.message:\"\")},a.prototype.__CANCEL__=!0,e.exports=a},function(e,t,r){\"use strict\";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){\"use strict\";var a=r(61);e.exports=function(e,t,r,n,i){var o=new Error(e);return a(o,t,r,n,i)}},function(e,t,r){\"use strict\";var a=r(0),n=r(62),i=r(60),o=r(59),s=r(58),l=r(9),d=\"undefined\"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(57);e.exports=function(e){return new Promise((function(t,u){var c=e.data,p=e.headers;a.isFormData(c)&&delete p[\"Content-Type\"];var h,f,g,m,y=new XMLHttpRequest,v=\"onreadystatechange\",b=!1;if(\"undefined\"==typeof window||!window.XDomainRequest||\"withCredentials\"in y||s(e.url)||(y=new window.XDomainRequest,v=\"onload\",b=!0,y.onprogress=function(){},y.ontimeout=function(){}),e.auth&&(h=e.auth.username||\"\",f=e.auth.password||\"\",p.Authorization=\"Basic \"+d(h+\":\"+f)),y.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,y[v]=function(){var r,a;y&&(4===y.readyState||b)&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf(\"file:\"))&&(r=\"getAllResponseHeaders\"in y?o(y.getAllResponseHeaders()):null,a={data:e.responseType&&\"text\"!==e.responseType?y.response:y.responseText,status:1223===y.status?204:y.status,statusText:1223===y.status?\"No Content\":y.statusText,headers:r,config:e,request:y},n(t,u,a),y=null)},y.onerror=function(){u(l(\"Network Error\",e,null,y)),y=null},y.ontimeout=function(){u(l(\"timeout of \"+e.timeout+\"ms exceeded\",e,\"ECONNABORTED\",y)),y=null},a.isStandardBrowserEnv()&&(g=r(56),(m=(e.withCredentials||s(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0)&&(p[e.xsrfHeaderName]=m)),\"setRequestHeader\"in y&&a.forEach(p,(function(e,t){void 0===c&&\"content-type\"===t.toLowerCase()?delete p[t]:y.setRequestHeader(t,e)})),e.withCredentials&&(y.withCredentials=!0),e.responseType)try{y.responseType=e.responseType}catch(t){if(\"json\"!==e.responseType)throw t}\"function\"==typeof e.onDownloadProgress&&y.addEventListener(\"progress\",e.onDownloadProgress),\"function\"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener(\"progress\",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){y&&(y.abort(),u(e),y=null)})),void 0===c&&(c=null),y.send(c)}))}},function(e,t,r){\"use strict\";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];return e.apply(t,r)}}},function(e,t,r){\"use strict\";var a,n,i=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function s(){throw new Error(\"clearTimeout has not been defined\")}function l(e){if(a===setTimeout)return setTimeout(e,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a=\"function\"==typeof setTimeout?setTimeout:o}catch(e){a=o}try{n=\"function\"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var d,u=[],c=!1,p=-1;function h(){c&&d&&(c=!1,d.length?u=d.concat(u):p=-1,u.length&&f())}function f(){if(!c){var e=l(h);c=!0;for(var t=u.length;t;){for(d=u,u=[];++p<t;)d&&d[p].run();p=-1,t=u.length}d=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new g(e,t)),1!==u.length||c||l(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title=\"browser\",i.browser=!0,i.env={},i.argv=[],i.version=\"\",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error(\"process.binding is not supported\")},i.cwd=function(){return\"/\"},i.chdir=function(e){throw new Error(\"process.chdir is not supported\")},i.umask=function(){return 0}},function(e,t,r){\"use strict\";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=(function(e,t,r){t&&a(e.prototype,t)}(i,[{key:\"show\",value:function(){this.beginTime=Date.now(),this.update(),this.player.timer.enable(\"info\"),this.player.timer.enable(\"fps\"),this.container.classList.remove(\"dplayer-info-panel-hide\")}},{key:\"hide\",value:function(){this.player.timer.disable(\"info\"),this.player.timer.disable(\"fps\"),this.container.classList.add(\"dplayer-info-panel-hide\")}},{key:\"triggle\",value:function(){this.container.classList.contains(\"dplayer-info-panel-hide\")?this.show():this.hide()}},{key:\"update\",value:function(){this.template.infoVersion.innerHTML=\"v1.25.0 fdcf45b\",this.template.infoType.innerHTML=this.player.type,this.template.infoUrl.innerHTML=this.player.options.video.url,this.template.infoResolution.innerHTML=this.player.video.videoWidth+\" x \"+this.player.video.videoHeight,this.template.infoDuration.innerHTML=this.player.video.duration,this.player.options.danmaku&&(this.template.infoDanmakuId.innerHTML=this.player.options.danmaku.id,this.template.infoDanmakuApi.innerHTML=this.player.options.danmaku.api,this.template.infoDanmakuAmount.innerHTML=this.player.danmaku.dan.length)}},{key:\"fps\",value:function(e){this.template.infoFPS.innerHTML=\"\"+e.toFixed(1)}}]),i);function i(e){var t=this;!function(e){if(!(e instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),this.container=e.template.infoPanel,this.template=e.template,this.video=e.video,this.player=e,this.template.infoPanelClose.addEventListener(\"click\",(function(){t.hide()}))}t.default=n},function(e,t,r){\"use strict\";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=(function(e,t,r){t&&a(e.prototype,t)}(i,[{key:\"show\",value:function(e,t){this.player.template.menu.classList.add(\"dplayer-menu-show\");var r=this.player.container.getBoundingClientRect();e+this.player.template.menu.offsetWidth>=r.width?(this.player.template.menu.style.right=r.width-e+\"px\",this.player.template.menu.style.left=\"initial\"):(this.player.template.menu.style.left=e+\"px\",this.player.template.menu.style.right=\"initial\"),t+this.player.template.menu.offsetHeight>=r.height?(this.player.template.menu.style.bottom=r.height-t+\"px\",this.player.template.menu.style.top=\"initial\"):(this.player.template.menu.style.top=t+\"px\",this.player.template.menu.style.bottom=\"initial\"),this.player.template.mask.classList.add(\"dplayer-mask-show\"),this.shown=!0,this.player.events.trigger(\"contextmenu_show\")}},{key:\"hide\",value:function(){this.player.template.mask.classList.remove(\"dplayer-mask-show\"),this.player.template.menu.classList.remove(\"dplayer-menu-show\"),this.shown=!1,this.player.events.trigger(\"contextmenu_hide\")}}]),i);function i(e){var t=this;!function(e){if(!(e instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),this.player=e,this.shown=!1,Array.prototype.slice.call(this.player.template.menuItem).forEach((function(e,r){t.player.options.contextmenu[r].click&&e.addEventListener(\"click\",(function(){t.player.options.contextmenu[r].click(t.player),t.hide()}))})),this.player.container.addEventListener(\"contextmenu\",(function(e){var r,a;t.shown?t.hide():((r=e||window.event).preventDefault(),a=t.player.container.getBoundingClientRect(),t.show(r.clientX-a.left,r.clientY-a.top),t.player.template.mask.addEventListener(\"click\",(function(){t.hide()})))}))}t.default=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function e(t){!function(t){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this),t.options.hotkey&&document.addEventListener(\"keydown\",(function(e){if(t.focus){var r=document.activeElement.tagName.toUpperCase(),a=document.activeElement.getAttribute(\"contenteditable\");if(\"INPUT\"!==r&&\"TEXTAREA\"!==r&&\"\"!==a&&\"true\"!==a){var n=e||window.event,i=void 0;switch(n.keyCode){case 32:n.preventDefault(),t.toggle();break;case 37:n.preventDefault(),t.seek(t.video.currentTime-5),t.controller.setAutoHide();break;case 39:n.preventDefault(),t.seek(t.video.currentTime+5),t.controller.setAutoHide();break;case 38:n.preventDefault(),i=t.volume()+.1,t.volume(i);break;case 40:n.preventDefault(),i=t.volume()-.1,t.volume(i)}}}})),document.addEventListener(\"keydown\",(function(e){27===(e||window.event).keyCode&&t.fullScreen.isFullScreen(\"web\")&&t.fullScreen.cancel(\"web\")}))}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(1),n=a&&a.__esModule?a:{default:a};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=(function(e,t,r){t&&i(e.prototype,t),r&&i(e,r)}(s,[{key:\"show\",value:function(){this.player.controller.disableAutoHide=!0,this.player.template.controller.classList.add(\"dplayer-controller-comment\"),this.player.template.mask.classList.add(\"dplayer-mask-show\"),this.player.container.classList.add(\"dplayer-show-controller\"),this.player.template.commentInput.focus()}},{key:\"hide\",value:function(){this.player.template.controller.classList.remove(\"dplayer-controller-comment\"),this.player.template.mask.classList.remove(\"dplayer-mask-show\"),this.player.container.classList.remove(\"dplayer-show-controller\"),this.player.controller.disableAutoHide=!1,this.hideSetting()}},{key:\"showSetting\",value:function(){this.player.template.commentSettingBox.classList.add(\"dplayer-comment-setting-open\")}},{key:\"hideSetting\",value:function(){this.player.template.commentSettingBox.classList.remove(\"dplayer-comment-setting-open\")}},{key:\"toggleSetting\",value:function(){this.player.template.commentSettingBox.classList.contains(\"dplayer-comment-setting-open\")?this.hideSetting():this.showSetting()}},{key:\"send\",value:function(){var e=this;this.player.template.commentInput.blur(),this.player.template.commentInput.value.replace(/^\\s+|\\s+$/g,\"\")?this.player.danmaku.send({text:this.player.template.commentInput.value,color:n.default.color2Number(this.player.container.querySelector(\".dplayer-comment-setting-color input:checked\").value),type:parseInt(this.player.container.querySelector(\".dplayer-comment-setting-type input:checked\").value)},(function(){e.player.template.commentInput.value=\"\",e.hide()})):this.player.notice(this.player.tran(\"Please input danmaku content!\"))}}]),s);function s(e){var t=this;!function(e){if(!(e instanceof s))throw new TypeError(\"Cannot call a class as a function\")}(this),this.player=e,this.player.template.mask.addEventListener(\"click\",(function(){t.hide()})),this.player.template.commentButton.addEventListener(\"click\",(function(){t.show()})),this.player.template.commentSettingButton.addEventListener(\"click\",(function(){t.toggleSetting()})),this.player.template.commentColorSettingBox.addEventListener(\"click\",(function(){var e;t.player.template.commentColorSettingBox.querySelector(\"input:checked+span\")&&(e=t.player.template.commentColorSettingBox.querySelector(\"input:checked\").value,t.player.template.commentSettingFill.style.fill=e,t.player.template.commentInput.style.color=e,t.player.template.commentSendFill.style.fill=e)})),this.player.template.commentInput.addEventListener(\"click\",(function(){t.hideSetting()})),this.player.template.commentInput.addEventListener(\"keydown\",(function(e){13===(e||window.event).keyCode&&t.send()})),this.player.template.commentSendButton.addEventListener(\"click\",(function(){t.send()}))}t.default=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(1),n=a&&a.__esModule?a:{default:a};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=(function(e,t,r){t&&i(e.prototype,t),r&&i(e,r)}(s,[{key:\"hide\",value:function(){var e=this;this.player.template.settingBox.classList.remove(\"dplayer-setting-box-open\"),this.player.template.mask.classList.remove(\"dplayer-mask-show\"),setTimeout((function(){e.player.template.settingBox.classList.remove(\"dplayer-setting-box-narrow\"),e.player.template.settingBox.classList.remove(\"dplayer-setting-box-speed\")}),300),this.player.controller.disableAutoHide=!1}},{key:\"show\",value:function(){this.player.template.settingBox.classList.add(\"dplayer-setting-box-open\"),this.player.template.mask.classList.add(\"dplayer-mask-show\"),this.player.controller.disableAutoHide=!0}}]),s);function s(e){var t=this;!function(e){if(!(e instanceof s))throw new TypeError(\"Cannot call a class as a function\")}(this),this.player=e,this.player.template.mask.addEventListener(\"click\",(function(){t.hide()})),this.player.template.settingButton.addEventListener(\"click\",(function(){t.show()})),this.loop=this.player.options.loop,this.player.template.loopToggle.checked=this.loop,this.player.template.loop.addEventListener(\"click\",(function(){t.player.template.loopToggle.checked=!t.player.template.loopToggle.checked,t.player.template.loopToggle.checked?t.loop=!0:t.loop=!1,t.hide()})),this.showDanmaku=this.player.user.get(\"danmaku\"),this.showDanmaku||this.player.danmaku&&this.player.danmaku.hide(),this.player.template.showDanmakuToggle.checked=this.showDanmaku,this.player.template.showDanmaku.addEventListener(\"click\",(function(){t.player.template.showDanmakuToggle.checked=!t.player.template.showDanmakuToggle.checked,t.player.template.showDanmakuToggle.checked?(t.showDanmaku=!0,t.player.danmaku.show()):(t.showDanmaku=!1,t.player.danmaku.hide()),t.player.user.set(\"danmaku\",t.showDanmaku?1:0),t.hide()})),this.unlimitDanmaku=this.player.user.get(\"unlimited\"),this.player.template.unlimitDanmakuToggle.checked=this.unlimitDanmaku,this.player.template.unlimitDanmaku.addEventListener(\"click\",(function(){t.player.template.unlimitDanmakuToggle.checked=!t.player.template.unlimitDanmakuToggle.checked,t.player.template.unlimitDanmakuToggle.checked?(t.unlimitDanmaku=!0,t.player.danmaku.unlimit(!0)):(t.unlimitDanmaku=!1,t.player.danmaku.unlimit(!1)),t.player.user.set(\"unlimited\",t.unlimitDanmaku?1:0),t.hide()})),this.player.template.speed.addEventListener(\"click\",(function(){t.player.template.settingBox.classList.add(\"dplayer-setting-box-narrow\"),t.player.template.settingBox.classList.add(\"dplayer-setting-box-speed\")}));for(var r,a,i=0;i<this.player.template.speedItem.length;i++)!function(e){t.player.template.speedItem[e].addEventListener(\"click\",(function(){t.player.speed(t.player.template.speedItem[e].dataset.speed),t.hide()}))}(i);this.player.danmaku&&(this.player.on(\"danmaku_opacity\",(function(e){t.player.bar.set(\"danmaku\",e,\"width\"),t.player.user.set(\"opacity\",e)})),this.player.danmaku.opacity(this.player.user.get(\"opacity\")),r=function(e){var r=e||window.event,a=((r.clientX||r.changedTouches[0].clientX)-n.default.getBoundingClientRectViewLeft(t.player.template.danmakuOpacityBarWrap))/130;a=Math.max(a,0);a=Math.min(a,1),t.player.danmaku.opacity(a)},a=function e(){document.removeEventListener(n.default.nameMap.dragEnd,e),document.removeEventListener(n.default.nameMap.dragMove,r),t.player.template.danmakuOpacityBox.classList.remove(\"dplayer-setting-danmaku-active\")},this.player.template.danmakuOpacityBarWrapWrap.addEventListener(\"click\",(function(e){var r=e||window.event,a=((r.clientX||r.changedTouches[0].clientX)-n.default.getBoundingClientRectViewLeft(t.player.template.danmakuOpacityBarWrap))/130;a=Math.max(a,0);a=Math.min(a,1),t.player.danmaku.opacity(a)})),this.player.template.danmakuOpacityBarWrapWrap.addEventListener(n.default.nameMap.dragStart,(function(){document.addEventListener(n.default.nameMap.dragMove,r),document.addEventListener(n.default.nameMap.dragEnd,a),t.player.template.danmakuOpacityBox.classList.add(\"dplayer-setting-danmaku-active\")})))}t.default=o},function(e,t,r){\"use strict\";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=(function(e,t,r){t&&a(e.prototype,t)}(i,[{key:\"resize\",value:function(e,t){this.container.style.width=e+\"px\",this.container.style.height=t+\"px\",this.container.style.top=2-t+\"px\"}},{key:\"show\",value:function(){this.container.style.display=\"block\",this.events&&this.events.trigger(\"thumbnails_show\")}},{key:\"move\",value:function(e){this.container.style.backgroundPosition=\"-\"+160*(Math.ceil(e/this.barWidth*100)-1)+\"px 0\",this.container.style.left=Math.min(Math.max(e-this.container.offsetWidth/2,-10),this.barWidth-150)+\"px\"}},{key:\"hide\",value:function(){this.container.style.display=\"none\",this.events&&this.events.trigger(\"thumbnails_hide\")}}]),i);function i(e){!function(e){if(!(e instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),this.container=e.container,this.barWidth=e.barWidth,this.container.style.backgroundImage=\"url('\"+e.url+\"')\",this.events=e.events}t.default=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=s(r(1)),n=s(r(18)),i=s(r(2));function o(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e){return e&&e.__esModule?e:{default:e}}var l=(function(e,t,r){t&&o(e.prototype,t),r&&o(e,r)}(d,[{key:\"initPlayButton\",value:function(){var e=this;this.player.template.playButton.addEventListener(\"click\",(function(){e.player.toggle()})),a.default.isMobile?(this.player.template.videoWrap.addEventListener(\"click\",(function(){e.toggle()})),this.player.template.controllerMask.addEventListener(\"click\",(function(){e.toggle()}))):(this.player.template.videoWrap.addEventListener(\"click\",(function(){e.player.toggle()})),this.player.template.controllerMask.addEventListener(\"click\",(function(){e.player.toggle()})))}},{key:\"initHighlights\",value:function(){var e=this;this.player.on(\"durationchange\",(function(){if(1!==e.player.video.duration&&e.player.video.duration!==1/0&&e.player.options.highlight){var t=document.querySelectorAll(\".dplayer-highlight\");[].slice.call(t,0).forEach((function(t){e.player.template.playedBarWrap.removeChild(t)}));for(var r,a=0;a<e.player.options.highlight.length;a++)e.player.options.highlight[a].text&&e.player.options.highlight[a].time&&((r=document.createElement(\"div\")).classList.add(\"dplayer-highlight\"),r.style.left=e.player.options.highlight[a].time/e.player.video.duration*100+\"%\",r.innerHTML='<span class=\"dplayer-highlight-text\">'+e.player.options.highlight[a].text+\"</span>\",e.player.template.playedBarWrap.insertBefore(r,e.player.template.playedBarTime))}}))}},{key:\"initThumbnails\",value:function(){var e=this;this.player.options.video.thumbnails&&(this.thumbnails=new n.default({container:this.player.template.barPreview,barWidth:this.player.template.barWrap.offsetWidth,url:this.player.options.video.thumbnails,events:this.player.events}),this.player.on(\"loadedmetadata\",(function(){e.thumbnails.resize(160,e.player.video.videoHeight/e.player.video.videoWidth*160)})))}},{key:\"initPlayedBar\",value:function(){function e(e){var t=((e.clientX||e.changedTouches[0].clientX)-a.default.getBoundingClientRectViewLeft(r.player.template.playedBarWrap))/r.player.template.playedBarWrap.clientWidth;t=Math.max(t,0);t=Math.min(t,1),r.player.bar.set(\"played\",t,\"width\"),r.player.template.ptime.innerHTML=a.default.secondToTime(t*r.player.video.duration)}function t(n){document.removeEventListener(a.default.nameMap.dragEnd,t),document.removeEventListener(a.default.nameMap.dragMove,e);var i=((n.clientX||n.changedTouches[0].clientX)-a.default.getBoundingClientRectViewLeft(r.player.template.playedBarWrap))/r.player.template.playedBarWrap.clientWidth;i=Math.max(i,0);i=Math.min(i,1),r.player.bar.set(\"played\",i,\"width\"),r.player.seek(r.player.bar.get(\"played\")*r.player.video.duration),r.player.timer.enable(\"progress\")}var r=this;this.player.template.playedBarWrap.addEventListener(a.default.nameMap.dragStart,(function(){r.player.timer.disable(\"progress\"),document.addEventListener(a.default.nameMap.dragMove,e),document.addEventListener(a.default.nameMap.dragEnd,t)})),this.player.template.playedBarWrap.addEventListener(a.default.nameMap.dragMove,(function(e){if(r.player.video.duration){var t=a.default.cumulativeOffset(r.player.template.playedBarWrap).left,n=(e.clientX||e.changedTouches[0].clientX)-t;if(n<0||n>r.player.template.playedBarWrap.offsetWidth)return;var i=r.player.video.duration*(n/r.player.template.playedBarWrap.offsetWidth);a.default.isMobile&&r.thumbnails&&r.thumbnails.show(),r.thumbnails&&r.thumbnails.move(n),r.player.template.playedBarTime.style.left=n-(3600<=i?25:20)+\"px\",r.player.template.playedBarTime.innerText=a.default.secondToTime(i),r.player.template.playedBarTime.classList.remove(\"hidden\")}})),this.player.template.playedBarWrap.addEventListener(a.default.nameMap.dragEnd,(function(){a.default.isMobile&&r.thumbnails&&r.thumbnails.hide()})),a.default.isMobile||(this.player.template.playedBarWrap.addEventListener(\"mouseenter\",(function(){r.player.video.duration&&(r.thumbnails&&r.thumbnails.show(),r.player.template.playedBarTime.classList.remove(\"hidden\"))})),this.player.template.playedBarWrap.addEventListener(\"mouseleave\",(function(){r.player.video.duration&&(r.thumbnails&&r.thumbnails.hide(),r.player.template.playedBarTime.classList.add(\"hidden\"))})))}},{key:\"initFullButton\",value:function(){var e=this;this.player.template.browserFullButton.addEventListener(\"click\",(function(){e.player.fullScreen.toggle(\"browser\")})),this.player.template.webFullButton.addEventListener(\"click\",(function(){e.player.fullScreen.toggle(\"web\")}))}},{key:\"initVolumeButton\",value:function(){function e(e){var t=e||window.event,n=((t.clientX||t.changedTouches[0].clientX)-a.default.getBoundingClientRectViewLeft(r.player.template.volumeBarWrap)-5.5)/35;r.player.volume(n)}function t(){document.removeEventListener(a.default.nameMap.dragEnd,t),document.removeEventListener(a.default.nameMap.dragMove,e),r.player.template.volumeButton.classList.remove(\"dplayer-volume-active\")}var r=this;this.player.template.volumeBarWrapWrap.addEventListener(\"click\",(function(e){var t=e||window.event,n=((t.clientX||t.changedTouches[0].clientX)-a.default.getBoundingClientRectViewLeft(r.player.template.volumeBarWrap)-5.5)/35;r.player.volume(n)})),this.player.template.volumeBarWrapWrap.addEventListener(a.default.nameMap.dragStart,(function(){document.addEventListener(a.default.nameMap.dragMove,e),document.addEventListener(a.default.nameMap.dragEnd,t),r.player.template.volumeButton.classList.add(\"dplayer-volume-active\")})),this.player.template.volumeButtonIcon.addEventListener(\"click\",(function(){r.player.video.muted?(r.player.video.muted=!1,r.player.switchVolumeIcon(),r.player.bar.set(\"volume\",r.player.volume(),\"width\")):(r.player.video.muted=!0,r.player.template.volumeIcon.innerHTML=i.default.volumeOff,r.player.bar.set(\"volume\",0,\"width\"))}))}},{key:\"initQualityButton\",value:function(){var e=this;this.player.options.video.quality&&this.player.template.qualityList.addEventListener(\"click\",(function(t){t.target.classList.contains(\"dplayer-quality-item\")&&e.player.switchQuality(t.target.dataset.index)}))}},{key:\"initScreenshotButton\",value:function(){var e=this;this.player.options.screenshot&&this.player.template.camareButton.addEventListener(\"click\",(function(){var t=document.createElement(\"canvas\");t.width=e.player.video.videoWidth,t.height=e.player.video.videoHeight,t.getContext(\"2d\").drawImage(e.player.video,0,0,t.width,t.height);var r=void 0;t.toBlob((function(e){r=URL.createObjectURL(e);var t=document.createElement(\"a\");t.href=r,t.download=\"DPlayer.png\",t.style.display=\"none\",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(r)})),e.player.events.trigger(\"screenshot\",r)}))}},{key:\"initSubtitleButton\",value:function(){var e=this;this.player.options.subtitle&&(this.player.events.on(\"subtitle_show\",(function(){e.player.template.subtitleButton.dataset.balloon=e.player.tran(\"Hide subtitle\"),e.player.template.subtitleButtonInner.style.opacity=\"\",e.player.user.set(\"subtitle\",1)})),this.player.events.on(\"subtitle_hide\",(function(){e.player.template.subtitleButton.dataset.balloon=e.player.tran(\"Show subtitle\"),e.player.template.subtitleButtonInner.style.opacity=\"0.4\",e.player.user.set(\"subtitle\",0)})),this.player.template.subtitleButton.addEventListener(\"click\",(function(){e.player.subtitle.toggle()})))}},{key:\"setAutoHide\",value:function(){var e=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout((function(){!e.player.video.played.length||e.player.paused||e.disableAutoHide||e.hide()}),3e3)}},{key:\"show\",value:function(){this.player.container.classList.remove(\"dplayer-hide-controller\")}},{key:\"hide\",value:function(){this.player.container.classList.add(\"dplayer-hide-controller\"),this.player.setting.hide(),this.player.comment&&this.player.comment.hide()}},{key:\"isShow\",value:function(){return!this.player.container.classList.contains(\"dplayer-hide-controller\")}},{key:\"toggle\",value:function(){this.isShow()?this.hide():this.show()}},{key:\"destroy\",value:function(){clearTimeout(this.autoHideTimer)}}]),d);function d(e){var t=this;!function(e){if(!(e instanceof d))throw new TypeError(\"Cannot call a class as a function\")}(this),this.player=e,this.autoHideTimer=0,a.default.isMobile||(this.player.container.addEventListener(\"mousemove\",(function(){t.setAutoHide()})),this.player.container.addEventListener(\"click\",(function(){t.setAutoHide()})),this.player.on(\"play\",(function(){t.setAutoHide()})),this.player.on(\"pause\",(function(){t.setAutoHide()}))),this.initPlayButton(),this.initThumbnails(),this.initPlayedBar(),this.initFullButton(),this.initQualityButton(),this.initScreenshotButton(),this.initSubtitleButton(),this.initHighlights(),a.default.isMobile||this.initVolumeButton()}t.default=l},function(e,t,r){\"use strict\";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=(function(e,t,r){t&&a(e.prototype,t)}(i,[{key:\"switch\",value:function(e){this.container.innerHTML=e,this.container.classList.add(\"dplayer-bezel-transition\")}}]),i);function i(e){var t=this;!function(e){if(!(e instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),this.container=e,this.container.addEventListener(\"animationend\",(function(){t.container.classList.remove(\"dplayer-bezel-transition\")}))}t.default=n},function(e,t,r){\"use strict\";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=(function(e,t,r){t&&a(e.prototype,t)}(i,[{key:\"init\",value:function(){var e=this;this.types.map((function(t){return\"fps\"!==t&&e[\"init\"+t+\"Checker\"](),t}))}},{key:\"initloadingChecker\",value:function(){var e,t=this,r=0,a=!1;this.loadingChecker=setInterval((function(){t.enableloadingChecker&&(e=t.player.video.currentTime,a||e!==r||t.player.video.paused||(t.player.container.classList.add(\"dplayer-loading\"),a=!0),a&&r<e&&!t.player.video.paused&&(t.player.container.classList.remove(\"dplayer-loading\"),a=!1),r=e)}),100)}},{key:\"initfpsChecker\",value:function(){var e=this;window.requestAnimationFrame((function(){var t;e.enablefpsChecker?(e.initfpsChecker(),e.fpsStart?(e.fpsIndex++,1e3<(t=new Date)-e.fpsStart&&(e.player.infoPanel.fps(e.fpsIndex/(t-e.fpsStart)*1e3),e.fpsStart=new Date,e.fpsIndex=0)):(e.fpsStart=new Date,e.fpsIndex=0)):(e.fpsStart=0,e.fpsIndex=0)}))}},{key:\"initinfoChecker\",value:function(){var e=this;this.infoChecker=setInterval((function(){e.enableinfoChecker&&e.player.infoPanel.update()}),1e3)}},{key:\"enable\",value:function(e){this[\"enable\"+e+\"Checker\"]=!0,\"fps\"===e&&this.initfpsChecker()}},{key:\"disable\",value:function(e){this[\"enable\"+e+\"Checker\"]=!1}},{key:\"destroy\",value:function(){var e=this;this.types.map((function(t){return e[\"enable\"+t+\"Checker\"]=!1,e[t+\"Checker\"]&&clearInterval(e[t+\"Checker\"]),t}))}}]),i);function i(e){!function(e){if(!(e instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),this.player=e,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},this.types=[\"loading\",\"info\",\"fps\"],this.init()}t.default=n},function(e,t,r){\"use strict\";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=(function(e,t,r){t&&a(e.prototype,t)}(i,[{key:\"set\",value:function(e,t,r){t=Math.max(t,0),t=Math.min(t,1),this.elements[e].style[r]=100*t+\"%\"}},{key:\"get\",value:function(e){return parseFloat(this.elements[e].style.width)/100}}]),i);function i(e){!function(e){if(!(e instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),this.elements={},this.elements.volume=e.volumeBar,this.elements.played=e.playedBar,this.elements.loaded=e.loadedBar,this.elements.danmaku=e.danmakuOpacityBar}t.default=n},function(e,t,r){\"use strict\";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=(function(e,t,r){t&&a(e.prototype,t)}(i,[{key:\"init\",value:function(){var e,t=this;this.container.style.fontSize=this.options.fontSize,this.container.style.bottom=this.options.bottom,this.container.style.color=this.options.color,this.video.textTracks&&this.video.textTracks[0]&&((e=this.video.textTracks[0]).oncuechange=function(){var r,a=e.activeCues[0];a?(t.container.innerHTML=\"\",(r=document.createElement(\"p\")).appendChild(a.getCueAsHTML()),t.container.appendChild(r)):t.container.innerHTML=\"\",t.events.trigger(\"subtitle_change\")})}},{key:\"show\",value:function(){this.container.classList.remove(\"dplayer-subtitle-hide\"),this.events.trigger(\"subtitle_show\")}},{key:\"hide\",value:function(){this.container.classList.add(\"dplayer-subtitle-hide\"),this.events.trigger(\"subtitle_hide\")}},{key:\"toggle\",value:function(){this.container.classList.contains(\"dplayer-subtitle-hide\")?this.show():this.hide()}}]),i);function i(e,t,r,a){!function(e){if(!(e instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),this.container=e,this.video=t,this.options=r,this.events=a,this.init()}t.default=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(1),n=a&&a.__esModule?a:{default:a};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=(function(e,t,r){t&&i(e.prototype,t),r&&i(e,r)}(s,[{key:\"init\",value:function(){for(var e in this.storageName){var t=this.storageName[e];this.data[e]=parseFloat(n.default.storage.get(t)||this.default[e])}}},{key:\"get\",value:function(e){return this.data[e]}},{key:\"set\",value:function(e,t){this.data[e]=t,n.default.storage.set(this.storageName[e],t)}}]),s);function s(e){!function(e){if(!(e instanceof s))throw new TypeError(\"Cannot call a class as a function\")}(this),this.storageName={opacity:\"dplayer-danmaku-opacity\",volume:\"dplayer-volume\",unlimited:\"dplayer-danmaku-unlimited\",danmaku:\"dplayer-danmaku-show\",subtitle:\"dplayer-subtitle-show\"},this.default={opacity:.7,volume:e.options.hasOwnProperty(\"volume\")?e.options.volume:.7,unlimited:(e.options.danmaku&&e.options.danmaku.unlimited?1:0)||0,danmaku:1,subtitle:1},this.data={},this.init()}t.default=o},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(1),n=a&&a.__esModule?a:{default:a};function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=(function(e,t,r){t&&i(e.prototype,t),r&&i(e,r)}(s,[{key:\"isFullScreen\",value:function(){switch(0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"browser\"){case\"browser\":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;case\"web\":return this.player.container.classList.contains(\"dplayer-fulled\")}}},{key:\"request\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"browser\",t=\"browser\"===e?\"web\":\"browser\",r=this.isFullScreen(t);switch(r||(this.lastScrollPosition=n.default.getScrollPosition()),e){case\"browser\":this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen?this.player.video.webkitEnterFullScreen():this.player.container.msRequestFullscreen&&this.player.container.msRequestFullscreen();break;case\"web\":this.player.container.classList.add(\"dplayer-fulled\"),document.body.classList.add(\"dplayer-web-fullscreen-fix\"),this.player.events.trigger(\"webfullscreen\")}r&&this.cancel(t)}},{key:\"cancel\",value:function(){switch(0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"browser\"){case\"browser\":document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();break;case\"web\":this.player.container.classList.remove(\"dplayer-fulled\"),document.body.classList.remove(\"dplayer-web-fullscreen-fix\"),this.player.events.trigger(\"webfullscreen_cancel\")}}},{key:\"toggle\",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:\"browser\";this.isFullScreen(e)?this.cancel(e):this.request(e)}}]),s);function s(e){var t=this;function r(){t.player.resize(),t.isFullScreen(\"browser\")?t.player.events.trigger(\"fullscreen\"):(n.default.setScrollPosition(t.lastScrollPosition),t.player.events.trigger(\"fullscreen_cancel\"))}function a(){var e=document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e&&e!==t.player.container||(t.player.resize(),e?t.player.events.trigger(\"fullscreen\"):(n.default.setScrollPosition(t.lastScrollPosition),t.player.events.trigger(\"fullscreen_cancel\")))}!function(e){if(!(e instanceof s))throw new TypeError(\"Cannot call a class as a function\")}(this),this.player=e,this.player.events.on(\"webfullscreen\",(function(){t.player.resize()})),this.player.events.on(\"webfullscreen_cancel\",(function(){t.player.resize(),n.default.setScrollPosition(t.lastScrollPosition)})),/Firefox/.test(navigator.userAgent)?(document.addEventListener(\"mozfullscreenchange\",a),document.addEventListener(\"fullscreenchange\",a)):(this.player.container.addEventListener(\"fullscreenchange\",r),this.player.container.addEventListener(\"webkitfullscreenchange\",r),document.addEventListener(\"msfullscreenchange\",a),document.addEventListener(\"MSFullscreenChange\",a))}t.default=o},function(e,t,r){\"use strict\";function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,\"__esModule\",{value:!0});var n=(function(e,t,r){t&&a(e.prototype,t)}(i,[{key:\"on\",value:function(e,t){this.type(e)&&\"function\"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))}},{key:\"trigger\",value:function(e,t){if(this.events[e]&&this.events[e].length)for(var r=0;r<this.events[e].length;r++)this.events[e][r](t)}},{key:\"type\",value:function(e){return-1!==this.playerEvents.indexOf(e)?\"player\":-1!==this.videoEvents.indexOf(e)?\"video\":(console.error(\"Unknown event name: \"+e),null)}}]),i);function i(){!function(e){if(!(e instanceof i))throw new TypeError(\"Cannot call a class as a function\")}(this),this.events={},this.videoEvents=[\"abort\",\"canplay\",\"canplaythrough\",\"durationchange\",\"emptied\",\"ended\",\"error\",\"loadeddata\",\"loadedmetadata\",\"loadstart\",\"mozaudioavailable\",\"pause\",\"play\",\"playing\",\"progress\",\"ratechange\",\"seeked\",\"seeking\",\"stalled\",\"suspend\",\"timeupdate\",\"volumechange\",\"waiting\"],this.playerEvents=[\"screenshot\",\"thumbnails_show\",\"thumbnails_hide\",\"danmaku_show\",\"danmaku_hide\",\"danmaku_clear\",\"danmaku_loaded\",\"danmaku_send\",\"danmaku_opacity\",\"contextmenu_show\",\"contextmenu_hide\",\"notice_show\",\"notice_hide\",\"quality_start\",\"quality_end\",\"destroy\",\"resize\",\"fullscreen\",\"fullscreen_cancel\",\"webfullscreen\",\"webfullscreen_cancel\",\"subtitle_show\",\"subtitle_hide\",\"subtitle_change\"]}t.default=n},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n=r(1),i=n&&n.__esModule?n:{default:n};function o(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=(function(e,t,r){t&&o(e.prototype,t),r&&o(e,r)}(l,[{key:\"load\",value:function(){var e=this,t=this.options.api.maximum?this.options.api.address+\"v3/?id=\"+this.options.api.id+\"&max=\"+this.options.api.maximum:this.options.api.address+\"v3/?id=\"+this.options.api.id,r=(this.options.api.addition||[]).slice(0);r.push(t),this.events&&this.events.trigger(\"danmaku_load_start\",r),this._readAllEndpoints(r,(function(t){e.dan=[].concat.apply([],t).sort((function(e,t){return e.time-t.time})),window.requestAnimationFrame((function(){e.frame()})),e.options.callback(),e.events&&e.events.trigger(\"danmaku_load_end\")}))}},{key:\"reload\",value:function(e){this.options.api=e,this.dan=[],this.clear(),this.load()}},{key:\"_readAllEndpoints\",value:function(e,t){for(var r=this,a=[],n=0,i=0;i<e.length;++i)!function(i){r.options.apiBackend.read({url:e[i],success:function(r){a[i]=r,++n===e.length&&t(a)},error:function(o){r.options.error(o||r.options.tran(\"Danmaku load failed\")),a[i]=[],++n===e.length&&t(a)}})}(i)}},{key:\"send\",value:function(e,t){var r=this,a={token:this.options.api.token,id:this.options.api.id,author:this.options.api.user,time:this.options.time(),text:e.text,color:e.color,type:e.type};this.options.apiBackend.send({url:this.options.api.address+\"v3/\",data:a,success:t,error:function(e){r.options.error(e||r.options.tran(\"Danmaku send failed\"))}}),this.dan.splice(this.danIndex,0,a),this.danIndex++;var n={text:this.htmlEncode(a.text),color:a.color,type:a.type,border:\"2px solid \"+this.options.borderColor};this.draw(n),this.events&&this.events.trigger(\"danmaku_send\",a)}},{key:\"frame\",value:function(){var e=this;if(this.dan.length&&!this.paused&&this.showing){for(var t=this.dan[this.danIndex],r=[];t&&this.options.time()>parseFloat(t.time);)r.push(t),t=this.dan[++this.danIndex];this.draw(r)}window.requestAnimationFrame((function(){e.frame()}))}},{key:\"opacity\",value:function(e){if(void 0!==e){for(var t=this.container.getElementsByClassName(\"dplayer-danmaku-item\"),r=0;r<t.length;r++)t[r].style.opacity=e;this._opacity=e,this.events&&this.events.trigger(\"danmaku_opacity\",this._opacity)}return this._opacity}},{key:\"draw\",value:function(e){var t=this;if(this.showing){var r=this.options.height,n=this.container.offsetWidth,o=this.container.offsetHeight,s=parseInt(o/r),l=function(e){return(n+e)/5},d=function(e,r,i){for(var o=n/l(i),d=function(a){var i=t.danTunnel[r][a+\"\"];if(!i||!i.length)return t.danTunnel[r][a+\"\"]=[e],e.addEventListener(\"animationend\",(function(){t.danTunnel[r][a+\"\"].splice(0,1)})),{v:a%s};if(\"right\"!==r)return\"continue\";for(var d,u,c,p=0;p<i.length;p++){var h=(void 0,u=(d=i[p]).offsetWidth||parseInt(d.style.width),c=d.getBoundingClientRect().right||t.container.getBoundingClientRect().right+u,t.container.getBoundingClientRect().right-c-10);if(h<=n-o*l(parseInt(i[p].style.width))||h<=0)break;if(p===i.length-1)return t.danTunnel[r][a+\"\"].push(e),e.addEventListener(\"animationend\",(function(){t.danTunnel[r][a+\"\"].splice(0,1)})),{v:a%s}}},u=0;t.unlimited||u<s;u++){var c=d(u);if(\"continue\"!==c&&\"object\"===(void 0===c?\"undefined\":a(c)))return c.v}return-1};\"[object Array]\"!==Object.prototype.toString.call(e)&&(e=[e]);for(var u=document.createDocumentFragment(),c=0;c<e.length;c++)!function(a){e[a].type=i.default.number2Type(e[a].type),e[a].color||(e[a].color=16777215);var o=document.createElement(\"div\");o.classList.add(\"dplayer-danmaku-item\"),o.classList.add(\"dplayer-danmaku-\"+e[a].type),e[a].border?o.innerHTML='<span style=\"border:'+e[a].border+'\">'+e[a].text+\"</span>\":o.innerHTML=e[a].text,o.style.opacity=t._opacity,o.style.color=i.default.number2Color(e[a].color),o.addEventListener(\"animationend\",(function(){t.container.removeChild(o)}));var s=t._measure(e[a].text),l=void 0;switch(e[a].type){case\"right\":0<=(l=d(o,e[a].type,s))&&(o.style.width=s+1+\"px\",o.style.top=r*l+\"px\",o.style.transform=\"translateX(-\"+n+\"px)\");break;case\"top\":0<=(l=d(o,e[a].type))&&(o.style.top=r*l+\"px\");break;case\"bottom\":0<=(l=d(o,e[a].type))&&(o.style.bottom=r*l+\"px\");break;default:console.error(\"Can't handled danmaku type: \"+e[a].type)}0<=l&&(o.classList.add(\"dplayer-danmaku-move\"),u.appendChild(o))}(c);return this.container.appendChild(u),u}}},{key:\"play\",value:function(){this.paused=!1}},{key:\"pause\",value:function(){this.paused=!0}},{key:\"_measure\",value:function(e){var t;return this.context||(t=getComputedStyle(this.container.getElementsByClassName(\"dplayer-danmaku-item\")[0],null),this.context=document.createElement(\"canvas\").getContext(\"2d\"),this.context.font=t.getPropertyValue(\"font\")),this.context.measureText(e).width}},{key:\"seek\",value:function(){this.clear();for(var e=0;e<this.dan.length;e++){if(this.dan[e].time>=this.options.time()){this.danIndex=e;break}this.danIndex=this.dan.length}}},{key:\"clear\",value:function(){this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.options.container.innerHTML=\"\",this.events&&this.events.trigger(\"danmaku_clear\")}},{key:\"htmlEncode\",value:function(e){return e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#x27;\").replace(/\\//g,\"&#x2f;\")}},{key:\"resize\",value:function(){for(var e=this.container.offsetWidth,t=this.container.getElementsByClassName(\"dplayer-danmaku-item\"),r=0;r<t.length;r++)t[r].style.transform=\"translateX(-\"+e+\"px)\"}},{key:\"hide\",value:function(){this.showing=!1,this.pause(),this.clear(),this.events&&this.events.trigger(\"danmaku_hide\")}},{key:\"show\",value:function(){this.seek(),this.showing=!0,this.play(),this.events&&this.events.trigger(\"danmaku_show\")}},{key:\"unlimit\",value:function(e){this.unlimited=e}}]),l);function l(e){!function(e){if(!(e instanceof l))throw new TypeError(\"Cannot call a class as a function\")}(this),this.options=e,this.container=this.options.container,this.danTunnel={right:{},top:{},bottom:{}},this.danIndex=0,this.dan=[],this.showing=!0,this._opacity=this.options.opacity,this.events=this.options.events,this.unlimited=this.options.unlimited,this._measure(\"\"),this.load()}t.default=s},function(e,t,r){\"use strict\";(function(t){e.exports=!1;try{e.exports=\"[object process]\"===Object.prototype.toString.call(t.process)}catch(t){}}).call(this,r(4))},function(e,t,r){\"use strict\";(function(t){var a=r(28),n=Object.create(a?t:window),i=/[\"&'<>]/;n.$escape=function(e){return function(e){var t=\"\"+e,r=i.exec(t);if(!r)return e;var a=\"\",n=void 0,o=void 0,s=void 0;for(n=r.index,o=0;n<t.length;n++){switch(t.charCodeAt(n)){case 34:s=\"&#34;\";break;case 38:s=\"&#38;\";break;case 39:s=\"&#39;\";break;case 60:s=\"&#60;\";break;case 62:s=\"&#62;\";break;default:continue}o!==n&&(a+=t.substring(o,n)),o=n+1,a+=s}return o!==n?a+t.substring(o,n):a}(function e(t){return\"string\"!=typeof t&&(t=null==t?\"\":\"function\"==typeof t?e(t.call(t)):JSON.stringify(t)),t}(e))},n.$each=function(e,t){if(Array.isArray(e))for(var r=0,a=e.length;r<a;r++)t(e[r],r);else for(var n in e)t(e[n],n)},e.exports=n}).call(this,r(4))},function(e,t,r){var a=r(6);e.exports=function(e){\"use strict\";var t,n=\"\",i=(e=e||{}).video,o=e.options,s=a.$escape,l=e.tran,d=e.icons,u=e.index,c=a.$each;return e.$value,e.$index,n+='<div class=\"dplayer-mask\"></div>\\n<div class=\"dplayer-video-wrap\">\\n    ',t=r(5)(i),n+=t,n+=\"\\n    \",o.logo&&(n+='\\n    <div class=\"dplayer-logo\">\\n        <img src=\"',n+=s(o.logo),n+='\">\\n    </div>\\n    '),n+='\\n    <div class=\"dplayer-danmaku\"',o.danmaku&&o.danmaku.bottm&&(n+=' style=\"margin-bottom:',n+=s(o.danmaku.bottm),n+='\"'),n+='>\\n        <div class=\"dplayer-danmaku-item dplayer-danmaku-item--demo\"></div>\\n    </div>\\n    <div class=\"dplayer-subtitle\"></div>\\n    <div class=\"dplayer-bezel\">\\n        <span class=\"dplayer-bezel-icon\"></span>\\n        ',o.danmaku&&(n+='\\n        <span class=\"dplayer-danloading\">',n+=s(l(\"Danmaku is loading\")),n+=\"</span>\\n        \"),n+='\\n        <span class=\"diplayer-loading-icon\">',n+=d.loading,n+='</span>\\n    </div>\\n</div>\\n<div class=\"dplayer-controller-mask\"></div>\\n<div class=\"dplayer-controller\">\\n    <div class=\"dplayer-icons dplayer-comment-box\">\\n        <button class=\"dplayer-icon dplayer-comment-setting-icon\" data-balloon=\"',n+=s(l(\"Setting\")),n+='\" data-balloon-pos=\"up\">\\n            <span class=\"dplayer-icon-content\">',n+=d.pallette,n+='</span>\\n        </button>\\n        <div class=\"dplayer-comment-setting-box\">\\n            <div class=\"dplayer-comment-setting-color\">\\n                <div class=\"dplayer-comment-setting-title\">',n+=s(l(\"Set danmaku color\")),n+='</div>\\n                <label>\\n                    <input type=\"radio\" name=\"dplayer-danmaku-color-',n+=s(u),n+='\" value=\"#fff\" checked>\\n                    <span style=\"background: #fff;\"></span>\\n                </label>\\n                <label>\\n                    <input type=\"radio\" name=\"dplayer-danmaku-color-',n+=s(u),n+='\" value=\"#e54256\">\\n                    <span style=\"background: #e54256\"></span>\\n                </label>\\n                <label>\\n                    <input type=\"radio\" name=\"dplayer-danmaku-color-',n+=s(u),n+='\" value=\"#ffe133\">\\n                    <span style=\"background: #ffe133\"></span>\\n                </label>\\n                <label>\\n                    <input type=\"radio\" name=\"dplayer-danmaku-color-',n+=s(u),n+='\" value=\"#64DD17\">\\n                    <span style=\"background: #64DD17\"></span>\\n                </label>\\n                <label>\\n                    <input type=\"radio\" name=\"dplayer-danmaku-color-',n+=s(u),n+='\" value=\"#39ccff\">\\n                    <span style=\"background: #39ccff\"></span>\\n                </label>\\n                <label>\\n                    <input type=\"radio\" name=\"dplayer-danmaku-color-',n+=s(u),n+='\" value=\"#D500F9\">\\n                    <span style=\"background: #D500F9\"></span>\\n                </label>\\n            </div>\\n            <div class=\"dplayer-comment-setting-type\">\\n                <div class=\"dplayer-comment-setting-title\">',n+=s(l(\"Set danmaku type\")),n+='</div>\\n                <label>\\n                    <input type=\"radio\" name=\"dplayer-danmaku-type-',n+=s(u),n+='\" value=\"1\">\\n                    <span>',n+=s(l(\"Top\")),n+='</span>\\n                </label>\\n                <label>\\n                    <input type=\"radio\" name=\"dplayer-danmaku-type-',n+=s(u),n+='\" value=\"0\" checked>\\n                    <span>',n+=s(l(\"Rolling\")),n+='</span>\\n                </label>\\n                <label>\\n                    <input type=\"radio\" name=\"dplayer-danmaku-type-',n+=s(u),n+='\" value=\"2\">\\n                    <span>',n+=s(l(\"Bottom\")),n+='</span>\\n                </label>\\n            </div>\\n        </div>\\n        <input class=\"dplayer-comment-input\" type=\"text\" placeholder=\"',n+=s(l(\"Input danmaku, hit Enter\")),n+='\" maxlength=\"30\">\\n        <button class=\"dplayer-icon dplayer-send-icon\" data-balloon=\"',n+=s(l(\"Send\")),n+='\" data-balloon-pos=\"up\">\\n            <span class=\"dplayer-icon-content\">',n+=d.send,n+='</span>\\n        </button>\\n    </div>\\n    <div class=\"dplayer-icons dplayer-icons-left\">\\n        <button class=\"dplayer-icon dplayer-play-icon\">\\n            <span class=\"dplayer-icon-content\">',n+=d.play,n+='</span>\\n        </button>\\n        <div class=\"dplayer-volume\">\\n            <button class=\"dplayer-icon dplayer-volume-icon\">\\n                <span class=\"dplayer-icon-content\">',n+=d.volumeDown,n+='</span>\\n            </button>\\n            <div class=\"dplayer-volume-bar-wrap\" data-balloon-pos=\"up\">\\n                <div class=\"dplayer-volume-bar\">\\n                    <div class=\"dplayer-volume-bar-inner\" style=\"background: ',n+=s(o.theme),n+=';\">\\n                        <span class=\"dplayer-thumb\" style=\"background: ',n+=s(o.theme),n+='\"></span>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <span class=\"dplayer-time\">\\n            <span class=\"dplayer-ptime\">0:00</span> /\\n            <span class=\"dplayer-dtime\">0:00</span>\\n        </span>\\n        ',o.live&&(n+='\\n        <span class=\"dplayer-live-badge\"><span class=\"dplayer-live-dot\" style=\"background: ',n+=s(o.theme),n+=';\"></span>',n+=s(l(\"Live\")),n+=\"</span>\\n        \"),n+='\\n    </div>\\n    <div class=\"dplayer-icons dplayer-icons-right\">\\n        ',o.video.quality&&(n+='\\n        <div class=\"dplayer-quality\">\\n            <button class=\"dplayer-icon dplayer-quality-icon\">',n+=s(o.video.quality[o.video.defaultQuality].name),n+='</button>\\n            <div class=\"dplayer-quality-mask\">\\n                <div class=\"dplayer-quality-list\">\\n                ',c(o.video.quality,(function(e,t){n+='\\n                    <div class=\"dplayer-quality-item\" data-index=\"',n+=s(t),n+='\">',n+=s(e.name),n+=\"</div>\\n                \"})),n+=\"\\n                </div>\\n            </div>\\n        </div>\\n        \"),n+=\"\\n        \",o.screenshot&&(n+='\\n        <div class=\"dplayer-icon dplayer-camera-icon\" data-balloon=\"',n+=s(l(\"Screenshot\")),n+='\" data-balloon-pos=\"up\">\\n            <span class=\"dplayer-icon-content\">',n+=d.camera,n+=\"</span>\\n        </div>\\n        \"),n+='\\n        <div class=\"dplayer-comment\">\\n            <button class=\"dplayer-icon dplayer-comment-icon\" data-balloon=\"',n+=s(l(\"Send danmaku\")),n+='\" data-balloon-pos=\"up\">\\n                <span class=\"dplayer-icon-content\">',n+=d.comment,n+=\"</span>\\n            </button>\\n        </div>\\n        \",o.subtitle&&(n+='\\n        <div class=\"dplayer-subtitle-btn\">\\n            <button class=\"dplayer-icon dplayer-subtitle-icon\" data-balloon=\"',n+=s(l(\"Hide subtitle\")),n+='\" data-balloon-pos=\"up\">\\n                <span class=\"dplayer-icon-content\">',n+=d.subtitle,n+=\"</span>\\n            </button>\\n        </div>\\n        \"),n+='\\n        <div class=\"dplayer-setting\">\\n            <button class=\"dplayer-icon dplayer-setting-icon\" data-balloon=\"',n+=s(l(\"Setting\")),n+='\" data-balloon-pos=\"up\">\\n                <span class=\"dplayer-icon-content\">',n+=d.setting,n+='</span>\\n            </button>\\n            <div class=\"dplayer-setting-box\">\\n                <div class=\"dplayer-setting-origin-panel\">\\n                    <div class=\"dplayer-setting-item dplayer-setting-speed\">\\n                        <span class=\"dplayer-label\">',n+=s(l(\"Speed\")),n+='</span>\\n                        <div class=\"dplayer-toggle\">',n+=d.right,n+='</div>\\n                    </div>\\n                    <div class=\"dplayer-setting-item dplayer-setting-loop\">\\n                        <span class=\"dplayer-label\">',n+=s(l(\"Loop\")),n+='</span>\\n                        <div class=\"dplayer-toggle\">\\n                            <input class=\"dplayer-toggle-setting-input\" type=\"checkbox\" name=\"dplayer-toggle\">\\n                            <label for=\"dplayer-toggle\"></label>\\n                        </div>\\n                    </div>\\n                    <div class=\"dplayer-setting-item dplayer-setting-showdan\">\\n                        <span class=\"dplayer-label\">',n+=s(l(\"Show danmaku\")),n+='</span>\\n                        <div class=\"dplayer-toggle\">\\n                            <input class=\"dplayer-showdan-setting-input\" type=\"checkbox\" name=\"dplayer-toggle-dan\">\\n                            <label for=\"dplayer-toggle-dan\"></label>\\n                        </div>\\n                    </div>\\n                    <div class=\"dplayer-setting-item dplayer-setting-danunlimit\">\\n                        <span class=\"dplayer-label\">',n+=s(l(\"Unlimited danmaku\")),n+='</span>\\n                        <div class=\"dplayer-toggle\">\\n                            <input class=\"dplayer-danunlimit-setting-input\" type=\"checkbox\" name=\"dplayer-toggle-danunlimit\">\\n                            <label for=\"dplayer-toggle-danunlimit\"></label>\\n                        </div>\\n                    </div>\\n                    <div class=\"dplayer-setting-item dplayer-setting-danmaku\">\\n                        <span class=\"dplayer-label\">',n+=s(l(\"Opacity for danmaku\")),n+='</span>\\n                        <div class=\"dplayer-danmaku-bar-wrap\">\\n                            <div class=\"dplayer-danmaku-bar\">\\n                                <div class=\"dplayer-danmaku-bar-inner\">\\n                                    <span class=\"dplayer-thumb\"></span>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n                <div class=\"dplayer-setting-speed-panel\">\\n                    <div class=\"dplayer-setting-speed-item\" data-speed=\"0.5\">\\n                        <span class=\"dplayer-label\">0.5</span>\\n                    </div>\\n                    <div class=\"dplayer-setting-speed-item\" data-speed=\"0.75\">\\n                        <span class=\"dplayer-label\">0.75</span>\\n                    </div>\\n                    <div class=\"dplayer-setting-speed-item\" data-speed=\"1\">\\n                        <span class=\"dplayer-label\">',n+=s(l(\"Normal\")),n+='</span>\\n                    </div>\\n                    <div class=\"dplayer-setting-speed-item\" data-speed=\"1.25\">\\n                        <span class=\"dplayer-label\">1.25</span>\\n                    </div>\\n                    <div class=\"dplayer-setting-speed-item\" data-speed=\"1.5\">\\n                        <span class=\"dplayer-label\">1.5</span>\\n                    </div>\\n                    <div class=\"dplayer-setting-speed-item\" data-speed=\"2\">\\n                        <span class=\"dplayer-label\">2</span>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\"dplayer-full\">\\n            <button class=\"dplayer-icon dplayer-full-in-icon\" data-balloon=\"',n+=s(l(\"Web full screen\")),n+='\" data-balloon-pos=\"up\">\\n                <span class=\"dplayer-icon-content\">',n+=d.fullWeb,n+='</span>\\n            </button>\\n            <button class=\"dplayer-icon dplayer-full-icon\" data-balloon=\"',n+=s(l(\"Full screen\")),n+='\" data-balloon-pos=\"up\">\\n                <span class=\"dplayer-icon-content\">',n+=d.full,n+='</span>\\n            </button>\\n        </div>\\n    </div>\\n    <div class=\"dplayer-bar-wrap\">\\n        <div class=\"dplayer-bar-time hidden\">00:00</div>\\n        <div class=\"dplayer-bar-preview\"></div>\\n        <div class=\"dplayer-bar\">\\n            <div class=\"dplayer-loaded\" style=\"width: 0;\"></div>\\n            <div class=\"dplayer-played\" style=\"width: 0; background: ',n+=s(o.theme),n+='\">\\n                <span class=\"dplayer-thumb\" style=\"background: ',n+=s(o.theme),n+='\"></span>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n<div class=\"dplayer-info-panel dplayer-info-panel-hide\">\\n    <div class=\"dplayer-info-panel-close\">[x]</div>\\n    <div class=\"dplayer-info-panel-item dplayer-info-panel-item-version\">\\n        <span class=\"dplayer-info-panel-item-title\">Player version</span>\\n        <span class=\"dplayer-info-panel-item-data\"></span>\\n    </div>\\n    <div class=\"dplayer-info-panel-item dplayer-info-panel-item-fps\">\\n        <span class=\"dplayer-info-panel-item-title\">Player FPS</span>\\n        <span class=\"dplayer-info-panel-item-data\"></span>\\n    </div>\\n    <div class=\"dplayer-info-panel-item dplayer-info-panel-item-type\">\\n        <span class=\"dplayer-info-panel-item-title\">Video type</span>\\n        <span class=\"dplayer-info-panel-item-data\"></span>\\n    </div>\\n    <div class=\"dplayer-info-panel-item dplayer-info-panel-item-url\">\\n        <span class=\"dplayer-info-panel-item-title\">Video url</span>\\n        <span class=\"dplayer-info-panel-item-data\"></span>\\n    </div>\\n    <div class=\"dplayer-info-panel-item dplayer-info-panel-item-resolution\">\\n        <span class=\"dplayer-info-panel-item-title\">Video resolution</span>\\n        <span class=\"dplayer-info-panel-item-data\"></span>\\n    </div>\\n    <div class=\"dplayer-info-panel-item dplayer-info-panel-item-duration\">\\n        <span class=\"dplayer-info-panel-item-title\">Video duration</span>\\n        <span class=\"dplayer-info-panel-item-data\"></span>\\n    </div>\\n    ',o.danmaku&&(n+='\\n    <div class=\"dplayer-info-panel-item dplayer-info-panel-item-danmaku-id\">\\n        <span class=\"dplayer-info-panel-item-title\">Danamku id</span>\\n        <span class=\"dplayer-info-panel-item-data\"></span>\\n    </div>\\n    <div class=\"dplayer-info-panel-item dplayer-info-panel-item-danmaku-api\">\\n        <span class=\"dplayer-info-panel-item-title\">Danamku api</span>\\n        <span class=\"dplayer-info-panel-item-data\"></span>\\n    </div>\\n    <div class=\"dplayer-info-panel-item dplayer-info-panel-item-danmaku-amount\">\\n        <span class=\"dplayer-info-panel-item-title\">Danamku amount</span>\\n        <span class=\"dplayer-info-panel-item-data\"></span>\\n    </div>\\n    '),n+='\\n</div>\\n<div class=\"dplayer-menu\">\\n    ',c(o.contextmenu,(function(e,t){n+='\\n        <div class=\"dplayer-menu-item\">\\n            <a',e.link&&(n+=' target=\"_blank\"'),n+=' href=\"',n+=s(e.link||\"javascript:void(0);\"),n+='\">',n+=s(l(e.text)),n+=\"</a>\\n        </div>\\n    \"})),n+='\\n</div>\\n<div class=\"dplayer-notice\"></div>'}},function(e,t){e.exports='<svg version=\"1.1\" viewBox=\"0 0 22 22\"><svg x=\"7\" y=\"1\"><circle class=\"diplayer-loading-dot diplayer-loading-dot-0\" cx=\"4\" cy=\"4\" r=\"2\"></circle></svg><svg x=\"11\" y=\"3\"><circle class=\"diplayer-loading-dot diplayer-loading-dot-1\" cx=\"4\" cy=\"4\" r=\"2\"></circle></svg><svg x=\"13\" y=\"7\"><circle class=\"diplayer-loading-dot diplayer-loading-dot-2\" cx=\"4\" cy=\"4\" r=\"2\"></circle></svg><svg x=\"11\" y=\"11\"><circle class=\"diplayer-loading-dot diplayer-loading-dot-3\" cx=\"4\" cy=\"4\" r=\"2\"></circle></svg><svg x=\"7\" y=\"13\"><circle class=\"diplayer-loading-dot diplayer-loading-dot-4\" cx=\"4\" cy=\"4\" r=\"2\"></circle></svg><svg x=\"3\" y=\"11\"><circle class=\"diplayer-loading-dot diplayer-loading-dot-5\" cx=\"4\" cy=\"4\" r=\"2\"></circle></svg><svg x=\"1\" y=\"7\"><circle class=\"diplayer-loading-dot diplayer-loading-dot-6\" cx=\"4\" cy=\"4\" r=\"2\"></circle></svg><svg x=\"3\" y=\"3\"><circle class=\"diplayer-loading-dot diplayer-loading-dot-7\" cx=\"4\" cy=\"4\" r=\"2\"></circle></svg></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 32\"><path d=\"M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 32\"><path d=\"M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 32\"><path d=\"M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 32\"><path d=\"M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 32\"><path d=\"M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 32\"><path d=\"M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 32\"><path d=\"M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 28\"><path d=\"M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 33\"><path d=\"M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 33\"><path d=\"M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 21 32\"><path d=\"M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 21 32\"><path d=\"M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 21 32\"><path d=\"M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 17 32\"><path d=\"M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z\"></path></svg>'},function(e,t){e.exports='<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 16 32\"><path d=\"M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z\"></path></svg>'},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=o(r(2)),n=o(r(30));function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e){return e&&e.__esModule?e:{default:e}}var s=(function(e,t,r){t&&i(e.prototype,t),r&&i(e,r)}(l,[{key:\"init\",value:function(){this.container.innerHTML=(0,n.default)({options:this.options,index:this.index,tran:this.tran,icons:a.default,video:{current:!0,pic:this.options.video.pic,screenshot:this.options.screenshot,preload:this.options.preload,url:this.options.video.url,subtitle:this.options.subtitle}}),this.volumeBar=this.container.querySelector(\".dplayer-volume-bar-inner\"),this.volumeBarWrap=this.container.querySelector(\".dplayer-volume-bar\"),this.volumeBarWrapWrap=this.container.querySelector(\".dplayer-volume-bar-wrap\"),this.volumeButton=this.container.querySelector(\".dplayer-volume\"),this.volumeButtonIcon=this.container.querySelector(\".dplayer-volume-icon\"),this.volumeIcon=this.container.querySelector(\".dplayer-volume-icon .dplayer-icon-content\"),this.playedBar=this.container.querySelector(\".dplayer-played\"),this.loadedBar=this.container.querySelector(\".dplayer-loaded\"),this.playedBarWrap=this.container.querySelector(\".dplayer-bar-wrap\"),this.playedBarTime=this.container.querySelector(\".dplayer-bar-time\"),this.danmaku=this.container.querySelector(\".dplayer-danmaku\"),this.danmakuLoading=this.container.querySelector(\".dplayer-danloading\"),this.video=this.container.querySelector(\".dplayer-video-current\"),this.bezel=this.container.querySelector(\".dplayer-bezel-icon\"),this.playButton=this.container.querySelector(\".dplayer-play-icon\"),this.videoWrap=this.container.querySelector(\".dplayer-video-wrap\"),this.controllerMask=this.container.querySelector(\".dplayer-controller-mask\"),this.ptime=this.container.querySelector(\".dplayer-ptime\"),this.settingButton=this.container.querySelector(\".dplayer-setting-icon\"),this.settingBox=this.container.querySelector(\".dplayer-setting-box\"),this.mask=this.container.querySelector(\".dplayer-mask\"),this.loop=this.container.querySelector(\".dplayer-setting-loop\"),this.loopToggle=this.container.querySelector(\".dplayer-setting-loop .dplayer-toggle-setting-input\"),this.showDanmaku=this.container.querySelector(\".dplayer-setting-showdan\"),this.showDanmakuToggle=this.container.querySelector(\".dplayer-showdan-setting-input\"),this.unlimitDanmaku=this.container.querySelector(\".dplayer-setting-danunlimit\"),this.unlimitDanmakuToggle=this.container.querySelector(\".dplayer-danunlimit-setting-input\"),this.speed=this.container.querySelector(\".dplayer-setting-speed\"),this.speedItem=this.container.querySelectorAll(\".dplayer-setting-speed-item\"),this.danmakuOpacityBar=this.container.querySelector(\".dplayer-danmaku-bar-inner\"),this.danmakuOpacityBarWrap=this.container.querySelector(\".dplayer-danmaku-bar\"),this.danmakuOpacityBarWrapWrap=this.container.querySelector(\".dplayer-danmaku-bar-wrap\"),this.danmakuOpacityBox=this.container.querySelector(\".dplayer-setting-danmaku\"),this.dtime=this.container.querySelector(\".dplayer-dtime\"),this.controller=this.container.querySelector(\".dplayer-controller\"),this.commentInput=this.container.querySelector(\".dplayer-comment-input\"),this.commentButton=this.container.querySelector(\".dplayer-comment-icon\"),this.commentSettingBox=this.container.querySelector(\".dplayer-comment-setting-box\"),this.commentSettingButton=this.container.querySelector(\".dplayer-comment-setting-icon\"),this.commentSettingFill=this.container.querySelector(\".dplayer-comment-setting-icon path\"),this.commentSendButton=this.container.querySelector(\".dplayer-send-icon\"),this.commentSendFill=this.container.querySelector(\".dplayer-send-icon path\"),this.commentColorSettingBox=this.container.querySelector(\".dplayer-comment-setting-color\"),this.browserFullButton=this.container.querySelector(\".dplayer-full-icon\"),this.webFullButton=this.container.querySelector(\".dplayer-full-in-icon\"),this.menu=this.container.querySelector(\".dplayer-menu\"),this.menuItem=this.container.querySelectorAll(\".dplayer-menu-item\"),this.qualityList=this.container.querySelector(\".dplayer-quality-list\"),this.camareButton=this.container.querySelector(\".dplayer-camera-icon\"),this.subtitleButton=this.container.querySelector(\".dplayer-subtitle-icon\"),this.subtitleButtonInner=this.container.querySelector(\".dplayer-subtitle-icon .dplayer-icon-content\"),this.subtitle=this.container.querySelector(\".dplayer-subtitle\"),this.qualityButton=this.container.querySelector(\".dplayer-quality-icon\"),this.barPreview=this.container.querySelector(\".dplayer-bar-preview\"),this.barWrap=this.container.querySelector(\".dplayer-bar-wrap\"),this.notice=this.container.querySelector(\".dplayer-notice\"),this.infoPanel=this.container.querySelector(\".dplayer-info-panel\"),this.infoPanelClose=this.container.querySelector(\".dplayer-info-panel-close\"),this.infoVersion=this.container.querySelector(\".dplayer-info-panel-item-version .dplayer-info-panel-item-data\"),this.infoFPS=this.container.querySelector(\".dplayer-info-panel-item-fps .dplayer-info-panel-item-data\"),this.infoType=this.container.querySelector(\".dplayer-info-panel-item-type .dplayer-info-panel-item-data\"),this.infoUrl=this.container.querySelector(\".dplayer-info-panel-item-url .dplayer-info-panel-item-data\"),this.infoResolution=this.container.querySelector(\".dplayer-info-panel-item-resolution .dplayer-info-panel-item-data\"),this.infoDuration=this.container.querySelector(\".dplayer-info-panel-item-duration .dplayer-info-panel-item-data\"),this.infoDanmakuId=this.container.querySelector(\".dplayer-info-panel-item-danmaku-id .dplayer-info-panel-item-data\"),this.infoDanmakuApi=this.container.querySelector(\".dplayer-info-panel-item-danmaku-api .dplayer-info-panel-item-data\"),this.infoDanmakuAmount=this.container.querySelector(\".dplayer-info-panel-item-danmaku-amount .dplayer-info-panel-item-data\")}}]),l);function l(e){!function(e){if(!(e instanceof l))throw new TypeError(\"Cannot call a class as a function\")}(this),this.container=e.container,this.options=e.options,this.index=e.index,this.tran=e.tran,this.init()}t.default=s},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a={\"zh-cn\":{\"Danmaku is loading\":\"弹幕加载中\",Top:\"顶部\",Bottom:\"底部\",Rolling:\"滚动\",\"Input danmaku, hit Enter\":\"输入弹幕，回车发送\",\"About author\":\"关于作者\",\"DPlayer feedback\":\"播放器意见反馈\",\"About DPlayer\":\"关于 DPlayer 播放器\",Loop:\"洗脑循环\",Speed:\"速度\",\"Opacity for danmaku\":\"弹幕透明度\",Normal:\"正常\",\"Please input danmaku content!\":\"要输入弹幕内容啊喂！\",\"Set danmaku color\":\"设置弹幕颜色\",\"Set danmaku type\":\"设置弹幕类型\",\"Show danmaku\":\"显示弹幕\",\"Video load failed\":\"视频加载失败\",\"Danmaku load failed\":\"弹幕加载失败\",\"Danmaku send failed\":\"弹幕发送失败\",\"Switching to\":\"正在切换至\",\"Switched to\":\"已经切换至\",quality:\"画质\",FF:\"快进\",REW:\"快退\",\"Unlimited danmaku\":\"海量弹幕\",\"Send danmaku\":\"发送弹幕\",Setting:\"设置\",\"Full screen\":\"全屏\",\"Web full screen\":\"页面全屏\",Send:\"发送\",Screenshot:\"截图\",s:\"秒\",\"Show subtitle\":\"显示字幕\",\"Hide subtitle\":\"隐藏字幕\",Volume:\"音量\",Live:\"直播\",\"Video info\":\"视频统计信息\"},\"zh-tw\":{\"Danmaku is loading\":\"彈幕載入中\",Top:\"頂部\",Bottom:\"底部\",Rolling:\"滾動\",\"Input danmaku, hit Enter\":\"輸入彈幕，Enter 發送\",\"About author\":\"關於作者\",\"DPlayer feedback\":\"播放器意見回饋\",\"About DPlayer\":\"關於 DPlayer 播放器\",Loop:\"循環播放\",Speed:\"速度\",\"Opacity for danmaku\":\"彈幕透明度\",Normal:\"正常\",\"Please input danmaku content!\":\"請輸入彈幕內容啊！\",\"Set danmaku color\":\"設定彈幕顏色\",\"Set danmaku type\":\"設定彈幕類型\",\"Show danmaku\":\"顯示彈幕\",\"Video load failed\":\"影片載入失敗\",\"Danmaku load failed\":\"彈幕載入失敗\",\"Danmaku send failed\":\"彈幕發送失敗\",\"Switching to\":\"正在切換至\",\"Switched to\":\"已經切換至\",quality:\"畫質\",FF:\"快進\",REW:\"快退\",\"Unlimited danmaku\":\"巨量彈幕\",\"Send danmaku\":\"發送彈幕\",Setting:\"設定\",\"Full screen\":\"全螢幕\",\"Web full screen\":\"頁面全螢幕\",Send:\"發送\",Screenshot:\"截圖\",s:\"秒\",\"Show subtitle\":\"顯示字幕\",\"Hide subtitle\":\"隱藏字幕\",Volume:\"音量\",Live:\"直播\",\"Video info\":\"影片統計訊息\"}};t.default=function(e){var t=this;this.lang=e,this.tran=function(e){return a[t.lang]&&a[t.lang][e]?a[t.lang][e]:e}}},function(e,t,r){\"use strict\";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){\"use strict\";var a=r(7);function n(e){if(\"function\"!=typeof e)throw new TypeError(\"executor must be a function.\");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new a(e),t(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n((function(t){e=t})),cancel:e}},e.exports=n},function(e,t,r){\"use strict\";e.exports=function(e,t){return t?e.replace(/\\/+$/,\"\")+\"/\"+t.replace(/^\\/+/,\"\"):e}},function(e,t,r){\"use strict\";e.exports=function(e){return/^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(e)}},function(e,t,r){\"use strict\";var a=r(0);e.exports=function(e,t,r){return a.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){\"use strict\";var a=r(0),n=r(53),i=r(8),o=r(3),s=r(52),l=r(51);function d(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return d(e),e.baseURL&&!s(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=a.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),a.forEach([\"delete\",\"get\",\"head\",\"post\",\"put\",\"patch\",\"common\"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return d(e),t.data=n(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(d(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){\"use strict\";var a=r(0);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){a.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=n},function(e,t,r){\"use strict\";var a=r(0);e.exports=a.isStandardBrowserEnv()?{write:function(e,t,r,n,i,o){var s=[];s.push(e+\"=\"+encodeURIComponent(t)),a.isNumber(r)&&s.push(\"expires=\"+new Date(r).toGMTString()),a.isString(n)&&s.push(\"path=\"+n),a.isString(i)&&s.push(\"domain=\"+i),!0===o&&s.push(\"secure\"),document.cookie=s.join(\"; \")},read:function(e){var t=document.cookie.match(new RegExp(\"(^|;\\\\s*)(\"+e+\")=([^;]*)\"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,\"\",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){\"use strict\";function a(){this.message=\"String contains an invalid character\"}(a.prototype=new Error).code=5,a.prototype.name=\"InvalidCharacterError\",e.exports=function(e){for(var t,r,n=String(e),i=\"\",o=0,s=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";n.charAt(0|o)||(s=\"=\",o%1);i+=s.charAt(63&t>>8-o%1*8)){if(255<(r=n.charCodeAt(o+=.75)))throw new a;t=t<<8|r}return i}},function(e,t,r){\"use strict\";var a,n,i,o=r(0);function s(e){var t=e;return n&&(i.setAttribute(\"href\",t),t=i.href),i.setAttribute(\"href\",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,\"\"):\"\",host:i.host,search:i.search?i.search.replace(/^\\?/,\"\"):\"\",hash:i.hash?i.hash.replace(/^#/,\"\"):\"\",hostname:i.hostname,port:i.port,pathname:\"/\"===i.pathname.charAt(0)?i.pathname:\"/\"+i.pathname}}e.exports=o.isStandardBrowserEnv()?(n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement(\"a\"),a=s(window.location.href),function(e){var t=o.isString(e)?s(e):e;return t.protocol===a.protocol&&t.host===a.host}):function(){return!0}},function(e,t,r){\"use strict\";var a=r(0),n=[\"age\",\"authorization\",\"content-length\",\"content-type\",\"etag\",\"expires\",\"from\",\"host\",\"if-modified-since\",\"if-unmodified-since\",\"last-modified\",\"location\",\"max-forwards\",\"proxy-authorization\",\"referer\",\"retry-after\",\"user-agent\"];e.exports=function(e){var t,r,i,o={};return e&&a.forEach(e.split(\"\\n\"),(function(e){if(i=e.indexOf(\":\"),t=a.trim(e.substr(0,i)).toLowerCase(),r=a.trim(e.substr(i+1)),t){if(o[t]&&0<=n.indexOf(t))return;o[t]=\"set-cookie\"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+\", \"+r:r}})),o}},function(e,t,r){\"use strict\";var a=r(0);function n(e){return encodeURIComponent(e).replace(/%40/gi,\"@\").replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\").replace(/%20/g,\"+\").replace(/%5B/gi,\"[\").replace(/%5D/gi,\"]\")}e.exports=function(e,t,r){if(!t)return e;var i,o=r?r(t):a.isURLSearchParams(t)?t.toString():(i=[],a.forEach(t,(function(e,t){null!=e&&(a.isArray(e)?t+=\"[]\":e=[e],a.forEach(e,(function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),i.push(n(t)+\"=\"+n(e))})))})),i.join(\"&\"));return o&&(e+=(-1===e.indexOf(\"?\")?\"?\":\"&\")+o),e}},function(e,t,r){\"use strict\";e.exports=function(e,t,r,a,n){return e.config=t,r&&(e.code=r),e.request=a,e.response=n,e}},function(e,t,r){\"use strict\";var a=r(9);e.exports=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(a(\"Request failed with status code \"+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){\"use strict\";var a=r(0);e.exports=function(e,t){a.forEach(e,(function(r,a){a!==t&&a.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[a])}))}},function(e,t,r){\"use strict\";var a=r(3),n=r(0),i=r(55),o=r(54);function s(e){this.defaults=e,this.interceptors={request:new i,response:new i}}s.prototype.request=function(e){\"string\"==typeof e&&(e=n.merge({url:arguments[0]},arguments[1])),(e=n.merge(a,{method:\"get\"},this.defaults,e)).method=e.method.toLowerCase();var t=[o,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},n.forEach([\"delete\",\"get\",\"head\",\"options\"],(function(e){s.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}})),n.forEach([\"post\",\"put\",\"patch\"],(function(e){s.prototype[e]=function(t,r,a){return this.request(n.merge(a||{},{method:e,url:t,data:r}))}})),e.exports=s},function(e,t,r){\"use strict\";function a(e){return!!e.constructor&&\"function\"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(a(e)||\"function\"==typeof e.readFloatLE&&\"function\"==typeof e.slice&&a(e.slice(0,0))||!!e._isBuffer)}},function(e,t,r){\"use strict\";var a=r(0),n=r(11),i=r(64),o=r(3);function s(e){var t=new i(e),r=n(i.prototype.request,t);return a.extend(r,i.prototype,t),a.extend(r,t),r}var l=s(o);l.Axios=i,l.create=function(e){return s(a.merge(o,e))},l.Cancel=r(7),l.CancelToken=r(50),l.isCancel=r(8),l.all=function(e){return Promise.all(e)},l.spread=r(49),e.exports=l,e.exports.default=l},function(e,t,r){\"use strict\";e.exports=r(66)},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=r(67),n=a&&a.__esModule?a:{default:a};t.default={send:function(e){n.default.post(e.url,e.data).then((function(t){var r=t.data;r&&0===r.code?e.success&&e.success(r):e.error&&e.error(r&&r.msg)})).catch((function(t){console.error(t),e.error&&e.error()}))},read:function(e){n.default.get(e.url).then((function(t){var r=t.data;r&&0===r.code?e.success&&e.success(r.data.map((function(e){return{time:e[0],type:e[1],color:e[2],author:e[3],text:e[4]}}))):e.error&&e.error(r&&r.msg)})).catch((function(t){console.error(t),e.error&&e.error()}))}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n=r(68),i=n&&n.__esModule?n:{default:n};t.default=function(e){var t={container:e.element||document.getElementsByClassName(\"dplayer\")[0],live:!1,autoplay:!1,theme:\"#b7daff\",loop:!1,lang:(navigator.language||navigator.browserLanguage).toLowerCase(),screenshot:!1,hotkey:!0,preload:\"metadata\",volume:.7,apiBackend:i.default,video:{},contextmenu:[],mutex:!0};for(var r in t)t.hasOwnProperty(r)&&!e.hasOwnProperty(r)&&(e[r]=t[r]);return e.video&&!e.video.type&&(e.video.type=\"auto\"),\"object\"===a(e.danmaku)&&e.danmaku&&!e.danmaku.user&&(e.danmaku.user=\"DIYgod\"),e.subtitle&&(e.subtitle.type||(e.subtitle.type=\"webvtt\"),e.subtitle.fontSize||(e.subtitle.fontSize=\"20px\"),e.subtitle.bottom||(e.subtitle.bottom=\"40px\"),e.subtitle.color||(e.subtitle.color=\"#fff\")),e.video.quality&&(e.video.url=e.video.quality[e.video.defaultQuality].url),e.lang&&(e.lang=e.lang.toLowerCase()),e.contextmenu=e.contextmenu.concat([{text:\"Video info\",click:function(e){e.infoPanel.triggle()}},{text:\"About author\",link:\"https://diygod.me\"},{text:\"DPlayer v1.25.0\",link:\"https://github.com/MoePlayer/DPlayer\"}]),e}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default=function(e){var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){return t.reject(r)}))}))}},function(e,t,r){\"use strict\";(function(e,t){function r(e){delete u[e]}function a(e){if(c)setTimeout(a,0,e);else{var t=u[e];if(t){c=!0;try{!function(){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}()}finally{r(e),c=!1}}}}var n,i,o,s,l,d,u,c,p,h,f;(n=\"undefined\"==typeof self?void 0===e?void 0:e:self).setImmediate||(d=1,c=!(u={}),p=n.document,h=(h=Object.getPrototypeOf&&Object.getPrototypeOf(n))&&h.setTimeout?h:n,f=\"[object process]\"==={}.toString.call(n.process)?function(e){t.nextTick((function(){a(e)}))}:function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage(\"\",\"*\"),n.onmessage=t,e}}()?(s=\"setImmediate$\"+Math.random()+\"$\",l=function(e){e.source===n&&\"string\"==typeof e.data&&0===e.data.indexOf(s)&&a(+e.data.slice(s.length))},n.addEventListener?n.addEventListener(\"message\",l,!1):n.attachEvent(\"onmessage\",l),function(e){n.postMessage(s+e,\"*\")}):n.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){a(e.data)},function(e){o.port2.postMessage(e)}):p&&\"onreadystatechange\"in p.createElement(\"script\")?(i=p.documentElement,function(e){var t=p.createElement(\"script\");t.onreadystatechange=function(){a(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):function(e){setTimeout(a,0,e)},h.setImmediate=function(e){\"function\"!=typeof e&&(e=new Function(\"\"+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return u[d]=a,f(d),d++},h.clearImmediate=r)}).call(this,r(4),r(12))},function(e,a,n){\"use strict\";var i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}a.setTimeout=function(){return new o(i.call(setTimeout,window,arguments),clearTimeout)},a.setInterval=function(){return new o(i.call(setInterval,window,arguments),clearInterval)},a.clearTimeout=a.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},a.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},a.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},a._unrefActive=a.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(71),a.setImmediate=t,a.clearImmediate=r},function(e,t,r){\"use strict\";(function(e){Object.defineProperty(t,\"__esModule\",{value:!0});var a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n=r(70),i=n&&n.__esModule?n:{default:n},o=setTimeout;function s(){}function l(e){if(!(this instanceof l))throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof e)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function d(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,l._immediateFn((function(){var r,a=1===e._state?t.onFulfilled:t.onRejected;if(null!==a){try{r=a(e._value)}catch(r){return void c(t.promise,r)}u(t.promise,r)}else(1===e._state?u:c)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError(\"A promise cannot be resolved with itself.\");if(t&&(\"object\"===(void 0===t?\"undefined\":a(t))||\"function\"==typeof t)){var r=t.then;if(t instanceof l)return e._state=3,e._value=t,void p(e);if(\"function\"==typeof r)return void h((n=r,i=t,function(){n.apply(i,arguments)}),e)}e._state=1,e._value=t,p(e)}catch(t){c(e,t)}var n,i}function c(e,t){e._state=2,e._value=t,p(e)}function p(e){2===e._state&&0===e._deferreds.length&&l._immediateFn((function(){e._handled||l._unhandledRejectionFn(e._value)}));for(var t=0,r=e._deferreds.length;t<r;t++)d(e,e._deferreds[t]);e._deferreds=null}function h(e,t){var r=!1;try{e((function(e){r||(r=!0,u(t,e))}),(function(e){r||(r=!0,c(t,e))}))}catch(e){if(r)return;r=!0,c(t,e)}}l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){var r=new this.constructor(s);return d(this,new function(t,r,a){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof r?r:null,this.promise=a}(0,t,r)),r},l.prototype.finally=i.default,l.all=function(e){return new l((function(t,r){if(!e||void 0===e.length)throw new TypeError(\"Promise.all accepts an array\");var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);for(var i=n.length,o=0;o<n.length;o++)!function e(o,s){try{if(s&&(\"object\"===(void 0===s?\"undefined\":a(s))||\"function\"==typeof s)){var l=s.then;if(\"function\"==typeof l)return l.call(s,(function(t){e(o,t)}),r),0}n[o]=s,0==--i&&t(n)}catch(o){r(o)}}(o,n[o])}))},l.resolve=function(e){return e&&\"object\"===(void 0===e?\"undefined\":a(e))&&e.constructor===l?e:new l((function(t){t(e)}))},l.reject=function(e){return new l((function(t,r){r(e)}))},l.race=function(e){return new l((function(t,r){for(var a=0,n=e.length;a<n;a++)e[a].then(t,r)}))},l._immediateFn=\"function\"==typeof e?function(t){e(t)}:function(e){o(e,0)},l._unhandledRejectionFn=function(e){\"undefined\"!=typeof console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",e)},t.default=l}).call(this,r(72).setImmediate)},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=S(r(73)),n=S(r(1)),i=S(r(69)),o=S(r(48)),s=S(r(47)),l=S(r(2)),d=S(r(27)),u=S(r(26)),c=S(r(25)),p=S(r(24)),h=S(r(23)),f=S(r(22)),g=S(r(21)),m=S(r(20)),y=S(r(19)),v=S(r(17)),b=S(r(16)),w=S(r(15)),k=S(r(14)),T=S(r(13)),E=S(r(5));function x(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function S(e){return e&&e.__esModule?e:{default:e}}var _=0,A=[],R=(function(e,t,r){t&&x(e.prototype,t),r&&x(e,r)}(L,[{key:\"seek\",value:function(e){e=Math.max(e,0),this.video.duration&&(e=Math.min(e,this.video.duration)),this.video.currentTime<e?this.notice(this.tran(\"FF\")+\" \"+(e-this.video.currentTime).toFixed(0)+\" \"+this.tran(\"s\")):this.video.currentTime>e&&this.notice(this.tran(\"REW\")+\" \"+(this.video.currentTime-e).toFixed(0)+\" \"+this.tran(\"s\")),this.video.currentTime=e,this.danmaku&&this.danmaku.seek(),this.bar.set(\"played\",e/this.video.duration,\"width\"),this.template.ptime.innerHTML=n.default.secondToTime(e)}},{key:\"play\",value:function(){var e=this;if(this.paused=!1,this.video.paused&&this.bezel.switch(l.default.play),this.template.playButton.innerHTML=l.default.pause,a.default.resolve(this.video.play()).catch((function(){e.pause()})).then((function(){})),this.timer.enable(\"loading\"),this.container.classList.remove(\"dplayer-paused\"),this.container.classList.add(\"dplayer-playing\"),this.danmaku&&this.danmaku.play(),this.options.mutex)for(var t=0;t<A.length;t++)this!==A[t]&&A[t].pause()}},{key:\"pause\",value:function(){this.paused=!0,this.container.classList.remove(\"dplayer-loading\"),this.video.paused||this.bezel.switch(l.default.pause),this.template.playButton.innerHTML=l.default.play,this.video.pause(),this.timer.disable(\"loading\"),this.container.classList.remove(\"dplayer-playing\"),this.container.classList.add(\"dplayer-paused\"),this.danmaku&&this.danmaku.pause()}},{key:\"switchVolumeIcon\",value:function(){.95<=this.volume()?this.template.volumeIcon.innerHTML=l.default.volumeUp:0<this.volume()?this.template.volumeIcon.innerHTML=l.default.volumeDown:this.template.volumeIcon.innerHTML=l.default.volumeOff}},{key:\"volume\",value:function(e,t,r){var a;return e=parseFloat(e),isNaN(e)||(e=Math.max(e,0),e=Math.min(e,1),this.bar.set(\"volume\",e,\"width\"),a=(100*e).toFixed(0)+\"%\",this.template.volumeBarWrapWrap.dataset.balloon=a,t||this.user.set(\"volume\",e),r||this.notice(this.tran(\"Volume\")+\" \"+(100*e).toFixed(0)+\"%\"),this.video.volume=e,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()),this.video.volume}},{key:\"toggle\",value:function(){this.video.paused?this.play():this.pause()}},{key:\"on\",value:function(e,t){this.events.on(e,t)}},{key:\"switchVideo\",value:function(e,t){this.pause(),this.video.poster=e.pic?e.pic:\"\",this.video.src=e.url,this.initMSE(this.video,e.type||\"auto\"),t&&(this.template.danmakuLoading.style.display=\"block\",this.bar.set(\"played\",0,\"width\"),this.bar.set(\"loaded\",0,\"width\"),this.template.ptime.innerHTML=\"00:00\",this.template.danmaku.innerHTML=\"\",this.danmaku&&this.danmaku.reload({id:t.id,address:t.api,token:t.token,maximum:t.maximum,addition:t.addition,user:t.user}))}},{key:\"initMSE\",value:function(e,t){var r,a,n,i,o=this;if(this.type=t,this.options.video.customType&&this.options.video.customType[t])\"[object Function]\"===Object.prototype.toString.call(this.options.video.customType[t])?this.options.video.customType[t](this.video,this):console.error(\"Illegal customType: \"+t);else switch(\"auto\"===this.type&&(/m3u8(#|\\?|$)/i.exec(e.src)?this.type=\"hls\":/.flv(#|\\?|$)/i.exec(e.src)?this.type=\"flv\":/.mpd(#|\\?|$)/i.exec(e.src)?this.type=\"dash\":this.type=\"normal\"),\"hls\"===this.type&&(e.canPlayType(\"application/x-mpegURL\")||e.canPlayType(\"application/vnd.apple.mpegURL\"))&&(this.type=\"normal\"),this.type){case\"hls\":Hls?Hls.isSupported()?((r=new Hls).loadSource(e.src),r.attachMedia(e)):this.notice(\"Error: Hls is not supported.\"):this.notice(\"Error: Can't find Hls.\");break;case\"flv\":flvjs&&flvjs.isSupported()?flvjs.isSupported()?((a=flvjs.createPlayer({type:\"flv\",url:e.src})).attachMediaElement(e),a.load()):this.notice(\"Error: flvjs is not supported.\"):this.notice(\"Error: Can't find flvjs.\");break;case\"dash\":dashjs?dashjs.MediaPlayer().create().initialize(e,e.src,!1):this.notice(\"Error: Can't find dashjs.\");break;case\"webtorrent\":WebTorrent?WebTorrent.WEBRTC_SUPPORT?(this.container.classList.add(\"dplayer-loading\"),n=new WebTorrent,i=e.src,n.add(i,(function(e){e.files.find((function(e){return e.name.endsWith(\".mp4\")})).renderTo(o.video,{autoplay:o.options.autoplay},(function(){o.container.classList.remove(\"dplayer-loading\")}))}))):this.notice(\"Error: Webtorrent is not supported.\"):this.notice(\"Error: Can't find Webtorrent.\")}}},{key:\"initVideo\",value:function(e,t){var r=this;this.initMSE(e,t),this.on(\"durationchange\",(function(){1!==e.duration&&e.duration!==1/0&&(r.template.dtime.innerHTML=n.default.secondToTime(e.duration))})),this.on(\"progress\",(function(){var t=e.buffered.length?e.buffered.end(e.buffered.length-1)/e.duration:0;r.bar.set(\"loaded\",t,\"width\")})),this.on(\"error\",(function(){r.video.error&&r.tran&&r.notice&&(r.type,r.notice(r.tran(\"Video load failed\"),-1))})),this.on(\"ended\",(function(){r.bar.set(\"played\",1,\"width\"),r.setting.loop?(r.seek(0),r.play()):r.pause(),r.danmaku&&(r.danmaku.danIndex=0)})),this.on(\"play\",(function(){r.paused&&r.play()})),this.on(\"pause\",(function(){r.paused||r.pause()})),this.on(\"timeupdate\",(function(){r.bar.set(\"played\",r.video.currentTime/r.video.duration,\"width\");var e=n.default.secondToTime(r.video.currentTime);r.template.ptime.innerHTML!==e&&(r.template.ptime.innerHTML=e)}));for(var a=0;a<this.events.videoEvents.length;a++)!function(t){e.addEventListener(r.events.videoEvents[t],(function(){r.events.trigger(r.events.videoEvents[t])}))}(a);this.volume(this.user.get(\"volume\"),!0,!0),this.options.subtitle&&(this.subtitle=new h.default(this.template.subtitle,this.video,this.options.subtitle,this.events),this.user.get(\"subtitle\")||this.subtitle.hide())}},{key:\"switchQuality\",value:function(e){var t,r,a,n=this;this.qualityIndex===e||this.switchingQuality||(this.qualityIndex=e,this.switchingQuality=!0,this.quality=this.options.video.quality[e],this.template.qualityButton.innerHTML=this.quality.name,t=this.video.paused,this.video.pause(),r=(0,E.default)({current:!1,pic:null,screenshot:this.options.screenshot,preload:\"auto\",url:this.quality.url,subtitle:this.options.subtitle}),a=(new DOMParser).parseFromString(r,\"text/html\").body.firstChild,this.template.videoWrap.insertBefore(a,this.template.videoWrap.getElementsByTagName(\"div\")[0]),this.prevVideo=this.video,this.video=a,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice(this.tran(\"Switching to\")+\" \"+this.quality.name+\" \"+this.tran(\"quality\"),-1),this.events.trigger(\"quality_start\",this.quality),this.on(\"canplay\",(function(){if(n.prevVideo){if(n.video.currentTime!==n.prevVideo.currentTime)return void n.seek(n.prevVideo.currentTime);n.template.videoWrap.removeChild(n.prevVideo),n.video.classList.add(\"dplayer-video-current\"),t||n.video.play(),n.prevVideo=null,n.notice(n.tran(\"Switched to\")+\" \"+n.quality.name+\" \"+n.tran(\"quality\")),n.switchingQuality=!1,n.events.trigger(\"quality_end\")}})))}},{key:\"notice\",value:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2e3,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice.innerHTML=e,this.template.notice.style.opacity=a,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger(\"notice_show\",e),0<r&&(this.noticeTime=setTimeout((function(){t.template.notice.style.opacity=0,t.events.trigger(\"notice_hide\")}),r))}},{key:\"resize\",value:function(){this.danmaku&&this.danmaku.resize(),this.events.trigger(\"resize\")}},{key:\"speed\",value:function(e){this.video.playbackRate=e}},{key:\"destroy\",value:function(){A.splice(A.indexOf(this),1),this.pause(),this.controller.destroy(),this.timer.destroy(),this.video.src=\"\",this.container.innerHTML=\"\",this.events.trigger(\"destroy\")}}],[{key:\"version\",get:function(){return\"1.25.0\"}}]),L);function L(e){var t=this;!function(e){if(!(e instanceof L))throw new TypeError(\"Cannot call a class as a function\")}(this),this.options=(0,i.default)(e),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.tran=new o.default(this.options.lang).tran,this.events=new u.default,this.user=new p.default(this),this.container=this.options.container,this.container.classList.add(\"dplayer\"),this.options.danmaku||this.container.classList.add(\"dplayer-no-danmaku\"),this.options.live&&this.container.classList.add(\"dplayer-live\"),n.default.isMobile&&this.container.classList.add(\"dplayer-mobile\"),this.arrow=this.container.offsetWidth<=500,this.arrow&&this.container.classList.add(\"dplayer-arrow\"),this.template=new s.default({container:this.container,options:this.options,index:_,tran:this.tran}),this.video=this.template.video,this.bar=new f.default(this.template),this.bezel=new m.default(this.template.bezel),this.fullScreen=new c.default(this),this.controller=new y.default(this),this.options.danmaku&&(this.danmaku=new d.default({container:this.template.danmaku,opacity:this.user.get(\"opacity\"),callback:function(){setTimeout((function(){t.template.danmakuLoading.style.display=\"none\",t.options.autoplay&&t.play()}),0)},error:function(e){t.notice(e)},apiBackend:this.options.apiBackend,borderColor:this.options.theme,height:this.arrow?24:30,time:function(){return t.video.currentTime},unlimited:this.user.get(\"unlimited\"),api:{id:this.options.danmaku.id,address:this.options.danmaku.api,token:this.options.danmaku.token,maximum:this.options.danmaku.maximum,addition:this.options.danmaku.addition,user:this.options.danmaku.user},events:this.events,tran:function(e){return t.tran(e)}}),this.comment=new b.default(this)),this.setting=new v.default(this),document.addEventListener(\"click\",(function(){t.focus=!1}),!0),this.container.addEventListener(\"click\",(function(){t.focus=!0}),!0),this.paused=!0,this.timer=new g.default(this),this.hotkey=new w.default(this),this.contextmenu=new k.default(this),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.infoPanel=new T.default(this),!this.danmaku&&this.options.autoplay&&this.play(),_++,A.push(this)}t.default=R},,,function(e,t,r){},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),r(77);var a=r(74),n=a&&a.__esModule?a:{default:a};console.log(\"\\n %c DPlayer v1.25.0 fdcf45b %c http://dplayer.js.org \\n\\n\",\"color: #fadfa3; background: #030307; padding:5px 0;\",\"background: #fadfa3; padding:5px 0;\"),t.default=n.default}]).default}).call(this,r(\"./node_modules/timers-browserify/main.js\").setImmediate,r(\"./node_modules/timers-browserify/main.js\").clearImmediate)},\"./node_modules/hls.js/dist/hls.js\":function(e,t,r){var a;\"undefined\"!=typeof window&&(a=function(){return r={},e.m=t={\"./node_modules/eventemitter3/index.js\":\n/*!*********************************************!*\\\n  !*** ./node_modules/eventemitter3/index.js ***!\n  \\*********************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){\"use strict\";var a=Object.prototype.hasOwnProperty,n=\"~\";function i(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,a,i){if(\"function\"!=typeof r)throw new TypeError(\"The listener must be a function\");var s=new o(r,a||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function d(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),d.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)a.call(e,t)&&r.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},d.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,o=new Array(i);a<i;a++)o[a]=r[a].fn;return o},d.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},d.prototype.emit=function(e,t,r,a,i,o){var s=n?n+e:e;if(!this._events[s])return!1;var l,d=this._events[s],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,a),!0;case 5:return d.fn.call(d.context,t,r,a,i),!0;case 6:return d.fn.call(d.context,t,r,a,i,o),!0}for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d.fn.apply(d.context,l)}else for(var c,p=d.length,h=0;h<p;h++)switch(d[h].once&&this.removeListener(e,d[h].fn,void 0,!0),u){case 1:d[h].fn.call(d[h].context);break;case 2:d[h].fn.call(d[h].context,t);break;case 3:d[h].fn.call(d[h].context,t,r);break;case 4:d[h].fn.call(d[h].context,t,r,a);break;default:if(!l)for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d[h].fn.apply(d[h].context,l)}return!0},d.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},d.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},d.prototype.removeListener=function(e,t,r,a){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return l(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||a&&!o.once||r&&o.context!==r||l(this,i);else{for(var s=0,d=[],u=o.length;s<u;s++)(o[s].fn!==t||a&&!o[s].once||r&&o[s].context!==r)&&d.push(o[s]);d.length?this._events[i]=1===d.length?d[0]:d:l(this,i)}return this},d.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&l(this,t)):(this._events=new i,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,e.exports=d},\"./node_modules/url-toolkit/src/url-toolkit.js\":\n/*!*****************************************************!*\\\n  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!\n  \\*****************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var a,n,i,o,s;a=/^((?:[a-zA-Z0-9+\\-.]+:)?)(\\/\\/[^\\/?#]*)?((?:[^\\/?#]*\\/)*[^;?#]*)?(;[^?#]*)?(\\?[^#]*)?(#.*)?$/,n=/^([^\\/?#]*)(.*)$/,i=/(?:\\/|^)\\.(?=\\/)/g,o=/(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/)[^\\/]*(?=\\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var a=s.parseURL(e);if(!a)throw new Error(\"Error trying to parse base URL.\");return a.path=s.normalizePath(a.path),s.buildURLFromParts(a)}var i=s.parseURL(t);if(!i)throw new Error(\"Error trying to parse relative URL.\");if(i.scheme)return r.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):t;var o,l=s.parseURL(e);if(!l)throw new Error(\"Error trying to parse base URL.\");!l.netLoc&&l.path&&\"/\"!==l.path[0]&&(o=n.exec(l.path),l.netLoc=o[1],l.path=o[2]),l.netLoc&&!l.path&&(l.path=\"/\");var d,u,c={scheme:l.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(c.netLoc=l.netLoc,\"/\"!==i.path[0]&&(i.path?(u=(d=l.path).substring(0,d.lastIndexOf(\"/\")+1)+i.path,c.path=s.normalizePath(u)):(c.path=l.path,i.params||(c.params=l.params,i.query||(c.query=l.query))))),null===c.path&&(c.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(c)},parseURL:function(e){var t=a.exec(e);return t?{scheme:t[1]||\"\",netLoc:t[2]||\"\",path:t[3]||\"\",params:t[4]||\"\",query:t[5]||\"\",fragment:t[6]||\"\"}:null},normalizePath:function(e){for(e=e.split(\"\").reverse().join(\"\").replace(i,\"\");e.length!==(e=e.replace(o,\"\")).length;);return e.split(\"\").reverse().join(\"\")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},\"./node_modules/webworkify-webpack/index.js\":\n/*!**************************************************!*\\\n  !*** ./node_modules/webworkify-webpack/index.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){function a(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"/\",r.oe=function(e){throw console.error(e),e};var a=r(r.s=ENTRY_MODULE);return a.default||a}var n=\"[\\\\.|\\\\-|\\\\+|\\\\w|/|@]+\",i=\"\\\\(\\\\s*(/\\\\*.*?\\\\*/)?\\\\s*.*?(\"+n+\").*?\\\\)\";function o(e){return(e+\"\").replace(/[.?*+^$[\\]\\\\(){}|-]/g,\"\\\\$&\")}function s(e,t,a){var s={};s[a]=[];var l=t.toString(),d=l.match(/^function\\s?\\w*\\(\\w+,\\s*\\w+,\\s*(\\w+)\\)/);if(!d)return s;for(var u,c=d[1],p=new RegExp(\"(\\\\\\\\n|\\\\W)\"+o(c)+i,\"g\");u=p.exec(l);)\"dll-reference\"!==u[3]&&s[a].push(u[3]);for(p=new RegExp(\"\\\\(\"+o(c)+'\\\\(\"(dll-reference\\\\s('+n+'))\"\\\\)\\\\)'+i,\"g\");u=p.exec(l);)e[u[2]]||(s[a].push(u[1]),e[u[2]]=r(u[1]).m),s[u[2]]=s[u[2]]||[],s[u[2]].push(u[4]);for(var h,f=Object.keys(s),g=0;g<f.length;g++)for(var m=0;m<s[f[g]].length;m++)h=s[f[g]][m],isNaN(+h)||(s[f[g]][m]=+s[f[g]][m]);return s}e.exports=function(e,t){t=t||{};var n={main:r.m},i=t.all?{main:Object.keys(n.main)}:function(e,t){for(var r={main:[t]},a={main:[]},n={main:{}};function(e){return Object.keys(e).reduce((function(t,r){return t||0<e[r].length}),!1)}(r);)for(var i=Object.keys(r),o=0;o<i.length;o++){var l=i[o],d=r[l].pop();if(n[l]=n[l]||{},!n[l][d]&&e[l][d]){n[l][d]=!0,a[l]=a[l]||[],a[l].push(d);for(var u=s(e,e[l][d],l),c=Object.keys(u),p=0;p<c.length;p++)r[c[p]]=r[c[p]]||[],r[c[p]]=r[c[p]].concat(u[c[p]])}}return a}(n,e),o=\"\";Object.keys(i).filter((function(e){return\"main\"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),n[e][t]=\"(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })\",o=o+\"var \"+e+\" = (\"+a.toString().replace(\"ENTRY_MODULE\",JSON.stringify(t))+\")({\"+i[e].map((function(t){return JSON.stringify(t)+\": \"+n[e][t].toString()})).join(\",\")+\"});\\n\"})),o=o+\"new ((\"+a.toString().replace(\"ENTRY_MODULE\",JSON.stringify(e))+\")({\"+i.main.map((function(e){return JSON.stringify(e)+\": \"+n.main[e].toString()})).join(\",\")+\"}))(self);\";var l=new window.Blob([o],{type:\"text/javascript\"});if(t.bare)return l;var d=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),u=new window.Worker(d);return u.objectURL=d,u}},\"./src/crypt/decrypter.js\":\n/*!********************************************!*\\\n  !*** ./src/crypt/decrypter.js + 3 modules ***!\n  \\********************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){\"use strict\";r.r(t);var a=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:\"AES-CBC\",iv:this.aesIV},t,e)},e}(),n=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey(\"raw\",this.key,{name:\"AES-CBC\"},!1,[\"encrypt\",\"decrypt\"])},e}(),i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),a=0;a<4;a++)r[a]=t.getUint32(4*a);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,a=r[0],n=r[1],i=r[2],o=r[3],s=this.invSubMix,l=s[0],d=s[1],u=s[2],c=s[3],p=new Uint32Array(256),h=0,f=0,g=0;for(g=0;g<256;g++)p[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=(m=f^f<<1^f<<2^f<<3^f<<4)>>>8^255&m^99,y=p[t[e[h]=m]=h],v=p[y],b=p[v],w=257*p[m]^16843008*m;a[h]=w<<24|w>>>8,n[h]=w<<16|w>>>16,i[h]=w<<8|w>>>24,o[h]=w,w=16843009*b^65537*v^257*y^16843008*h,l[m]=w<<24|w>>>8,d[m]=w<<16|w>>>16,u[m]=w<<8|w>>>24,c[m]=w,h?(h=y^p[p[p[b^y]]],f^=p[p[f]]):h=f=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,a=0;a<t.length&&r;)r=t[a]===this.key[a],a++;if(!r){this.key=t;var n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw new Error(\"Invalid aes key size=\"+n);for(var i,o,s,l=this.ksRows=4*(n+6+1),d=this.keySchedule=new Uint32Array(l),u=this.invKeySchedule=new Uint32Array(l),c=this.sBox,p=this.rcon,h=this.invSubMix,f=h[0],g=h[1],m=h[2],y=h[3],v=0;v<l;v++)v<n?o=d[v]=t[v]:(s=o,v%n==0?(s=c[(s=s<<8|s>>>24)>>>24]<<24|c[s>>>16&255]<<16|c[s>>>8&255]<<8|c[255&s],s^=p[v/n|0]<<24):6<n&&v%n==4&&(s=c[s>>>24]<<24|c[s>>>16&255]<<16|c[s>>>8&255]<<8|c[255&s]),d[v]=o=(d[v-n]^s)>>>0);for(i=0;i<l;i++)v=l-i,s=3&i?d[v]:d[v-4],u[i]=i<4||v<=4?s:f[c[s>>>24]]^g[c[s>>>16&255]]^m[c[s>>>8&255]]^y[c[255&s]],u[i]=u[i]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,a){for(var n,i,o,s,l,d,u,c,p,h,f,g,m,y,v,b,w,k=this.keySize+6,T=this.invKeySchedule,E=this.invSBox,x=this.invSubMix,S=x[0],_=x[1],A=x[2],R=x[3],L=this.uint8ArrayToUint32Array_(r),D=L[0],C=L[1],O=L[2],I=L[3],P=new Int32Array(e),M=new Int32Array(P.length),F=this.networkToHostOrderSwap;t<P.length;){for(p=F(P[t]),h=F(P[t+1]),f=F(P[t+2]),g=F(P[t+3]),l=p^T[0],d=g^T[1],u=f^T[2],c=h^T[3],m=4,y=1;y<k;y++)n=S[l>>>24]^_[d>>16&255]^A[u>>8&255]^R[255&c]^T[m],i=S[d>>>24]^_[u>>16&255]^A[c>>8&255]^R[255&l]^T[m+1],o=S[u>>>24]^_[c>>16&255]^A[l>>8&255]^R[255&d]^T[m+2],s=S[c>>>24]^_[l>>16&255]^A[d>>8&255]^R[255&u]^T[m+3],l=n,d=i,u=o,c=s,m+=4;n=E[l>>>24]<<24^E[d>>16&255]<<16^E[u>>8&255]<<8^E[255&c]^T[m],i=E[d>>>24]<<24^E[u>>16&255]<<16^E[c>>8&255]<<8^E[255&l]^T[m+1],o=E[u>>>24]<<24^E[c>>16&255]<<16^E[l>>8&255]<<8^E[255&d]^T[m+2],s=E[c>>>24]<<24^E[l>>16&255]<<16^E[d>>8&255]<<8^E[255&u]^T[m+3],m+=3,M[t]=F(n^D),M[t+1]=F(s^C),M[t+2]=F(o^O),M[t+3]=F(i^I),D=p,C=h,O=f,I=g,t+=4}return a?(w=(b=(v=M.buffer).byteLength)&&new DataView(v).getUint8(b-1))?v.slice(0,b-w):v:M.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),o=r(\"./src/errors.ts\"),s=r(\"./src/utils/logger.js\"),l=r(\"./src/events.js\"),d=r(\"./src/utils/get-self-scope.js\"),u=Object(d.getSelfScope)(),c=function(){function e(e,t,r){var a=(void 0===r?{}:r).removePKCS7Padding,n=void 0===a||a;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=n)try{var i=u.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,r,o){var l,d,u=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(s.logger.log(\"JS AES decrypt\"),this.logEnabled=!1),(l=this.decryptor)||(this.decryptor=l=new i),l.expandKey(t),o(l.decrypt(e,0,r,this.removePKCS7Padding))):(this.logEnabled&&(s.logger.log(\"WebCrypto AES decrypt\"),this.logEnabled=!1),d=this.subtle,this.key!==t&&(this.key=t,this.fastAesKey=new n(d,t)),this.fastAesKey.expandKey().then((function(n){new a(d,r).decrypt(e,n).catch((function(a){u.onWebCryptoError(a,e,t,r,o)})).then((function(e){o(e)}))})).catch((function(a){u.onWebCryptoError(a,e,t,r,o)})))},t.onWebCryptoError=function(e,t,r,a,n){this.config.enableSoftwareAES?(s.logger.log(\"WebCrypto Error, disable WebCrypto API\"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,a,n)):(s.logger.error(\"decrypting error : \"+e.message),this.observer.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=c},\"./src/demux/demuxer-inline.js\":\n/*!**************************************************!*\\\n  !*** ./src/demux/demuxer-inline.js + 12 modules ***!\n  \\**************************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */function(e,t,r){\"use strict\";r.r(t);var a=r(\"./src/events.js\"),n=r(\"./src/errors.ts\"),i=r(\"./src/crypt/decrypter.js\"),o=r(\"./src/polyfills/number.js\"),s=r(\"./src/utils/logger.js\"),l=r(\"./src/utils/get-self-scope.js\");function d(e,t){return 255===e[t]&&240==(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function p(e,t){return!!(t+1<e.length&&d(e,t))}function h(e,t,r,i,o){var l;e.samplerate||(l=function(e,t,r,i){var o,l,d,u=navigator.userAgent.toLowerCase(),c=i,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],h=1+((192&t[r+2])>>>6),f=(60&t[r+2])>>>2;if(!(p.length-1<f))return l=(1&t[r+2])<<2,l|=(192&t[r+3])>>>6,s.logger.log(\"manifest codec:\"+i+\",ADTS data:type:\"+h+\",sampleingIndex:\"+f+\"[\"+p[f]+\"Hz],channelConfig:\"+l),o=/firefox/i.test(u)?6<=f?(h=5,d=new Array(4),f-3):(h=2,d=new Array(2),f):-1!==u.indexOf(\"android\")?(h=2,d=new Array(2),f):(h=5,d=new Array(4),i&&(-1!==i.indexOf(\"mp4a.40.29\")||-1!==i.indexOf(\"mp4a.40.5\"))||!i&&6<=f?f-3:((i&&-1!==i.indexOf(\"mp4a.40.2\")&&(6<=f&&1==l||/vivaldi/i.test(u))||!i&&1==l)&&(h=2,d=new Array(2)),f)),d[0]=h<<3,d[0]|=(14&f)>>1,d[1]|=(1&f)<<7,d[1]|=l<<3,5===h&&(d[1]|=(14&o)>>1,d[2]=(1&o)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[f],channelCount:l,codec:\"mp4a.40.\"+h,manifestCodec:c};e.trigger(a.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:\"invalid ADTS sampling index:\"+f})}(t,r,i,o),e.config=l.config,e.samplerate=l.samplerate,e.channelCount=l.channelCount,e.codec=l.codec,e.manifestCodec=l.manifestCodec,s.logger.log(\"parsed codec:\"+e.codec+\",rate:\"+l.samplerate+\",nb channel:\"+l.channelCount))}function f(e){return 9216e4/e}function g(e,t,r,a,n){var i=function(e,t,r,a,n){var i=e.length,o=u(e,t),s=c(e,t);if(0<(s-=o)&&t+o+s<=i)return{headerLength:o,frameLength:s,stamp:r+a*n}}(t,r,a,n,f(e.samplerate));if(i){var o=i.stamp,s=i.headerLength,l=i.frameLength,d={unit:t.subarray(r+s,r+s+l),pts:o,dts:o};return e.samples.push(d),{sample:d,length:l+s}}}var m=r(\"./src/demux/id3.js\"),y=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,a){this._audioTrack={container:\"audio/adts\",type:\"audio\",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:a,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(m.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(function(e,t){if(p(e,t)){var r=u(e,t);if(t+r>=e.length)return;var a=c(e,t);if(a<=r)return;var n=t+a;if(n===e.length||n+1<e.length&&d(e,n))return 1}}(e,t))return s.logger.log(\"ADTS sync word found !\"),!0;return!1},t.append=function(e,t,r,a){for(var n=this._audioTrack,i=m.default.getID3Data(e,0)||[],l=m.default.getTimeStamp(i),d=Object(o.isFiniteNumber)(l)?90*l:9e4*t,u=0,c=d,f=e.length,y=i.length,v=[{pts:c,dts:c,data:i}];y<f-1;)if(p(e,y)&&y+5<f){h(n,this.observer,e,y,n.manifestCodec);var b=g(n,e,y,d,u);if(!b){s.logger.log(\"Unable to parse AAC frame\");break}y+=b.length,c=b.sample.pts,u++}else m.default.isHeader(e,y)?(i=m.default.getID3Data(e,y),v.push({pts:c,dts:c,data:i}),y+=i.length):y++;this.remuxer.remux(n,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},t,r,a)},t.destroy=function(){},e}(),v=r(\"./src/demux/mp4demuxer.js\"),b={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,a,n){if(!(r+24>t.length)){var i=this.parseHeader(t,r);if(i&&r+i.frameLength<=t.length){var o=a+n*(9e4*i.samplesPerFrame/i.sampleRate),s={unit:t.subarray(r,r+i.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=i.channelCount,e.samplerate=i.sampleRate,e.samples.push(s),{sample:s,length:i.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,a=e[t+1]>>1&3,n=e[t+2]>>4&15,i=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!=r&&0!=n&&15!=n&&3!=i){var s=3==r?3-a:3==a?3:4,l=1e3*b.BitratesMap[14*s+n-1],d=3==r?0:2==r?1:2,u=b.SamplingRateMap[3*d+i],c=e[t+3]>>6==3?1:2,p=b.SamplesCoefficients[r][a],h=b.BytesInSlot[a],f=8*p*h;return{sampleRate:u,channelCount:c,frameLength:parseInt(p*l/u+o,10)*h,samplesPerFrame:f}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),a=4;r&&r.frameLength&&(a=r.frameLength);var n=t+a;if(n===e.length||n+1<e.length&&this.isHeaderPattern(e,n))return!0}return!1}},w=b,k=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,a=new Uint8Array(4),n=Math.min(4,t);if(0===n)throw new Error(\"no bytes available\");a.set(e.subarray(r,r+n)),this.word=new DataView(a.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},t.skipBits=function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return 32<e&&s.logger.error(\"Cannot read more than 32 bits at a time\"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,r=8,a=0;a<e;a++)0!==r&&(r=(t+this.readEG()+256)%256),t=0===r?t:r},t.readSPS=function(){var e,t,r,a,n,i,o,s=0,l=0,d=0,u=0,c=this.readUByte.bind(this),p=this.readBits.bind(this),h=this.readUEG.bind(this),f=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),y=this.skipUEG.bind(this),v=this.skipScalingList.bind(this);if(c(),e=c(),p(5),g(3),c(),y(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=h();if(3===b&&g(1),y(),y(),g(1),f())for(i=3!==b?8:12,o=0;o<i;o++)f()&&v(o<6?16:64)}y();var w=h();if(0===w)h();else if(1===w)for(g(1),m(),m(),t=h(),o=0;o<t;o++)m();y(),g(1),r=h(),a=h(),0===(n=p(1))&&g(1),g(1),f()&&(s=h(),l=h(),d=h(),u=h());var k=[1,1];if(f()&&f())switch(c()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-n)*(a+1)*16-(n?2:4)*(d+u),pixelRatio:k}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),T=function(){function e(e,t,r,a){this.decryptdata=r,this.discardEPB=a,this.decrypter=new i.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,a){var n=e[t].unit,i=n.subarray(16,n.length-n.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),s=this;this.decryptBuffer(o,(function(i){i=new Uint8Array(i),n.set(i,16),a||s.decryptAacSamples(e,t+1,r)}))},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var a=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,a),!a)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),a=0,n=32;n<=e.length-16;n+=160,a+=16)r.set(e.subarray(n,n+16),a);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,a=32;a<=e.length-16;a+=160,r+=16)e.set(t.subarray(r,r+16),a);return e},t.decryptAvcSample=function(e,t,r,a,n,i){var o=this.discardEPB(n.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){n.data=l.getAvcDecryptedUnit(o,s),i||l.decryptAvcSamples(e,t,r+1,a)}))},t.decryptAvcSamples=function(e,t,r,a){for(;;t++,r=0){if(t>=e.length)return void a();for(var n=e[t].units;!(r>=n.length);r++){var i=n[r];if(!(i.length<=48||1!==i.type&&5!==i.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,a,i,o),!o)return}}}},e}(),E={video:1,audio:2,id3:3,text:4},x=function(){function e(e,t,r,a){this.observer=e,this.config=r,this.typeSupported=a,this.remuxer=t,this.sampleAes=null,this.pmtUnknownTypes={}}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&\"SAMPLE-AES\"===e.method?this.sampleAes=new T(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0||(r&&s.logger.warn(\"MPEG2-TS detected but first sync word found @ offset \"+r+\", junk ahead ?\"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:\"video\"===e||\"audio\"===e?\"video/mp2t\":void 0,type:e,id:E[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:\"video\"===e?0:void 0,isAAC:\"audio\"===e||void 0,duration:\"audio\"===e?t:void 0}},t.resetInitSegment=function(t,r,a,n){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=e.createTrack(\"video\",n),this._audioTrack=e.createTrack(\"audio\",n),this._id3Track=e.createTrack(\"id3\",n),this._txtTrack=e.createTrack(\"text\",n),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=a,this._duration=n},t.resetTimeStamp=function(){},t.append=function(t,r,i,o){var l,d,u,c,p,h=t.length,f=!1;this.pmtUnknownTypes={},this.contiguous=i;var g=this.pmtParsed,m=this._avcTrack,y=this._audioTrack,v=this._id3Track,b=m.pid,w=y.pid,k=v.pid,T=this._pmtId,E=m.pesData,x=y.pesData,S=v.pesData,_=this._parsePAT,A=this._parsePMT.bind(this),R=this._parsePES,L=this._parseAVCPES.bind(this),D=this._parseAACPES.bind(this),C=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),I=e._syncOffset(t);for(h-=(h+I)%188,l=I;l<h;l+=188)if(71===t[l]){if(d=!!(64&t[l+1]),u=((31&t[l+1])<<8)+t[l+2],1<(48&t[l+3])>>4){if((c=l+5+t[l+4])===l+188)continue}else c=l+4;switch(u){case b:d&&(E&&(p=R(E))&&L(p,!1),E={data:[],size:0}),E&&(E.data.push(t.subarray(c,l+188)),E.size+=l+188-c);break;case w:d&&(x&&(p=R(x))&&(y.isAAC?D:C)(p),x={data:[],size:0}),x&&(x.data.push(t.subarray(c,l+188)),x.size+=l+188-c);break;case k:d&&(S&&(p=R(S))&&O(p),S={data:[],size:0}),S&&(S.data.push(t.subarray(c,l+188)),S.size+=l+188-c);break;case 0:d&&(c+=t[c]+1),T=this._pmtId=_(t,c);break;case T:d&&(c+=t[c]+1);var P=A(t,c,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(b=P.avc)&&(m.pid=b),0<(w=P.audio)&&(y.pid=w,y.isAAC=P.isAAC),0<(k=P.id3)&&(v.pid=k),f&&!g&&(s.logger.log(\"reparse from beginning\"),f=!1,l=I-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(a.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:\"TS packet did not start with 0x47\"});E&&(p=R(E))?(L(p,!0),m.pesData=null):m.pesData=E,x&&(p=R(x))?((y.isAAC?D:C)(p),y.pesData=null):(x&&x.size&&s.logger.log(\"last AAC PES packet truncated,might overlap between fragments\"),y.pesData=x),S&&(p=R(S))?(O(p),v.pesData=null):v.pesData=S,null==this.sampleAes?this.remuxer.remux(y,m,v,this._txtTrack,r,i,o):this.decryptAndRemux(y,m,v,this._txtTrack,r,i,o)},t.decryptAndRemux=function(e,t,r,a,n,i,o){var s;e.samples&&e.isAAC?(s=this).sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,a,n,i,o)})):this.decryptAndRemuxAvc(e,t,r,a,n,i,o)},t.decryptAndRemuxAvc=function(e,t,r,a,n,i,o){var s;t.samples?(s=this).sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,a,n,i,o)})):this.remuxer.remux(e,t,r,a,n,i,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._trackUnknownPmt=function(e,t,r){var a=this.pmtUnknownTypes[e]||0;return 0===a&&(this.pmtUnknownTypes[e]=0,t.call(s.logger,r)),this.pmtUnknownTypes[e]++,a},t._parsePMT=function(e,t,r,a){var n,i={audio:-1,avc:-1,id3:-1,isAAC:!0},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){switch(n=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!a){this._trackUnknownPmt(e[t],s.logger.warn,\"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream\");break}case 15:-1===i.audio&&(i.audio=n);break;case 21:-1===i.id3&&(i.id3=n);break;case 219:if(!a){this._trackUnknownPmt(e[t],s.logger.warn,\"H.264 with AES-128-CBC slice encryption found in unencrypted stream\");break}case 27:-1===i.avc&&(i.avc=n);break;case 3:case 4:r?-1===i.audio&&(i.audio=n,i.isAAC=!1):this._trackUnknownPmt(e[t],s.logger.warn,\"MPEG audio found, not supported in this browser\");break;case 36:this._trackUnknownPmt(e[t],s.logger.warn,\"Unsupported HEVC stream type found\");break;default:this._trackUnknownPmt(e[t],s.logger.log,\"Unknown stream type:\"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return i},t._parsePES=function(e){var t,r,a,n,i,o,l,d,u=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&1<c.length;){var p=new Uint8Array(c[0].length+c[1].length);p.set(c[0]),p.set(c[1],c[0].length),c[0]=p,c.splice(1,1)}if(1!==((t=c[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((a=(t[4]<<8)+t[5])&&a>e.size-6)return null;if(192&(r=t[7])&&(o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&r?54e5<o-(l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(s.logger.warn(Math.round((o-l)/9e4)+\"s delta between PTS and DTS, align them\"),o=l):l=o),d=(n=t[8])+9,e.size<=d)return null;e.size-=d,i=new Uint8Array(e.size);for(var h=0,f=c.length;h<f;h++){var g=(t=c[h]).byteLength;if(d){if(g<d){d-=g;continue}t=t.subarray(d),g-=d,d=0}i.set(t,u),u+=g}return a&&(a-=n+3),{data:i,pts:o,dts:l,len:a}},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,a=r.length;if(isNaN(e.pts)){if(!a)return void t.dropped++;var n=r[a-1];e.pts=n.pts,e.dts=n.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(a||this.contiguous)?(e.id=a,r.push(e)):t.dropped++}e.debug.length&&s.logger.log(e.pts+\"/\"+e.dts+\":\"+e.debug)},t._parseAVCPES=function(e,t){function r(e,t,r,a){return{key:e,pts:t,dts:r,units:[],debug:a}}var a,n,i,o=this,s=this._avcTrack,l=this._parseAVCNALu(e.data),d=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this);e.data=null,d&&l.length&&!s.audFound&&(c(d,s),d=this.avcSample=r(!1,e.pts,e.dts,\"\")),l.forEach((function(t){switch(t.type){case 1:n=!0,(d=d||(o.avcSample=r(!0,e.pts,e.dts,\"\"))).frame=!0;var l,p=t.data;u&&4<p.length&&(2!==(l=new k(p).readSliceType())&&4!==l&&7!==l&&9!==l||(d.key=!0));break;case 5:n=!0,(d=d||(o.avcSample=r(!0,e.pts,e.dts,\"\"))).key=!0,d.frame=!0;break;case 6:n=!0,(a=new k(o.discardEPB(t.data))).readUByte();for(var h=0,f=0,g=!1,y=0;!g&&1<a.bytesAvailable;){for(h=0;h+=y=a.readUByte(),255===y;);for(f=0;f+=y=a.readUByte(),255===y;);if(4===h&&0!==a.bytesAvailable){if(g=!0,181===a.readUByte()&&49===a.readUShort()&&1195456820===a.readUInt()&&3===a.readUByte()){var v=a.readUByte(),b=31&v,w=[v,a.readUByte()];for(i=0;i<b;i++)w.push(a.readUByte()),w.push(a.readUByte()),w.push(a.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:w})}}else if(5===h&&0!==a.bytesAvailable){if(g=!0,16<f){var T=[];for(i=0;i<16;i++)T.push(a.readUByte().toString(16)),3!==i&&5!==i&&7!==i&&9!==i||T.push(\"-\");var E=f-16,x=new Uint8Array(E);for(i=0;i<E;i++)x[i]=a.readUByte();o._insertSampleInOrder(o._txtTrack.samples,{pts:e.pts,payloadType:h,uuid:T.join(\"\"),userDataBytes:x,userData:Object(m.utf8ArrayToStr)(x.buffer)})}}else if(f<a.bytesAvailable)for(i=0;i<f;i++)a.readUByte()}break;case 7:if(u=n=!0,!s.sps){var S=(a=new k(t.data)).readSPS();s.width=S.width,s.height=S.height,s.pixelRatio=S.pixelRatio,s.sps=[t.data],s.duration=o._duration;var _=t.data.subarray(1,4),A=\"avc1.\";for(i=0;i<3;i++){var R=_[i].toString(16);R.length<2&&(R=\"0\"+R),A+=R}s.codec=A}break;case 8:n=!0,s.pps||(s.pps=[t.data]);break;case 9:n=!1,s.audFound=!0,d&&c(d,s),d=o.avcSample=r(!1,e.pts,e.dts,\"\");break;case 12:n=!1;break;default:n=!1,d&&(d.debug+=\"unknown NAL \"+t.type+\" \")}d&&n&&d.units.push(t)})),t&&d&&(c(d,s),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(0<r){if(t.pts>=e[r-1].pts)e.push(t);else for(var a=r-1;0<=a;a--)if(t.pts<e[a].pts){e.splice(a,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t,r,a=this.avcSample;return a&&0!==a.units.length||(a=(e=this._avcTrack.samples)[e.length-1]),a&&(r=(t=a.units)[t.length-1]),r},t._parseAVCNALu=function(e){var t,r,a,n,i,o=0,s=e.byteLength,l=this._avcTrack,d=f=l.naluState||0,u=[],c=-1;for(-1===f&&(a=31&e[c=0],f=0,o=1);o<s;){var p,h,f,g=e[o++];f=f?1!==f?g?1===g?(0<=c?(r={data:e.subarray(c,o-f-1),type:a},u.push(r)):(p=this._getLastNalUnit())&&(d&&o<=4-d&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-d)),0<(t=o-f-1)&&((h=new Uint8Array(p.data.byteLength+t)).set(p.data,0),h.set(e.subarray(0,t),p.data.byteLength),p.data=h)),o<s?(a=31&e[c=o],0):-1):0:3:g?0:2:g?0:1}return 0<=c&&0<=f&&(r={data:e.subarray(c,s),type:a,state:f},u.push(r)),0!==u.length||(n=this._getLastNalUnit())&&((i=new Uint8Array(n.data.byteLength+e.byteLength)).set(n.data,0),i.set(e,n.data.byteLength),n.data=i),l.naluState=f,u},t.discardEPB=function(e){for(var t,r,a=e.byteLength,n=[],i=1;i<a-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;t=a-n.length,r=new Uint8Array(t);var o=0;for(i=0;i<t;o++,i++)o===n[0]&&(o++,n.shift()),r[i]=e[o];return r},t._parseAACPES=function(e){var t,r,i,o,l,d,u,c=this._audioTrack,m=e.data,y=e.pts,v=this.aacOverFlow,b=this.aacLastPTS;for(v&&((d=new Uint8Array(v.byteLength+m.byteLength)).set(v,0),d.set(m,v.byteLength),m=d),i=0,l=m.length;i<l-1&&!p(m,i);i++);if(i){var w,k=i<l-1?(w=\"AAC PES did not start with ADTS header,offset:\"+i,!1):(w=\"no ADTS header found in AAC PES\",!0);if(s.logger.warn(\"parsing error:\"+w),this.observer.trigger(a.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:k,reason:w}),k)return}for(h(c,this.observer,m,i,this.audioCodec),r=0,t=f(c.samplerate),v&&b&&(u=b+t,1<Math.abs(u-y)&&(s.logger.log(\"AAC: align PTS for overlapping frames by \"+Math.round((u-y)/90)),y=u));i<l;){if(p(m,i)){if(i+5<l){var T=g(c,m,i,y,r);if(T){i+=T.length,o=T.sample.pts,r++;continue}}break}i++}v=i<l?m.subarray(i,l):null,this.aacOverFlow=v,this.aacLastPTS=o},t._parseMPEGPES=function(e){for(var t=e.data,r=t.length,a=0,n=0,i=e.pts;n<r;)if(w.isHeader(t,n)){var o=w.appendFrame(this._audioTrack,t,n,i,a);if(!o)break;n+=o.length,a++}else n++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),S=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,a){this._audioTrack={container:\"audio/mpeg\",type:\"audio\",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:a,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,a=m.default.getID3Data(e,0);if(a&&void 0!==m.default.getTimeStamp(a))for(t=a.length,r=Math.min(e.length-1,t+100);t<r;t++)if(w.probe(e,t))return s.logger.log(\"MPEG Audio sync word found !\"),!0;return!1},t.append=function(e,t,r,a){for(var n=m.default.getID3Data(e,0),i=m.default.getTimeStamp(n),o=void 0!==i?90*i:9e4*t,s=n.length,l=e.length,d=0,u=0,c=this._audioTrack,p=[{pts:o,dts:o,data:n}];s<l;)if(w.isHeader(e,s)){var h=w.appendFrame(c,e,s,o,d);if(!h)break;s+=h.length,u=h.sample.pts,d++}else m.default.isHeader(e,s)?(n=m.default.getID3Data(e,s),p.push({pts:u,dts:u,data:n}),s+=n.length):s++;this.remuxer.remux(c,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,r,a)},t.destroy=function(){},e}(),_=function(){function e(){}return e.getSilentFrame=function(e,t){if(\"mp4a.40.2\"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),A=Math.pow(2,32)-1,R=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],\".mp3\":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),a=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:a};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=i,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,n))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),a=8,n=r.length,i=n;n--;)a+=r[n].byteLength;for((t=new Uint8Array(a))[0]=a>>24&255,t[1]=a>>16&255,t[2]=a>>8&255,t[3]=255&a,t.set(e,4),n=0,a=8;n<i;n++)t.set(r[n],a),a+=r[n].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var a=Math.floor(r/(1+A)),n=Math.floor(r%(1+A));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return\"audio\"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,a){return e.box(e.types.moof,e.mfhd(t),e.traf(a,r))},e.moov=function(t){for(var r=t.length,a=[];r--;)a[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(a).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,a=[];r--;)a[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(a))},e.mvhd=function(t,r){r*=t;var a=Math.floor(r/(1+A)),n=Math.floor(r%(1+A)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,i)},e.sdtp=function(t){for(var r,a=t.samples||[],n=new Uint8Array(4+a.length),i=0;i<a.length;i++)r=a[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,n)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){for(var r,a,n=[],i=[],o=0;o<t.sps.length;o++)a=(r=t.sps[o]).byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(r));for(o=0;o<t.pps.length;o++)a=(r=t.pps[o]).byteLength,i.push(a>>>8&255),i.push(255&a),i=i.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(i))),l=t.width,d=t.height,u=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[\".mp3\"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return\"audio\"===t.type?t.isAAC||\"mp3\"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,a=t.duration*t.timescale,n=t.width,i=t.height,o=Math.floor(a/(1+A)),s=Math.floor(a%(1+A));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,i>>8&255,255&i,0,0]))},e.traf=function(t,r){var a=e.sdtp(t),n=t.id,i=Math.floor(r/(1+A)),o=Math.floor(r%(1+A));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,a.length+16+20+8+16+8+8),a)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var a,n,i,o,s,l,d=t.samples||[],u=d.length,c=12+16*u,p=new Uint8Array(c);for(r+=8+c,p.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),a=0;a<u;a++)i=(n=d[a]).duration,o=n.size,s=n.flags,l=n.cts,p.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*a);return e.box(e.types.trun,p)},e.initSegment=function(t){e.types||e.init();var r=e.moov(t),a=new Uint8Array(e.FTYP.byteLength+r.byteLength);return a.set(e.FTYP),a.set(r,e.FTYP.byteLength),a},e}();function L(e,t,r,a){void 0===r&&(r=1),void 0===a&&(a=!1);var n=e*t*r;return a?Math.round(n):n}function D(e,t){return void 0===t&&(t=!1),L(e,1e3,1/9e4,t)}function C(e,t){return void 0===t&&(t=1),L(e,9e4,1/t)}var O=C(10),I=C(.2),P=null;function M(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=r;return e}var F,B=function(){function e(e,t,r,a){var n;this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===P&&(n=navigator.userAgent.match(/Chrome\\/(\\d+)/i),P=n?parseInt(n[1]):0)}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,r=e.reduce((function(e,r){var a=r.pts-e;return a<-4294967296?(t=!0,e):0<a?e:r.pts}),e[0].pts);return t&&s.logger.debug(\"PTS rollover detected\"),r},t.remux=function(e,t,r,n,i,o,l){var d,u,c,p,h,f,g,m,y;this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated&&(d=e.samples.length,u=t.samples.length,p=c=i,d&&u&&(h=this.getVideoStartPts(t.samples),f=(e.samples[0].pts-h)/t.inputTimeScale,c+=Math.max(0,f),p+=Math.max(0,-f)),d?(e.timescale||(s.logger.warn(\"regenerate InitSegment as audio detected\"),this.generateIS(e,t,i)),g=this.remuxAudio(e,c,o,l),u&&(g&&(m=g.endPTS-g.startPTS),t.timescale||(s.logger.warn(\"regenerate InitSegment as video detected\"),this.generateIS(e,t,i)),this.remuxVideo(t,p,o,m))):!u||(y=this.remuxVideo(t,p,o,0,l))&&e.codec&&this.remuxEmptyAudio(e,c,o,y)),r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(a.default.FRAG_PARSED)},t.generateIS=function(e,t,r){var i,o,l,d,u,c=this.observer,p=e.samples,h=t.samples,f=this.typeSupported,g=\"audio/mp4\",m={},y={tracks:m},v=void 0===this._initPTS;v&&(u=d=1/0),e.config&&p.length&&(e.timescale=e.samplerate,s.logger.log(\"audio sampling rate : \"+e.samplerate),e.isAAC||(f.mpeg?(g=\"audio/mpeg\",e.codec=\"\"):f.mp3&&(e.codec=\"mp3\")),m.audio={container:g,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:R.initSegment([e]),metadata:{channelCount:e.channelCount}},v&&(u=d=p[0].pts-Math.round(e.inputTimeScale*r))),t.sps&&t.pps&&h.length?(i=t.inputTimeScale,t.timescale=i,m.video={container:\"video/mp4\",codec:t.codec,initSegment:R.initSegment([t]),metadata:{width:t.width,height:t.height}},v&&(o=this.getVideoStartPts(h),l=Math.round(i*r),d=Math.min(d,h[0].dts-l),u=Math.min(u,o-l),this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:u}))):v&&m.audio&&this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:u}),Object.keys(m).length?(c.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,y),this.ISGenerated=!0,v&&(this._initPTS=u,this._initDTS=d)):c.trigger(a.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:\"no audio/video samples found\"})},t.remuxVideo=function(e,t,r,i){var o,l,d,u,c,p=e.timescale,h=e.samples,f=[],g=h.length,m=this._initPTS,y=8,v=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,w=0,k=!1,T=this.nextAvcDts;if(0!==g){r||(T=t*p-(h[0].pts-M(h[0].dts,h[0].pts)));for(var E=0;E<g;E++){var x=h[E];x.pts=M(x.pts-m,T),x.dts=M(x.dts-m,T),x.dts>x.pts&&(w=Math.max(Math.min(w,x.pts-x.dts),-1*I)),x.dts<h[0<E?E-1:E].dts&&(k=!0)}k&&h.sort((function(e,t){var r=e.dts-t.dts,a=e.pts-t.pts;return r||a||e.id-t.id})),u=h[0].dts,c=h[g-1].dts;var S,_,A,L=Math.round((c-u)/(g-1));if(w<0){if(w<-2*L){s.logger.warn(\"PTS < DTS detected in video samples, offsetting DTS to PTS \"+D(-L,!0)+\" ms\");for(var C=0;C<g;C++)h[C].dts=h[C].pts-L}else{s.logger.warn(\"PTS < DTS detected in video samples, shifting DTS by \"+D(w,!0)+\" ms to overcome this issue\");for(var O=0;O<g;O++)h[O].dts=h[O].dts+w}u=h[0].dts,c=h[g-1].dts}!r||((_=L<(S=u-T))||S<-1)&&(_?s.logger.warn(\"AVC: \"+D(S,!0)+\" ms (\"+S+\"dts) hole between fragments detected, filling it\"):s.logger.warn(\"AVC: \"+D(-S,!0)+\" ms (\"+S+\"dts) overlapping between fragments detected\"),u=T,A=h[0].pts-S,h[0].dts=u,h[0].pts=A,s.logger.log(\"Video: First PTS/DTS adjusted: \"+D(A,!0)+\"/\"+D(u,!0)+\", delta: \"+D(S,!0)+\" ms\")),P&&P<75&&(u=Math.max(0,u));for(var F=0,B=0,N=0;N<g;N++){for(var U=h[N],j=U.units,Y=j.length,G=0,q=0;q<Y;q++)G+=j[q].data.length;B+=G,F+=Y,U.length=G,U.dts=Math.max(U.dts,u),U.pts=Math.max(U.pts,U.dts,0),v=Math.min(U.pts,v),b=Math.max(U.pts,b)}c=h[g-1].dts;var z=B+4*F+8;try{l=new Uint8Array(z)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:n.ErrorTypes.MUX_ERROR,details:n.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:\"fail allocating video mdat \"+z})}var H=new DataView(l.buffer);H.setUint32(0,z),l.set(R.types.mdat,4);for(var K=0;K<g;K++){for(var V,W,X,$,Q,J=h[K],Z=J.units,ee=0,te=0,re=Z.length;te<re;te++){var ae=Z[te],ne=ae.data,ie=ae.data.byteLength;H.setUint32(y,ie),y+=4,l.set(ne,y),y+=ie,ee+=4+ie}K<g-1?o=h[K+1].dts-J.dts:(W=this.config,X=J.dts-h[0<K?K-1:K].dts,W.stretchShortVideoTrack?($=W.maxBufferHole,Math.floor($*p)<(Q=(i?v+i*p:this.nextAudioPts)-J.pts)?((o=Q-X)<0&&(o=X),s.logger.log(\"It is approximately \"+D(Q,!1)+\" ms to the next segment; using duration \"+D(o,!1)+\" ms for the last video frame.\")):o=X):o=X),V=Math.round(J.pts-J.dts),f.push({size:ee,duration:o,cts:V,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:J.key?2:1,isNonSync:J.key?0:1}})}this.nextAvcDts=c+o;var oe,se=e.dropped;e.nbNalu=0,e.dropped=0,f.length&&-1<navigator.userAgent.toLowerCase().indexOf(\"chrome\")&&((oe=f[0].flags).dependsOn=2,oe.isNonSync=0),e.samples=f,d=R.moof(e.sequenceNumber++,u,e),e.samples=[];var le={data1:d,data2:l,startPTS:v/p,endPTS:(b+o)/p,startDTS:u/p,endDTS:this.nextAvcDts/p,type:\"video\",hasAudio:!1,hasVideo:!0,nb:f.length,dropped:se};return this.observer.trigger(a.default.FRAG_PARSING_DATA,le),le}},t.remuxAudio=function(e,t,r,i){var o,l,d,u,c,p=e.inputTimeScale,h=e.timescale,f=p/h,g=(e.isAAC?1024:1152)*f,m=this._initPTS,y=!e.isAAC&&this.typeSupported.mpeg,v=y?0:8,b=e.samples,w=[],k=this.nextAudioPts;if(r|=b.length&&k&&(i&&Math.abs(t-k/p)<.1||Math.abs(b[0].pts-k-m)<20*g),b.forEach((function(e){e.pts=e.dts=M(e.pts-m,t*p)})),0!==(b=b.filter((function(e){return 0<=e.pts}))).length){if(r||(k=i?Math.max(0,t*p):b[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,E=0,x=k;E<b.length;){var S=b[E],A=S.pts,L=A-x;if(L<=-T*g)r||0<E?(s.logger.warn(\"Dropping 1 audio frame @ \"+D(x,!0)/1e3+\"s due to \"+D(L,!0)+\" ms overlap.\"),b.splice(E,1)):(s.logger.warn(\"Audio frame @ \"+D(A,!0)/1e3+\"s overlaps nextAudioPts by \"+D(L,!0)+\" ms.\"),x=A+g,E++);else if(T*g<=L&&L<O&&x){var C=Math.round(L/g);s.logger.warn(\"Injecting \"+C+\" audio frames @ \"+D(x,!0)/1e3+\"s due to \"+D(L,!0)+\" ms gap.\");for(var I=0;I<C;I++){var P,F=Math.max(x,0);(P=_.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log(\"Unable to get silent frame for given audio codec; duplicating last frame instead.\"),P=S.unit.subarray()),b.splice(E,0,{unit:P,pts:F,dts:F}),x+=g,E++}S.pts=S.dts=x,x+=g,E++}else Math.abs(L),S.pts=S.dts=x,x+=g,E++}for(var B=b.length,N=0;B--;)N+=b[B].unit.byteLength;for(var U=0,j=b.length;U<j;U++){var Y=b[U],G=Y.unit,q=Y.pts;if(void 0!==c&&o)o.duration=Math.round((q-c)/f);else{var z=q-k,H=0;if(r&&e.isAAC&&z){if(0<z&&z<O)H=Math.round((q-k)/g),s.logger.log(D(z,!0)+\" ms hole between AAC samples detected,filling it\"),0<H&&(N+=H*(P=(P=_.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||G.subarray()).length);else if(z<-12){s.logger.log(\"drop overlapping AAC sample, expected/parsed/delta: \"+D(k,!0)+\" ms / \"+D(q,!0)+\" ms / \"+D(-z,!0)+\" ms\"),N-=G.byteLength;continue}q=k}if(u=q,!(0<N))return;N+=v;try{l=new Uint8Array(N)}catch(e){return void this.observer.trigger(a.default.ERROR,{type:n.ErrorTypes.MUX_ERROR,details:n.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:\"fail allocating audio mdat \"+N})}y||(new DataView(l.buffer).setUint32(0,N),l.set(R.types.mdat,4));for(var K=0;K<H;K++)(P=_.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log(\"Unable to get silent frame for given audio codec; duplicating this frame instead.\"),P=G.subarray()),l.set(P,v),v+=P.byteLength,o={size:P.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(o)}l.set(G,v);var V=G.byteLength;v+=V,o={size:V,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(o),c=q}var W=0;if(2<=(B=w.length)&&(W=w[B-2].duration,o.duration=W),B){this.nextAudioPts=k=c+f*W,e.samples=w,d=y?new Uint8Array:R.moof(e.sequenceNumber++,u/f,e),e.samples=[];var X=u/p,$=k/p,Q={data1:d,data2:l,startPTS:X,endPTS:$,startDTS:X,endDTS:$,type:\"audio\",hasAudio:!0,hasVideo:!1,nb:B};return this.observer.trigger(a.default.FRAG_PARSING_DATA,Q),Q}return null}},t.remuxEmptyAudio=function(e,t,r,a){var n=e.inputTimeScale,i=n/(e.samplerate?e.samplerate:n),o=this.nextAudioPts,l=(void 0!==o?o:a.startDTS*n)+this._initDTS,d=a.endDTS*n+this._initDTS,u=1024*i,c=Math.ceil((d-l)/u),p=_.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn(\"remux empty Audio\"),p){for(var h=[],f=0;f<c;f++){var g=l+f*u;h.push({unit:p,pts:g,dts:g})}e.samples=h,this.remuxAudio(e,t,r)}else s.logger.trace(\"Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!\")},t.remuxID3=function(e,t){var r=e.samples.length;if(r){for(var n=e.inputTimeScale,i=this._initPTS,o=this._initDTS,s=0;s<r;s++){var l=e.samples[s];l.pts=M(l.pts-i,t*n)/n,l.dts=M(l.dts-o,t*n)/n}this.observer.trigger(a.default.FRAG_PARSING_METADATA,{samples:e.samples}),e.samples=[]}},t.remuxText=function(e,t){var r=e.samples.length,n=e.inputTimeScale,i=this._initPTS;if(r){for(var o=0;o<r;o++){var s=e.samples[o];s.pts=M(s.pts-i,t*n)/n}e.samples.sort((function(e,t){return e.pts-t.pts})),this.observer.trigger(a.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e}(),N=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,n,i,o,s,l){var d=this.observer,u=\"\";e&&(u+=\"audio\"),t&&(u+=\"video\"),d.trigger(a.default.FRAG_PARSING_DATA,{data1:l,startPTS:i,startDTS:i,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),d.trigger(a.default.FRAG_PARSED)},e}(),U=Object(l.getSelfScope)();try{F=U.performance.now.bind(U.performance)}catch(e){s.logger.debug(\"Unable to use Performance API on this environment\"),F=U.Date.now}var j=function(){function e(e,t,r,a){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=a}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,r,n,o,s,l,d,u,c,p,h){var f,g,m=this;0<e.byteLength&&null!=t&&null!=t.key&&\"AES-128\"===t.method?(null==(f=this.decrypter)&&(f=this.decrypter=new i.default(this.observer,this.config)),g=F(),f.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var i=F();m.observer.trigger(a.default.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:i}}),m.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,o,s,l,d,u,c,p,h)}))):this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,o,s,l,d,u,c,p,h)},t.pushDecrypted=function(e,t,r,i,o,s,l,d,u,c,p,h){var f=this.demuxer,g=this.remuxer;if(!f||l||d){for(var m,b=this.observer,w=this.typeSupported,k=this.config,T=[{demux:x,remux:B},{demux:v.default,remux:N},{demux:y,remux:B},{demux:S,remux:B}],E=0,_=T.length;E<_&&!(m=T[E]).demux.probe(e);E++);if(!m)return void b.trigger(a.default.ERROR,{type:n.ErrorTypes.MEDIA_ERROR,details:n.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:\"no demux matching with content found\"});g&&g instanceof m.remux||(g=new m.remux(b,k,w,this.vendor)),f&&f instanceof m.demux||(f=new m.demux(b,g,k,w),this.probe=m.demux.probe),this.demuxer=f,this.remuxer=g}(l||d)&&(f.resetInitSegment(r,i,o,c),g.resetInitSegment()),l&&(f.resetTimeStamp(h),g.resetTimeStamp(h)),\"function\"==typeof f.setDecryptData&&f.setDecryptData(t),f.append(e,s,u,p)},e}();t.default=j},\"./src/demux/demuxer-worker.js\":\n/*!*************************************!*\\\n  !*** ./src/demux/demuxer-worker.js ***!\n  \\*************************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */function(e,t,r){\"use strict\";r.r(t);var a=r(/*! ../demux/demuxer-inline */\"./src/demux/demuxer-inline.js\"),n=r(/*! ../events */\"./src/events.js\"),i=r(/*! ../utils/logger */\"./src/utils/logger.js\"),o=r(/*! eventemitter3 */\"./node_modules/eventemitter3/index.js\");t.default=function(e){var t=new o.EventEmitter;function r(t,r){e.postMessage({event:t,data:r})}t.trigger=function(e){for(var r=arguments.length,a=new Array(1<r?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(a))},t.off=function(e){for(var r=arguments.length,a=new Array(1<r?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(a))},e.addEventListener(\"message\",(function(n){var o=n.data;switch(o.cmd){case\"init\":var s=JSON.parse(o.config);e.demuxer=new a.default(t,o.typeSupported,s,o.vendor),Object(i.enableLogs)(s.debug),r(\"init\",null);break;case\"demux\":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),t.on(n.default.FRAG_DECRYPTED,r),t.on(n.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(n.default.FRAG_PARSED,r),t.on(n.default.ERROR,r),t.on(n.default.FRAG_PARSING_METADATA,r),t.on(n.default.FRAG_PARSING_USERDATA,r),t.on(n.default.INIT_PTS_FOUND,r),t.on(n.default.FRAG_PARSING_DATA,(function(t,r){var a=[],n={event:t,data:r};r.data1&&(n.data1=r.data1.buffer,a.push(r.data1.buffer),delete r.data1),r.data2&&(n.data2=r.data2.buffer,a.push(r.data2.buffer),delete r.data2),e.postMessage(n,a)}))}},\"./src/demux/id3.js\":\n/*!**************************!*\\\n  !*** ./src/demux/id3.js ***!\n  \\**************************/\n/*! exports provided: default, utf8ArrayToStr */function(e,t,r){\"use strict\";r.r(t),r.d(t,\"utf8ArrayToStr\",(function(){return o}));var a,n=r(/*! ../utils/get-self-scope */\"./src/utils/get-self-scope.js\"),i=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var a=r,n=0;e.isHeader(t,r);)n+=10,n+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(n+=10),r+=n;if(0<n)return t.subarray(a,a+n)},e._readSize=function(e,t){var r=(127&e[t])<<21;return r|=(127&e[t+1])<<14,(r|=(127&e[t+2])<<7)|127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),a=0;a<r.length;a++){var n=r[a];if(e.isTimeStampFrame(n))return e._readTimeStamp(n)}},e.isTimeStampFrame=function(e){return e&&\"PRIV\"===e.key&&\"com.apple.streaming.transportStreamTimestamp\"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),a=e._readSize(t,4);return{type:r,size:a,data:t.subarray(10,10+a)}},e.getID3Frames=function(t){for(var r=0,a=[];e.isHeader(t,r);){for(var n=e._readSize(t,r+6),i=(r+=10)+n;r+8<i;){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&a.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return a},e._decodeFrame=function(t){return\"PRIV\"===t.type?e._decodePrivFrame(t):\"T\"===t.type[0]?e._decodeTextFrame(t):\"W\"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],a=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return a/=45,r&&(a+=47721858.84),Math.round(a)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),a=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:a.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if(\"TXXX\"===t.type){var r=1,a=e._utf8ArrayToStr(t.data.subarray(1),!0);r+=a.length+1;var n=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:a,data:n}}var i=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:i}}},e._decodeURLFrame=function(t){if(\"WXXX\"===t.type){if(t.size<2)return;var r=1,a=e._utf8ArrayToStr(t.data.subarray(1));r+=a.length+1;var n=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:a,data:n}}var i=e._utf8ArrayToStr(t.data);return{key:t.type,data:i}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=function(){var e=Object(n.getSelfScope)();return a||void 0===e.TextDecoder||(a=new e.TextDecoder(\"utf-8\")),a}();if(r){var i=r.decode(e);if(t){var o=i.indexOf(\"\\0\");return-1!==o?i.substring(0,o):i}return i.replace(/\\0/g,\"\")}for(var s,l,d,u=e.length,c=\"\",p=0;p<u;){if(0===(s=e[p++])&&t)return c;if(0!==s&&3!==s)switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(s);break;case 12:case 13:l=e[p++],c+=String.fromCharCode((31&s)<<6|63&l);break;case 14:l=e[p++],d=e[p++],c+=String.fromCharCode((15&s)<<12|(63&l)<<6|(63&d)<<0)}}return c},e}(),o=i._utf8ArrayToStr;t.default=i},\"./src/demux/mp4demuxer.js\":\n/*!*********************************!*\\\n  !*** ./src/demux/mp4demuxer.js ***!\n  \\*********************************/\n/*! exports provided: default */function(e,t,r){\"use strict\";r.r(t);var a=r(/*! ../utils/logger */\"./src/utils/logger.js\"),n=r(/*! ../events */\"./src/events.js\"),i=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,a,i){var o,s;t&&t.byteLength?(null==r&&(r=\"mp4a.40.5\"),null==a&&(a=\"avc1.42e01e\"),s={},(o=this.initData=e.parseInitSegment(t)).audio&&o.video?s.audiovideo={container:\"video/mp4\",codec:r+\",\"+a,initSegment:i?t:null}:(o.audio&&(s.audio={container:\"audio/mp4\",codec:r,initSegment:i?t:null}),o.video&&(s.video={container:\"video/mp4\",codec:a,initSegment:i?t:null})),this.observer.trigger(n.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})):(r&&(this.audioCodec=r),a&&(this.videoCodec=a))},e.probe=function(t){return 0<e.findBox({data:t,start:0,end:Math.min(t.length,16384)},[\"moof\"]).length},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var a,n,i,o,s,l,d=[];if(t.data?(s=t.start,i=t.end,t=t.data):(s=0,i=t.byteLength),!r.length)return null;for(a=s;a<i;)l=1<(n=e.readUint32(t,a))?a+n:i,e.bin2str(t.subarray(a+4,a+8))===r[0]&&(1===r.length?d.push({data:t,start:a+8,end:l}):(o=e.findBox({data:t,start:a+8,end:l},r.slice(1))).length&&(d=d.concat(o))),a=l;return d},e.parseSegmentIndex=function(t){var r,a=e.findBox(t,[\"moov\"])[0],n=a?a.end:null,i=0,o=e.findBox(t,[\"sidx\"]);if(!o||!o[0])return null;r=[];var s=(o=o[0]).data[0],l=e.readUint32(o,i=0===s?8:16);i+=4,i+=0===s?8:16,i+=2;var d=o.end+0,u=e.readUint16(o,i);i+=2;for(var c=0;c<u;c++){var p=i,h=e.readUint32(o,p);p+=4;var f=2147483647&h;if(1==(2147483648&h)>>>31)return void console.warn(\"SIDX has hierarchical references (not supported)\");var g=e.readUint32(o,p);p+=4,r.push({referenceSize:f,subsegmentDuration:g,info:{duration:g/l,start:d,end:d+f-1}}),d+=f,i=p+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:u,references:r,moovEndOffset:n}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,[\"moov\",\"trak\"]).forEach((function(t){var n,i,o,s,l,d,u,c,p=e.findBox(t,[\"tkhd\"])[0];p&&(n=p.data[p.start],i=e.readUint32(p,0===n?12:20),(o=e.findBox(t,[\"mdia\",\"mdhd\"])[0])&&(n=o.data[o.start],s=e.readUint32(o,0===n?12:20),!(l=e.findBox(t,[\"mdia\",\"hdlr\"])[0])||(d={soun:\"audio\",vide:\"video\"}[e.bin2str(l.data.subarray(l.start+8,l.start+12))])&&((u=e.findBox(t,[\"mdia\",\"minf\",\"stbl\",\"stsd\"])).length&&(u=u[0],c=e.bin2str(u.data.subarray(u.start+12,u.start+16)),a.logger.log(\"MP4Demuxer:\"+d+\":\"+c+\" found\")),r[i]={timescale:s,type:d},r[d]={timescale:s,id:i})))})),r},e.getStartDTS=function(t,r){var a=e.findBox(r,[\"moof\",\"traf\"]),n=[].concat.apply([],a.map((function(r){return e.findBox(r,[\"tfhd\"]).map((function(a){var n=e.readUint32(a,4),i=t[n].timescale||9e4;return e.findBox(r,[\"tfdt\"]).map((function(t){var r=t.data[t.start],a=e.readUint32(t,4);return 1===r&&(a*=Math.pow(2,32),a+=e.readUint32(t,8)),a}))[0]/i}))}))),i=Math.min.apply(null,n);return isFinite(i)?i:0},e.offsetStartDTS=function(t,r,a){e.findBox(r,[\"moof\",\"traf\"]).map((function(r){return e.findBox(r,[\"tfhd\"]).map((function(n){var o=e.readUint32(n,4),s=t[o].timescale||9e4;e.findBox(r,[\"tfdt\"]).map((function(t){var r,n,o=t.data[t.start],l=e.readUint32(t,4);0===o?e.writeUint32(t,4,l-a*s):(l*=Math.pow(2,32),l+=e.readUint32(t,8),l-=a*s,l=Math.max(l,0),r=Math.floor(l/(1+i)),n=Math.floor(l%(1+i)),e.writeUint32(t,4,r),e.writeUint32(t,8,n))}))}))}))},t.append=function(t,r,a,i){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l,d=this.initPTS;void 0===d&&(l=e.getStartDTS(o,t),this.initPTS=d=l-r,this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:d})),e.offsetStartDTS(o,t,d),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,a,i,t)},t.destroy=function(){},e}();t.default=o},\"./src/errors.ts\":\n/*!***********************!*\\\n  !*** ./src/errors.ts ***!\n  \\***********************/\n/*! exports provided: ErrorTypes, ErrorDetails */function(e,t,r){\"use strict\";var a,n,i,o;r.r(t),r.d(t,\"ErrorTypes\",(function(){return a})),r.d(t,\"ErrorDetails\",(function(){return i})),(n=a=a||{}).NETWORK_ERROR=\"networkError\",n.MEDIA_ERROR=\"mediaError\",n.KEY_SYSTEM_ERROR=\"keySystemError\",n.MUX_ERROR=\"muxError\",n.OTHER_ERROR=\"otherError\",(o=i=i||{}).KEY_SYSTEM_NO_KEYS=\"keySystemNoKeys\",o.KEY_SYSTEM_NO_ACCESS=\"keySystemNoAccess\",o.KEY_SYSTEM_NO_SESSION=\"keySystemNoSession\",o.KEY_SYSTEM_LICENSE_REQUEST_FAILED=\"keySystemLicenseRequestFailed\",o.KEY_SYSTEM_NO_INIT_DATA=\"keySystemNoInitData\",o.MANIFEST_LOAD_ERROR=\"manifestLoadError\",o.MANIFEST_LOAD_TIMEOUT=\"manifestLoadTimeOut\",o.MANIFEST_PARSING_ERROR=\"manifestParsingError\",o.MANIFEST_INCOMPATIBLE_CODECS_ERROR=\"manifestIncompatibleCodecsError\",o.LEVEL_EMPTY_ERROR=\"levelEmptyError\",o.LEVEL_LOAD_ERROR=\"levelLoadError\",o.LEVEL_LOAD_TIMEOUT=\"levelLoadTimeOut\",o.LEVEL_SWITCH_ERROR=\"levelSwitchError\",o.AUDIO_TRACK_LOAD_ERROR=\"audioTrackLoadError\",o.AUDIO_TRACK_LOAD_TIMEOUT=\"audioTrackLoadTimeOut\",o.FRAG_LOAD_ERROR=\"fragLoadError\",o.FRAG_LOAD_TIMEOUT=\"fragLoadTimeOut\",o.FRAG_DECRYPT_ERROR=\"fragDecryptError\",o.FRAG_PARSING_ERROR=\"fragParsingError\",o.REMUX_ALLOC_ERROR=\"remuxAllocError\",o.KEY_LOAD_ERROR=\"keyLoadError\",o.KEY_LOAD_TIMEOUT=\"keyLoadTimeOut\",o.BUFFER_ADD_CODEC_ERROR=\"bufferAddCodecError\",o.BUFFER_APPEND_ERROR=\"bufferAppendError\",o.BUFFER_APPENDING_ERROR=\"bufferAppendingError\",o.BUFFER_STALLED_ERROR=\"bufferStalledError\",o.BUFFER_FULL_ERROR=\"bufferFullError\",o.BUFFER_SEEK_OVER_HOLE=\"bufferSeekOverHole\",o.BUFFER_NUDGE_ON_STALL=\"bufferNudgeOnStall\",o.INTERNAL_EXCEPTION=\"internalException\"},\"./src/events.js\":\n/*!***********************!*\\\n  !*** ./src/events.js ***!\n  \\***********************/\n/*! exports provided: default */function(e,t,r){\"use strict\";r.r(t),t.default={MEDIA_ATTACHING:\"hlsMediaAttaching\",MEDIA_ATTACHED:\"hlsMediaAttached\",MEDIA_DETACHING:\"hlsMediaDetaching\",MEDIA_DETACHED:\"hlsMediaDetached\",BUFFER_RESET:\"hlsBufferReset\",BUFFER_CODECS:\"hlsBufferCodecs\",BUFFER_CREATED:\"hlsBufferCreated\",BUFFER_APPENDING:\"hlsBufferAppending\",BUFFER_APPENDED:\"hlsBufferAppended\",BUFFER_EOS:\"hlsBufferEos\",BUFFER_FLUSHING:\"hlsBufferFlushing\",BUFFER_FLUSHED:\"hlsBufferFlushed\",MANIFEST_LOADING:\"hlsManifestLoading\",MANIFEST_LOADED:\"hlsManifestLoaded\",MANIFEST_PARSED:\"hlsManifestParsed\",LEVEL_SWITCHING:\"hlsLevelSwitching\",LEVEL_SWITCHED:\"hlsLevelSwitched\",LEVEL_LOADING:\"hlsLevelLoading\",LEVEL_LOADED:\"hlsLevelLoaded\",LEVEL_UPDATED:\"hlsLevelUpdated\",LEVEL_PTS_UPDATED:\"hlsLevelPtsUpdated\",LEVELS_UPDATED:\"hlsLevelsUpdated\",AUDIO_TRACKS_UPDATED:\"hlsAudioTracksUpdated\",AUDIO_TRACK_SWITCHING:\"hlsAudioTrackSwitching\",AUDIO_TRACK_SWITCHED:\"hlsAudioTrackSwitched\",AUDIO_TRACK_LOADING:\"hlsAudioTrackLoading\",AUDIO_TRACK_LOADED:\"hlsAudioTrackLoaded\",SUBTITLE_TRACKS_UPDATED:\"hlsSubtitleTracksUpdated\",SUBTITLE_TRACK_SWITCH:\"hlsSubtitleTrackSwitch\",SUBTITLE_TRACK_LOADING:\"hlsSubtitleTrackLoading\",SUBTITLE_TRACK_LOADED:\"hlsSubtitleTrackLoaded\",SUBTITLE_FRAG_PROCESSED:\"hlsSubtitleFragProcessed\",CUES_PARSED:\"hlsCuesParsed\",NON_NATIVE_TEXT_TRACKS_FOUND:\"hlsNonNativeTextTracksFound\",INIT_PTS_FOUND:\"hlsInitPtsFound\",FRAG_LOADING:\"hlsFragLoading\",FRAG_LOAD_PROGRESS:\"hlsFragLoadProgress\",FRAG_LOAD_EMERGENCY_ABORTED:\"hlsFragLoadEmergencyAborted\",FRAG_LOADED:\"hlsFragLoaded\",FRAG_DECRYPTED:\"hlsFragDecrypted\",FRAG_PARSING_INIT_SEGMENT:\"hlsFragParsingInitSegment\",FRAG_PARSING_USERDATA:\"hlsFragParsingUserdata\",FRAG_PARSING_METADATA:\"hlsFragParsingMetadata\",FRAG_PARSING_DATA:\"hlsFragParsingData\",FRAG_PARSED:\"hlsFragParsed\",FRAG_BUFFERED:\"hlsFragBuffered\",FRAG_CHANGED:\"hlsFragChanged\",FPS_DROP:\"hlsFpsDrop\",FPS_DROP_LEVEL_CAPPING:\"hlsFpsDropLevelCapping\",ERROR:\"hlsError\",DESTROYING:\"hlsDestroying\",KEY_LOADING:\"hlsKeyLoading\",KEY_LOADED:\"hlsKeyLoaded\",STREAM_STATE_TRANSITION:\"hlsStreamStateTransition\",LIVE_BACK_BUFFER_REACHED:\"hlsLiveBackBufferReached\"}},\"./src/hls.ts\":\n/*!*********************************!*\\\n  !*** ./src/hls.ts + 50 modules ***!\n  \\*********************************/\n/*! exports provided: default */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */\n/*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */\n/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */\n/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */function(e,t,r){\"use strict\";r.r(t),r.d(t,\"default\",(function(){return nr}));var a={};r.r(a),r.d(a,\"newCue\",(function(){return pt}));var n,i,o,s,l=r(\"./node_modules/url-toolkit/src/url-toolkit.js\"),d=r(\"./src/errors.ts\"),u=r(\"./src/polyfills/number.js\"),c=r(\"./src/events.js\"),p=r(\"./src/utils/logger.js\"),h={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},f=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return\"object\"==typeof this.handledEvents&&this.handledEvents.length&&\"function\"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if(h[e])throw new Error(\"Forbidden event-name: \"+e);this.hls.on(e,this.onEvent)}),this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var r=\"on\"+e.replace(\"hls\",\"\");if(\"function\"!=typeof this[r])throw new Error(\"Event \"+e+\" has no generic handler in this \"+this.constructor.name+\" class (tried \"+r+\")\");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){p.logger.error(\"An internal error happened while handling event \"+e+'. Error message: \"'+t.message+'\". Here is a stacktrace:',t),this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.OTHER_ERROR,details:d.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();(i=n=n||{}).MANIFEST=\"manifest\",i.LEVEL=\"level\",i.AUDIO_TRACK=\"audioTrack\",i.SUBTITLE_TRACK=\"subtitleTrack\",(s=o=o||{}).MAIN=\"main\",s.AUDIO=\"audio\",s.SUBTITLE=\"subtitle\";var g=r(\"./src/demux/mp4demuxer.js\");function m(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y,v,b=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t,r;return t=e,(r=[{key:\"uri\",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(l.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&m(t.prototype,r),e}();function w(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(v=y=y||{}).AUDIO=\"audio\",v.VIDEO=\"video\";var k=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[y.AUDIO]=!1,e[y.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,r,a=e.prototype;return a.setByteRange=function(e,t){var r=e.split(\"@\",2),a=[];1===r.length?a[0]=t?t.byteRangeEndOffset:0:a[0]=parseInt(r[1]),a[1]=parseInt(r[0])+a[0],this._byteRange=a},a.addElementaryStream=function(e){this._elementaryStreams[e]=!0},a.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},a.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},a.setDecryptDataFromLevelKey=function(e,t){var r=e;return null!=e&&e.method&&e.uri&&!e.iv&&((r=new b(e.baseuri,e.reluri)).method=e.method,r.iv=this.createInitializationVector(t)),r},t=e,(r=[{key:\"url\",get:function(){return!this._url&&this.relurl&&(this._url=Object(l.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:\"byteRange\",get:function(){return this._byteRange?this._byteRange:[]}},{key:\"byteRangeStartOffset\",get:function(){return this.byteRange[0]}},{key:\"byteRangeEndOffset\",get:function(){return this.byteRange[1]}},{key:\"decryptdata\",get:function(){return this.levelkey||this._decryptdata?(!this._decryptdata&&this.levelkey&&(\"number\"!=typeof(e=this.sn)&&(this.levelkey&&\"AES-128\"===this.levelkey.method&&!this.levelkey.iv&&p.logger.warn('missing IV for initialization segment with method=\"'+this.levelkey.method+'\" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)),this._decryptdata):null;var e}},{key:\"endProgramDateTime\",get:function(){if(null===this.programDateTime)return null;if(!Object(u.isFiniteNumber)(this.programDateTime))return null;var e=Object(u.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:\"encrypted\",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&w(t.prototype,r),e}();function T(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var E=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t,r;return t=e,(r=[{key:\"hasProgramDateTime\",get:function(){return!(!this.fragments[0]||!Object(u.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&T(t.prototype,r),e}(),x=/^(\\d+)x(\\d+)$/,S=/\\s*(.+?)\\s*=((?:\\\".*?\\\")|.*?)(?:,|$)/g,_=function(){function e(t){for(var r in\"string\"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){for(var t=(1&(t=(this[e]||\"0x\").slice(2)).length?\"0\":\"\")+t,r=new Uint8Array(t.length/2),a=0;a<t.length/2;a++)r[a]=parseInt(t.slice(2*a,2*a+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=x.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(S.lastIndex=0;null!==(t=S.exec(e));){var a=t[2];0===a.indexOf('\"')&&a.lastIndexOf('\"')===a.length-1&&(a=a.slice(1,-1)),r[t[1]]=a}return r},e}(),A={audio:{a3ds:!0,\"ac-3\":!0,\"ac-4\":!0,alac:!0,alaw:!0,dra1:!0,\"dts+\":!0,\"dts-\":!0,dtsc:!0,dtse:!0,dtsh:!0,\"ec-3\":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,\"raw \":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,\"vc-1\":!0,vp08:!0,vp09:!0}};function R(e,t){return MediaSource.isTypeSupported((t||\"video\")+'/mp4;codecs=\"'+e+'\"')}var L=/(?:#EXT-X-STREAM-INF:([^\\n\\r]*)[\\r\\n]+([^\\r\\n]+)|#EXT-X-SESSION-DATA:([^\\n\\r]*)[\\r\\n]+)/g,D=/#EXT-X-MEDIA:(.*)/g,C=new RegExp([/#EXTINF:\\s*(\\d*(?:\\.\\d+)?)(?:,(.*)\\s+)?/.source,/|(?!#)([\\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(\"\"),\"g\"),O=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\\d+))|(?:#EXT-X-(TARGETDURATION): *(\\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\\r?\\n?/,I=/\\.(mp4|m4s|m4v|m4a)$/i,P=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var a=e[r];if(a.id===t)return a}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(\".\");return 2<r.length?(t=r.shift()+\".\",t+=parseInt(r.shift()).toString(16),t+=(\"000\"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return l.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var a,n,i,o,s,l=[],d={},u=!1;function c(e,t){[\"video\",\"audio\"].forEach((function(r){var a,n=e.filter((function(e){return!!(t=A[r])&&!0===t[e.slice(0,4)];var t}));n.length&&(a=n.filter((function(e){return 0===e.lastIndexOf(\"avc1\",0)||0===e.lastIndexOf(\"mp4a\",0)})),t[r+\"Codec\"]=0<a.length?a[0]:n[0],e=e.filter((function(e){return-1===n.indexOf(e)})))})),t.unknownCodecs=e}for(L.lastIndex=0;null!=(a=L.exec(t));)a[1]?(i=(n={}).attrs=new _(a[1]),n.url=e.resolve(a[2],r),(o=i.decimalResolution(\"RESOLUTION\"))&&(n.width=o.width,n.height=o.height),n.bitrate=i.decimalInteger(\"AVERAGE-BANDWIDTH\")||i.decimalInteger(\"BANDWIDTH\"),n.name=i.NAME,c([].concat((i.CODECS||\"\").split(/[ ,]+/)),n),n.videoCodec&&-1!==n.videoCodec.indexOf(\"avc1\")&&(n.videoCodec=e.convertAVC1ToAVCOTI(n.videoCodec)),l.push(n)):!a[3]||(s=new _(a[3]))[\"DATA-ID\"]&&(u=!0,d[s[\"DATA-ID\"]]=s);return{levels:l,sessionData:u?d:null}},e.parseMasterPlaylistMedia=function(t,r,a,n){var i;void 0===n&&(n=[]);var o=[],s=0;for(D.lastIndex=0;null!==(i=D.exec(t));){var l,d,u=new _(i[1]);u.TYPE===a&&(l={attrs:u,id:s++,groupId:u[\"GROUP-ID\"],instreamId:u[\"INSTREAM-ID\"],name:u.NAME||u.LANGUAGE,type:a,default:\"YES\"===u.DEFAULT,autoselect:\"YES\"===u.AUTOSELECT,forced:\"YES\"===u.FORCED,lang:u.LANGUAGE},u.URI&&(l.url=e.resolve(u.URI,r)),n.length&&(d=e.findGroup(n,l.groupId),l.audioCodec=d?d.codec:n[0].codec),o.push(l))}return o},e.parseLevelPlaylist=function(e,t,r,a,n){var i,o,s,l=0,d=0,c=new E(t),h=0,f=null,g=new k,m=null;for(C.lastIndex=0;null!==(i=C.exec(e));){var y,v=i[1];if(v){g.duration=parseFloat(v);var w=(\" \"+i[2]).slice(1);g.title=w||null,g.tagList.push(w?[\"INF\",v,w]:[\"INF\",v])}else if(i[3])Object(u.isFiniteNumber)(g.duration)&&(y=l++,g.type=a,g.start=d,s&&(g.levelkey=s),g.sn=y,g.level=r,g.cc=h,g.urlId=n,g.baseurl=t,g.relurl=(\" \"+i[3]).slice(1),function(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(u.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}(g,f),c.fragments.push(g),d+=(f=g).duration,g=new k);else if(i[4]){var T=(\" \"+i[4]).slice(1);f?g.setByteRange(T,f):g.setByteRange(T)}else if(i[5])g.rawProgramDateTime=(\" \"+i[5]).slice(1),g.tagList.push([\"PROGRAM-DATE-TIME\",g.rawProgramDateTime]),null===m&&(m=c.fragments.length);else{if(!(i=i[0].match(O))){p.logger.warn(\"No matches on slow regex match for level playlist!\");continue}for(o=1;o<i.length&&void 0===i[o];o++);var x=(\" \"+i[o+1]).slice(1),S=(\" \"+i[o+2]).slice(1);switch(i[o]){case\"#\":g.tagList.push(S?[x,S]:[x]);break;case\"PLAYLIST-TYPE\":c.type=x.toUpperCase();break;case\"MEDIA-SEQUENCE\":l=c.startSN=parseInt(x);break;case\"TARGETDURATION\":c.targetduration=parseFloat(x);break;case\"VERSION\":c.version=parseInt(x);break;case\"EXTM3U\":break;case\"ENDLIST\":c.live=!1;break;case\"DIS\":h++,g.tagList.push([\"DIS\"]);break;case\"DISCONTINUITY-SEQ\":h=parseInt(x);break;case\"KEY\":var A=new _(x),R=A.enumeratedString(\"METHOD\"),L=A.URI,D=A.hexadecimalInteger(\"IV\");if(\"com.apple.streamingkeydelivery\"===(A.KEYFORMAT||\"identity\")){p.logger.warn(\"Keyformat com.apple.streamingkeydelivery is not supported\");continue}R&&(s=new b(t,L),L&&0<=[\"AES-128\",\"SAMPLE-AES\",\"SAMPLE-AES-CENC\"].indexOf(R)&&(s.method=R,s.key=null,s.iv=D));break;case\"START\":var P=new _(x).decimalFloatingPoint(\"TIME-OFFSET\");Object(u.isFiniteNumber)(P)&&(c.startTimeOffset=P);break;case\"MAP\":var M=new _(x);g.relurl=M.URI,M.BYTERANGE&&g.setByteRange(M.BYTERANGE),g.baseurl=t,g.level=r,g.type=a,g.sn=\"initSegment\",c.initSegment=g,(g=new k).rawProgramDateTime=c.initSegment.rawProgramDateTime;break;default:p.logger.warn(\"line parsed but not handled: \"+i)}}}return(g=f)&&!g.relurl&&(c.fragments.pop(),d-=g.duration),c.totalduration=d,c.averagetargetduration=d/c.fragments.length,c.endSN=l-1,c.startCC=c.fragments[0]?c.fragments[0].cc:0,c.endCC=h,!c.initSegment&&c.fragments.length&&c.fragments.every((function(e){return I.test(e.relurl)}))&&(p.logger.warn(\"MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX\"),(g=new k).relurl=c.fragments[0].relurl,g.baseurl=t,g.level=r,g.type=a,g.sn=\"initSegment\",c.initSegment=g,c.needSidxRanges=!0),m&&function(e,t){for(var r=e[t],a=t-1;0<=a;a--){var n=e[a];n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(c.fragments,m),c},e}(),M=window.performance,F=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.MANIFEST_LOADING,c.default.LEVEL_LOADING,c.default.AUDIO_TRACK_LOADING,c.default.SUBTITLE_TRACK_LOADING)||this;return r.loaders={},r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r,a.canHaveQualityLevels=function(e){return e!==n.AUDIO_TRACK&&e!==n.SUBTITLE_TRACK},a.mapContextToLevelType=function(e){switch(e.type){case n.AUDIO_TRACK:return o.AUDIO;case n.SUBTITLE_TRACK:return o.SUBTITLE;default:return o.MAIN}},a.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf(\"data:\")||(r=t.url),r};var i=a.prototype;return i.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,a=t.loader,n=new(r||a)(t);return e.loader=n,this.loaders[e.type]=n},i.getInternalLoader=function(e){return this.loaders[e.type]},i.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},i.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},i.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},i.onManifestLoading=function(e){this.load({url:e.url,type:n.MANIFEST,level:0,id:null,responseType:\"text\"})},i.onLevelLoading=function(e){this.load({url:e.url,type:n.LEVEL,level:e.level,id:e.id,responseType:\"text\"})},i.onAudioTrackLoading=function(e){this.load({url:e.url,type:n.AUDIO_TRACK,level:null,id:e.id,responseType:\"text\"})},i.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:n.SUBTITLE_TRACK,level:null,id:e.id,responseType:\"text\"})},i.load=function(e){var t=this.hls.config;p.logger.debug(\"Loading playlist of type \"+e.type+\", level: \"+e.level+\", id: \"+e.id);var r,a,i,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url)return p.logger.trace(\"playlist request ongoing\"),!1;p.logger.warn(\"aborting previous loader for type: \"+e.type),s.abort()}switch(e.type){case n.MANIFEST:r=t.manifestLoadingMaxRetry,a=t.manifestLoadingTimeOut,i=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case n.LEVEL:i=o=r=0,a=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,a=t.levelLoadingTimeOut,i=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e);var d={timeout:a,maxRetry:r,retryDelay:i,maxRetryDelay:o},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return p.logger.debug(\"Calling internal loader delegate for URL: \"+e.url),s.load(e,d,u),!0},i.loadsuccess=function(e,t,r,a){if(void 0===a&&(a=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,a);if(this.resetInternalLoader(r.type),\"string\"!=typeof e.data)throw new Error('expected responseType of \"text\" for PlaylistLoader');var n=e.data;t.tload=M.now(),0===n.indexOf(\"#EXTM3U\")?0<n.indexOf(\"#EXTINF:\")||0<n.indexOf(\"#EXT-X-TARGETDURATION:\")?this._handleTrackOrLevelPlaylist(e,t,r,a):this._handleMasterPlaylist(e,t,r,a):this._handleManifestParsingError(e,r,\"no EXTM3U delimiter\",a)},i.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},i.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},i._handleMasterPlaylist=function(e,t,r,n){var i,o,s,l,d,u=this.hls,h=e.data,f=a.getResponseUrl(e,r),g=P.parseMasterPlaylist(h,f),m=g.levels,y=g.sessionData;m.length?(i=m.map((function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}})),o=P.parseMasterPlaylistMedia(h,f,\"AUDIO\",i),s=P.parseMasterPlaylistMedia(h,f,\"SUBTITLES\"),l=P.parseMasterPlaylistMedia(h,f,\"CLOSED-CAPTIONS\"),o.length&&(d=!1,o.forEach((function(e){e.url||(d=!0)})),!1===d&&m[0].audioCodec&&!m[0].attrs.AUDIO&&(p.logger.log(\"audio codec signaled in quality level, but no embedded audio track signaled, create one\"),o.unshift({type:\"main\",name:\"main\",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:\"\"}))),u.trigger(c.default.MANIFEST_LOADED,{levels:m,audioTracks:o,subtitles:s,captions:l,url:f,stats:t,networkDetails:n,sessionData:y})):this._handleManifestParsingError(e,r,\"no level found in manifest\",n)},i._handleTrackOrLevelPlaylist=function(e,t,r,i){var o,s,l=this.hls,p=r.id,h=r.level,f=r.type,g=a.getResponseUrl(e,r),m=Object(u.isFiniteNumber)(p)?p:0,y=Object(u.isFiniteNumber)(h)?h:m,v=a.mapContextToLevelType(r),b=P.parseLevelPlaylist(e.data,g,y,v,m);b.tload=t.tload,b.fragments.length?(f===n.MANIFEST&&(o={url:g,details:b},l.trigger(c.default.MANIFEST_LOADED,{levels:[o],audioTracks:[],url:g,stats:t,networkDetails:i,sessionData:null})),t.tparsed=M.now(),b.needSidxRanges?(s=b.initSegment.url,this.load({url:s,isSidxRequest:!0,type:f,level:h,levelDetails:b,id:p,rangeStart:0,rangeEnd:2048,responseType:\"arraybuffer\"})):(r.levelDetails=b,this._handlePlaylistLoaded(e,t,r,i))):l.trigger(c.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:g,reason:\"no fragments found in level\",level:\"number\"==typeof r.level?r.level:void 0})},i._handleSidxRequest=function(e,t){if(\"string\"==typeof e.data)throw new Error(\"sidx request must be made with responseType of array buffer\");var r,a,n=g.default.parseSegmentIndex(new Uint8Array(e.data));n&&(r=n.references,a=t.levelDetails,r.forEach((function(e,t){var r,n=e.info;!a||0===(r=a.fragments[t]).byteRange.length&&r.setByteRange(String(1+n.end-n.start)+\"@\"+String(n.start))})),a&&a.initSegment.setByteRange(String(n.moovEndOffset)+\"@0\"))},i._handleManifestParsingError=function(e,t,r,a){this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:a})},i._handleNetworkError=function(e,t,r,a){var i,o;void 0===r&&(r=!1),void 0===a&&(a=null),p.logger.info(\"A network error occured while loading a \"+e.type+\"-type playlist\");var s=this.getInternalLoader(e);switch(e.type){case n.MANIFEST:i=r?d.ErrorDetails.MANIFEST_LOAD_TIMEOUT:d.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case n.LEVEL:i=r?d.ErrorDetails.LEVEL_LOAD_TIMEOUT:d.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case n.AUDIO_TRACK:i=r?d.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:d.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}s&&(s.abort(),this.resetInternalLoader(e.type));var l={type:d.ErrorTypes.NETWORK_ERROR,details:i,fatal:o,url:e.url,loader:s,context:e,networkDetails:t};a&&(l.response=a),this.hls.trigger(c.default.ERROR,l)},i._handlePlaylistLoaded=function(e,t,r,i){var o=r.type,s=r.level,l=r.id,d=r.levelDetails;if(d&&d.targetduration)if(a.canHaveQualityLevels(r.type))this.hls.trigger(c.default.LEVEL_LOADED,{details:d,level:s||0,id:l||0,stats:t,networkDetails:i});else switch(o){case n.AUDIO_TRACK:this.hls.trigger(c.default.AUDIO_TRACK_LOADED,{details:d,id:l,stats:t,networkDetails:i});break;case n.SUBTITLE_TRACK:this.hls.trigger(c.default.SUBTITLE_TRACK_LOADED,{details:d,id:l,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,\"invalid target duration\",i)},a}(f),B=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.FRAG_LOADING)||this;return r.loaders={},r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.destroy=function(){var t=this.loaders;for(var r in t){var a=t[r];a&&a.destroy()}this.loaders={},e.prototype.destroy.call(this)},n.onFragLoading=function(e){var t=e.frag,r=t.type,a=this.loaders,n=this.hls.config,i=n.fLoader,o=n.loader;t.loaded=0;var s,l,d,c=a[r];c&&(p.logger.warn(\"abort previous fragment loader for type: \"+r),c.abort()),c=a[r]=t.loader=new(n.fLoader?i:o)(n),s={url:t.url,frag:t,responseType:\"arraybuffer\",progressData:!1};var h=t.byteRangeStartOffset,f=t.byteRangeEndOffset;Object(u.isFiniteNumber)(h)&&Object(u.isFiniteNumber)(f)&&(s.rangeStart=h,s.rangeEnd=f),l={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},c.load(s,l,d)},n.loadsuccess=function(e,t,r,a){void 0===a&&(a=null);var n=e.data,i=r.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(c.default.FRAG_LOADED,{payload:n,frag:i,stats:t,networkDetails:a})},n.loaderror=function(e,t,r){void 0===r&&(r=null);var a=t.frag,n=a.loader;n&&n.abort(),this.loaders[a.type]=void 0,this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},n.loadtimeout=function(e,t,r){void 0===r&&(r=null);var a=t.frag,n=a.loader;n&&n.abort(),this.loaders[a.type]=void 0,this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},n.loadprogress=function(e,t,r,a){void 0===a&&(a=null);var n=t.frag;n.loaded=e.loaded,this.hls.trigger(c.default.FRAG_LOAD_PROGRESS,{frag:n,stats:e,networkDetails:a})},a}(f),N=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.KEY_LOADING)||this;return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},n.onKeyLoading=function(e){var t=e.frag,r=t.type,a=this.loaders[r];if(t.decryptdata){var n=t.decryptdata.uri;if(n!==this.decrypturl||null===this.decryptkey){var i=this.hls.config;if(a&&(p.logger.warn(\"abort previous key loader for type:\"+r),a.abort()),!n)return void p.logger.warn(\"key uri is falsy\");t.loader=this.loaders[r]=new i.loader(i),this.decrypturl=n,this.decryptkey=null;var o={url:n,frag:t,responseType:\"arraybuffer\"},s={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:i.fragLoadingRetryDelay,maxRetryDelay:i.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(c.default.KEY_LOADED,{frag:t}))}else p.logger.warn(\"Missing decryption data on fragment in onKeyLoading\")},n.loadsuccess=function(e,t,r){var a=r.frag;a.decryptdata?(this.decryptkey=a.decryptdata.key=new Uint8Array(e.data),a.loader=void 0,delete this.loaders[a.type],this.hls.trigger(c.default.KEY_LOADED,{frag:a})):p.logger.error(\"after key load, decryptdata unset\")},n.loaderror=function(e,t){var r=t.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},n.loadtimeout=function(e,t){var r=t.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.NETWORK_ERROR,details:d.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},a}(f),U=\"NOT_LOADED\",j=\"APPENDING\",Y=\"PARTIAL\",G=\"OK\",q=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.BUFFER_APPENDED,c.default.FRAG_BUFFERED,c.default.FRAG_LOADED)||this;return r.bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,f.prototype.destroy.call(this),e.prototype.destroy.call(this)},n.getBufferedFrag=function(e,t){var r=this.fragments,a=Object.keys(r).filter((function(a){var n=r[a];if(n.body.type!==t)return!1;if(!n.buffered)return!1;var i=n.body;return i.startPTS<=e&&e<=i.endPTS}));if(0===a.length)return null;var n=a.pop();return r[n].body},n.detectEvictedFragments=function(e,t){var r=this;Object.keys(this.fragments).forEach((function(a){var n=r.fragments[a];if(n&&n.buffered){var i=n.range[e];if(i)for(var o=i.time,s=0;s<o.length;s++){var l=o[s];if(!r.isTimeBuffered(l.startPTS,l.endPTS,t)){r.removeFragment(n.body);break}}}}))},n.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),a=this.fragments[r];a&&(a.buffered=!0,Object.keys(this.timeRanges).forEach((function(r){var n;e.hasElementaryStream(r)&&(n=t.timeRanges[r],a.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,n))})))},n.getBufferedTimes=function(e,t,r){for(var a,n,i=[],o=!1,s=0;s<r.length;s++){if(a=r.start(s)-this.bufferPadding,n=r.end(s)+this.bufferPadding,a<=e&&t<=n){i.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<n&&a<t)i.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=a)break}return{time:i,partial:o}},n.getFragmentKey=function(e){return e.type+\"_\"+e.level+\"_\"+e.urlId+\"_\"+e.sn},n.getPartialFragment=function(e){var t,r,a,n=this,i=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=n.fragments[s];n.isPartial(l)&&(r=l.body.startPTS-n.bufferPadding,a=l.body.endPTS+n.bufferPadding,r<=e&&e<=a&&(t=Math.min(e-r,a-e),o<=t&&(i=l.body,o=t)))})),i},n.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],a=U;return void 0!==r&&(a=r.buffered?!0===this.isPartial(r)?Y:G:j),a},n.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},n.isTimeBuffered=function(e,t,r){for(var a,n,i=0;i<r.length;i++){if(a=r.start(i)-this.bufferPadding,n=r.end(i)+this.bufferPadding,a<=e&&t<=n)return!0;if(t<=a)return!1}return!1},n.onFragLoaded=function(e){var t=e.frag;Object(u.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach((function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)}))},n.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},n.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},n.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},n.removeAllFragments=function(){this.fragments=Object.create(null)},a}(f),z=function(e,t){for(var r,a,n=0,i=e.length-1;n<=i;){var o=t(a=e[r=(n+i)/2|0]);if(0<o)n=1+r;else{if(!(o<0))return a;i=r-1}}return null},H=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,a=0;a<r.length;a++)if(t>=r.start(a)&&t<=r.end(a))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){for(var a=e.buffered,n=[],i=0;i<a.length;i++)n.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(n,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort((function(e,t){return e.start-t.start||t.end-e.end}));var a=[];if(r)for(var n=0;n<e.length;n++){var i,o=a.length;o?(i=a[o-1].end,e[n].start-i<r?e[n].end>i&&(a[o-1].end=e[n].end):a.push(e[n])):a.push(e[n])}else a=e;for(var s,l=0,d=t,u=t,c=0;c<a.length;c++){var p=a[c].start,h=a[c].end;if(p<=t+r&&t<h)d=p,l=(u=h)-t;else if(t+r<p){s=p;break}}return{len:l,start:d,end:u,nextStart:s}},e}(),K=r(\"./node_modules/eventemitter3/index.js\"),V=r(\"./node_modules/webworkify-webpack/index.js\"),W=r(\"./src/demux/demuxer-inline.js\");function X(){return window.MediaSource||window.WebKitMediaSource}var $=r(\"./src/utils/get-self-scope.js\"),Q=function(e){var t,r;function a(){return e.apply(this,arguments)||this}return r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r,a.prototype.trigger=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];this.emit.apply(this,[e,e].concat(r))},a}(K.EventEmitter),J=Object($.getSelfScope)(),Z=X()||{isTypeSupported:function(){return!1}},ee=function(){function e(e,t){var r=this;function a(t,a){(a=a||{}).frag=r.frag,a.id=r.id,e.trigger(t,a)}this.hls=e,this.id=t;var n=this.observer=new Q,i=e.config;n.on(c.default.FRAG_DECRYPTED,a),n.on(c.default.FRAG_PARSING_INIT_SEGMENT,a),n.on(c.default.FRAG_PARSING_DATA,a),n.on(c.default.FRAG_PARSED,a),n.on(c.default.ERROR,a),n.on(c.default.FRAG_PARSING_METADATA,a),n.on(c.default.FRAG_PARSING_USERDATA,a),n.on(c.default.INIT_PTS_FOUND,a);var o,s={mp4:Z.isTypeSupported(\"video/mp4\"),mpeg:Z.isTypeSupported(\"audio/mpeg\"),mp3:Z.isTypeSupported('audio/mp4; codecs=\"mp3\"')},l=navigator.vendor;if(i.enableWorker&&\"undefined\"!=typeof Worker){p.logger.log(\"demuxing in webworker\");try{o=this.w=V(/*! ../demux/demuxer-worker.js */\"./src/demux/demuxer-worker.js\"),this.onwmsg=this.onWorkerMessage.bind(this),o.addEventListener(\"message\",this.onwmsg),o.onerror=function(t){e.trigger(c.default.ERROR,{type:d.ErrorTypes.OTHER_ERROR,details:d.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:\"demuxerWorker\",err:{message:t.message+\" (\"+t.filename+\":\"+t.lineno+\")\"}})},o.postMessage({cmd:\"init\",typeSupported:s,vendor:l,id:t,config:JSON.stringify(i)})}catch(t){p.logger.warn(\"Error in worker:\",t),p.logger.error(\"Error while initializing DemuxerWorker, fallback on DemuxerInline\"),o&&J.URL.revokeObjectURL(o.objectURL),this.demuxer=new W.default(n,s,i,l),this.w=void 0}}else this.demuxer=new W.default(n,s,i,l)}var t=e.prototype;return t.destroy=function(){var e,t=this.w;t?(t.removeEventListener(\"message\",this.onwmsg),t.terminate(),this.w=null):(e=this.demuxer)&&(e.destroy(),this.demuxer=null);var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,a,n,i,o,s){var l,d=this.w,c=Object(u.isFiniteNumber)(n.startPTS)?n.startPTS:n.start,h=n.decryptdata,f=this.frag,g=!(f&&n.cc===f.cc),m=!(f&&n.level===f.level),y=f&&n.sn===f.sn+1,v=!m&&y;g&&p.logger.log(this.id+\":discontinuity detected\"),m&&p.logger.log(this.id+\":switch detected\"),this.frag=n,d?d.postMessage({cmd:\"demux\",data:e,decryptdata:h,initSegment:t,audioCodec:r,videoCodec:a,timeOffset:c,discontinuity:g,trackSwitch:m,contiguous:v,duration:i,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]):(l=this.demuxer)&&l.push(e,h,t,r,a,c,g,m,v,i,o,s)},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case\"init\":J.URL.revokeObjectURL(this.w.objectURL);break;case c.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}();function te(e,t,r){switch(t){case\"audio\":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case\"text\":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function re(e,t,r){var a,n=e[t],i=e[r],o=i.startPTS;Object(u.isFiniteNumber)(o)?t<r?(n.duration=o-n.start,n.duration<0&&p.logger.warn(\"negative duration computed for frag \"+n.sn+\",level \"+n.level+\", there should be some duration drift between playlist and fragment!\")):(i.duration=n.start-o,i.duration<0&&p.logger.warn(\"negative duration computed for frag \"+i.sn+\",level \"+i.level+\", there should be some duration drift between playlist and fragment!\")):t<r?(a=n.cc===i.cc,i.start=n.start+(a&&n.minEndPTS?n.minEndPTS-n.start:n.duration)):i.start=Math.max(n.start-i.duration,0)}function ae(e,t,r,a,n,i){var o,s=r,l=a;Object(u.isFiniteNumber)(t.startPTS)&&(o=Math.abs(t.startPTS-r),Object(u.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(o,t.deltaPTS):t.deltaPTS=o,s=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),l=Math.min(a,t.endPTS),a=Math.max(a,t.endPTS),n=Math.min(n,t.startDTS),i=Math.max(i,t.endDTS));var d=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=s,t.endPTS=a,t.minEndPTS=l,t.startDTS=n,t.endDTS=i,t.duration=a-r;var c,p,h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;for(c=f-e.startSN,(p=e.fragments)[c]=t,h=c;0<h;h--)re(p,h,h-1);for(h=c;h<p.length-1;h++)re(p,h,h+1);return e.PTSKnown=!0,d}function ne(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var r,a=0;if(ie(e,t,(function(e,n){a=e.cc-n.cc,Object(u.isFiniteNumber)(e.startPTS)&&(n.start=n.startPTS=e.startPTS,n.endPTS=e.endPTS,n.duration=e.duration,n.backtracked=e.backtracked,n.dropped=e.dropped,r=n),t.PTSKnown=!0})),t.PTSKnown){if(a){p.logger.log(\"discontinuity sliding from playlist, take drift into account\");for(var n=t.fragments,i=0;i<n.length;i++)n[i].cc+=a}r?ae(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):function(e,t){var r=t.startSN-e.startSN,a=e.fragments,n=t.fragments;if(!(r<0||r>a.length))for(var i=0;i<n.length;i++)n[i].start+=a[r].start}(e,t),t.PTSKnown=e.PTSKnown}}function ie(e,t,r){if(e&&t)for(var a=Math.max(e.startSN,t.startSN)-t.startSN,n=Math.min(e.endSN,t.endSN)-t.startSN,i=t.startSN-e.startSN,o=a;o<=n;o++){var s=e.fragments[i+o],l=t.fragments[o];if(!s||!l)break;r(s,l,o)}}function oe(e,t,r){var a=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),n=a/2;return e&&t.endSN===e.endSN&&(a=n),r&&(a=Math.max(n,a-(window.performance.now()-r))),Math.round(a)}var se=function(e){for(var t=\"\",r=e.length,a=0;a<r;a++)t+=\"[\"+e.start(a).toFixed(3)+\",\"+e.end(a).toFixed(3)+\"]\";return t};function le(e,t){t.fragments.forEach((function(t){var r;t&&(r=t.start+e,t.start=t.startPTS=r,t.endPTS=r+t.duration)})),t.PTSKnown=!0}function de(e,t,r){!function(e,t,r){var a;!function(e,t,r){var a=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(a=!0),a}(e,r,t)||(a=function(e,t){var r=e.fragments,a=t.fragments;if(a.length&&r.length){var n=function(e,t){for(var r=null,a=0;a<e.length;a+=1){var n=e[a];if(n&&n.cc===t){r=n;break}}return r}(r,a[0].cc);if(n&&(!n||n.startPTS))return n;p.logger.log(\"No frag in previous level to align on\")}else p.logger.log(\"No fragments to align\")}(r.details,t))&&(p.logger.log(\"Adjusting PTS using last level due to CC increase within current level\"),le(a.start,t))}(e,r,t),!r.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,a=(e.fragments[0].programDateTime-r)/1e3+t.fragments[0].start;Object(u.isFiniteNumber)(a)&&(p.logger.log(\"adjusting PTS using programDateTime delta, sliding:\"+a.toFixed(3)),le(a,e))}}(r,t.details)}function ue(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(u.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if((e[e.length-1].endProgramDateTime||0)<=t)return null;r=r||0;for(var a,n,i,o,s=0;s<e.length;++s){var l=e[s];if(a=t,n=r,i=l,void 0,o=1e3*Math.min(n,i.duration+(i.deltaPTS?i.deltaPTS:0)),(i.endProgramDateTime||0)-o>a)return l}return null}function ce(e,t,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var n=null;return e?n=t[e.sn-t[0].sn+1]:0===r&&0===t[0].start&&(n=t[0]),n&&0===pe(r,a,n)?n:z(t,pe.bind(null,r,a))||n}function pe(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var a=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-a<=e?1:r.start-a>e&&r.start?-1:0}var he=function(){function e(e,t,r,a){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=a,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t,r=this.config,a=this.media,n=this.stalled,i=a.currentTime,o=a.seeking,s=this.seeking&&!o,l=!this.seeking&&o;if(this.seeking=o,i!==e)return this.moved=!0,void(null!==n&&(this.stallReported&&(t=self.performance.now()-n,p.logger.warn(\"playback not stuck anymore @\"+i+\", after \"+Math.round(t)+\"ms\"),this.stallReported=!1),this.stalled=null,this.nudgeRetry=0));if((l||s)&&(this.stalled=null),!a.paused&&!a.ended&&0!==a.playbackRate&&a.buffered.length){var d=H.bufferInfo(a,i,0),u=0<d.len,c=d.nextStart||0;if(u||c){if(o){var h=2<d.len,f=!c||2<c-i&&!this.fragmentTracker.getPartialFragment(i);if(h||f)return;this.moved=!1}if(!this.moved&&this.stalled){var g=Math.max(c,d.start||0)-i;if(0<g&&g<=2)return void this._trySkipBufferHole(null)}var m,y,v=self.performance.now();null!==n?(m=v-n,!o&&250<=m&&this._reportStall(d.len),y=H.bufferInfo(a,i,r.maxBufferHole),this._tryFixBufferStall(y,m)):this.stalled=v}}},t._tryFixBufferStall=function(e,t){var r=this.config,a=this.fragmentTracker,n=this.media.currentTime,i=a.getPartialFragment(n);i&&this._trySkipBufferHole(i)||e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(p.logger.warn(\"Trying to nudge playhead over buffer-hole\"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,p.logger.warn(\"Playback stalling at @\"+r.currentTime+\" due to low buffer (buffer=\"+e+\")\"),t.trigger(c.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,a=this.media,n=a.currentTime,i=0,o=0;o<a.buffered.length;o++){var s=a.buffered.start(o);if(n+t.maxBufferHole>=i&&n<s){var l=Math.max(s+.05,a.currentTime+.1);return p.logger.warn(\"skipping hole, adjusting currentTime from \"+n+\" to \"+l),this.moved=!0,this.stalled=null,a.currentTime=l,e&&r.trigger(c.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:\"fragment loaded with buffer holes, seeking from \"+n+\" to \"+l,frag:e}),l}i=a.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e,t=this.config,r=this.hls,a=this.media,n=a.currentTime,i=(this.nudgeRetry||0)+1;(this.nudgeRetry=i)<t.nudgeMaxRetry?(e=n+i*t.nudgeOffset,p.logger.warn(\"Nudging 'currentTime' from \"+n+\" to \"+e),a.currentTime=e,r.trigger(c.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})):(p.logger.error(\"Playhead still not moving while enough data buffered @\"+n+\" after \"+t.nudgeMaxRetry+\" nudges\"),r.trigger(c.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0}))},e}(),fe=function(e){var t,r;function a(t){for(var r,a=arguments.length,n=new Array(1<a?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return(r=e.call.apply(e,[this,t].concat(n))||this)._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(r)),r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this._tickInterval},n.hasNextTick=function(){return!!this._tickTimer},n.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},n.clearInterval=function(){return!(!this._tickInterval||(self.clearInterval(this._tickInterval),this._tickInterval=null))},n.clearNextTick=function(){return!(!this._tickTimer||(self.clearTimeout(this._tickTimer),this._tickTimer=null))},n.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},n.doTick=function(){},a}(f),ge=\"STOPPED\",me=\"STARTING\",ye=\"IDLE\",ve=\"KEY_LOADING\",be=\"FRAG_LOADING\",we=\"FRAG_LOADING_WAITING_RETRY\",ke=\"WAITING_TRACK\",Te=\"PARSING\",Ee=\"PARSED\",xe=\"BUFFER_FLUSHING\",Se=\"ENDED\",_e=\"ERROR\",Ae=\"WAITING_INIT_PTS\",Re=\"WAITING_LEVEL\",Le=function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ge},n._streamEnded=function(e,t){var r=this.fragCurrent,a=this.fragmentTracker;if(t.live||!r||r.backtracked||r.sn!==t.endSN||e.nextStart)return!1;var n=a.getState(r);return n===Y||n===G},n.onMediaSeeking=function(){var e,t,r,a,n=this.config,i=this.media,o=this.mediaBuffer,s=this.state,l=i?i.currentTime:null,d=H.bufferInfo(o||i,l,this.config.maxBufferHole);p.logger.log(\"media seeking to \"+(Object(u.isFiniteNumber)(l)?l.toFixed(3):l)),s===be?(e=this.fragCurrent,0===d.len&&e&&(t=n.maxFragLookUpTolerance,r=e.start-t,a=e.start+e.duration+t,l<r||a<l?(e.loader&&(p.logger.log(\"seeking outside of buffer while fragment load in progress, cancel fragment load\"),e.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ye):p.logger.log(\"seeking outside of buffer but within currently loaded fragment range\"))):s===Se&&(0===d.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=ye),i&&(this.lastCurrentTime=l),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=l),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=ge,this.fragmentTracker=null},n.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},a}(fe);function De(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ce,Oe=function(e){var t,r;function a(t,r){var a=e.call(this,t,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.MANIFEST_LOADING,c.default.MANIFEST_PARSED,c.default.LEVEL_LOADED,c.default.LEVELS_UPDATED,c.default.KEY_LOADED,c.default.FRAG_LOADED,c.default.FRAG_LOAD_EMERGENCY_ABORTED,c.default.FRAG_PARSING_INIT_SEGMENT,c.default.FRAG_PARSING_DATA,c.default.FRAG_PARSED,c.default.ERROR,c.default.AUDIO_TRACK_SWITCHING,c.default.AUDIO_TRACK_SWITCHED,c.default.BUFFER_CREATED,c.default.BUFFER_APPENDED,c.default.BUFFER_FLUSHED)||this;return a.fragmentTracker=r,a.config=t.config,a.audioCodecSwap=!1,a._state=ge,a.stallReported=!1,a.gapController=null,a.altAudio=!1,a.audioOnly=!1,a.bitrateTest=!1,a}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n,i,s=a.prototype;return s.startLoad=function(e){var t,r,a;this.levels?(t=this.lastCurrentTime,r=this.hls,this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(a=r.startLevel)&&(r.config.testBandwidth?(a=0,this.bitrateTest=!0):a=r.nextAutoLevel),this.level=r.nextLoadLevel=a,this.loadedmetadata=!1),0<t&&-1===e&&(p.logger.log(\"override startPosition with lastCurrentTime @\"+t.toFixed(3)),e=t),this.state=ye,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()):(this.forceStartLoad=!0,this.state=ge)},s.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},s.doTick=function(){switch(this.state){case xe:this.fragLoadError=0;break;case ye:this._doTickIdle();break;case Re:var e=this.levels[this.level];e&&e.details&&(this.state=ye);break;case we:var t=window.performance.now(),r=this.retryDate;(!r||r<=t||this.media&&this.media.seeking)&&(p.logger.log(\"mediaController: retryDate reached, switch back to IDLE state\"),this.state=ye)}this._checkBuffer(),this._checkFragmentChanged()},s._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch))if(this.altAudio&&this.audioOnly)this.demuxer.frag=null;else{var a=this.loadedmetadata?r.currentTime:this.nextLoadPosition,n=e.nextLoadLevel,i=this.levels[n];if(i){var o=i.bitrate,s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength;s=Math.min(s,t.maxMaxBufferLength);var l=a<t.maxBufferHole?Math.max(2,t.maxBufferHole):t.maxBufferHole,d=H.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,a,l),u=d.len;if(!(s<=u)){p.logger.trace(\"buffer length of \"+u.toFixed(3)+\" is below max of \"+s.toFixed(3)+\". checking for more payload ...\"),this.level=e.nextLoadLevel=n;var h=i.details;if(!h||h.live&&this.levelLastLoaded!==n)this.state=Re;else{if(this._streamEnded(d,h)){var f={};return this.altAudio&&(f.type=\"video\"),this.hls.trigger(c.default.BUFFER_EOS,f),void(this.state=Se)}this._fetchPayloadOrEos(a,d,h)}}}}},s._fetchPayloadOrEos=function(e,t,r){var a=this.fragPrevious,n=(this.level,r.fragments),i=n.length;if(0!==i){var o,s=n[0].start,l=n[i-1].start+n[i-1].duration,d=t.end;if(r.initSegment&&!r.initSegment.data)o=r.initSegment;else if(r.live){var u=this.config.initialLiveManifestSize;if(i<u)return void p.logger.warn(\"Can not start playback of a level, reason: not enough fragments \"+i+\" < \"+u);if(null===(o=this._ensureFragmentAtLivePoint(r,d,s,l,a,n)))return}else d<s&&(o=n[0]);(o=o||this._findFragment(s,a,i,n,d,l,r))&&(o.encrypted?this._loadKey(o,r):this._loadFragment(o,r,e,d))}},s._ensureFragmentAtLivePoint=function(e,t,r,a,n,i){var o,s,l,d,c=this.hls.config,h=this.media,f=1/0;return void 0!==c.liveMaxLatencyDuration?f=c.liveMaxLatencyDuration:Object(u.isFiniteNumber)(c.liveMaxLatencyDurationCount)&&(f=c.liveMaxLatencyDurationCount*e.targetduration),t<Math.max(r-c.maxFragLookUpTolerance,a-f)&&(t=s=this.liveSyncPosition=this.computeLivePosition(r,e),h&&!h.paused&&h.readyState&&h.duration>s&&s>h.currentTime&&(p.logger.log(\"buffer end: \"+t.toFixed(3)+\" is located too far from the end of live sliding playlist, reset currentTime to : \"+s.toFixed(3)),h.currentTime=s),this.nextLoadPosition=s),e.PTSKnown&&a<t&&h&&h.readyState?null:(this.startFragRequested&&!e.PTSKnown&&n&&(e.hasProgramDateTime?(p.logger.log(\"live playlist, switching playlist, load frag with same PDT: \"+n.programDateTime),o=ue(i,n.endProgramDateTime,c.maxFragLookUpTolerance)):((l=n.sn+1)>=e.startSN&&l<=e.endSN&&(d=i[l-e.startSN],n.cc===d.cc&&(o=d,p.logger.log(\"live playlist, switching playlist, load frag with next SN: \"+o.sn))),o||(o=z(i,(function(e){return n.cc-e.cc})))&&p.logger.log(\"live playlist, switching playlist, load frag with same CC: \"+o.sn))),o)},s._findFragment=function(e,t,r,a,n,i,o){var s,l,d,u,c,h,f=this.hls.config;return(s=n<i?ce(t,a,n,n>i-f.maxFragLookUpTolerance?0:f.maxFragLookUpTolerance):a[r-1])&&(l=s.sn-o.startSN,d=t&&s.level===t.level,u=a[l-1],c=a[1+l],t&&s.sn===t.sn&&(d&&!s.backtracked?s.sn<o.endSN?(h=t.deltaPTS)&&h>f.maxBufferHole&&t.dropped&&l?(s=u,p.logger.warn(\"Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this\")):(s=c,this.fragmentTracker.getState(s)!==G&&p.logger.log(\"Re-loading fragment with SN: \"+s.sn)):s=null:s.backtracked&&(c&&c.backtracked?(p.logger.warn(\"Already backtracked from fragment \"+c.sn+\", will not backtrack to fragment \"+s.sn+\". Loading fragment \"+c.sn),s=c):(p.logger.warn(\"Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe\"),s.dropped=0,u?(s=u).backtracked=!0:l&&(s=null))))),s},s._loadKey=function(e,t){p.logger.log(\"Loading key for \"+e.sn+\" of [\"+t.startSN+\"-\"+t.endSN+\"], level \"+this.level),this.state=ve,this.hls.trigger(c.default.KEY_LOADING,{frag:e})},s._loadFragment=function(e,t,r,a){var n=this.fragmentTracker.getState(e);\"initSegment\"!==(this.fragCurrent=e).sn&&(this.startFragRequested=!0),Object(u.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||n===U||n===Y?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,p.logger.log(\"Loading \"+e.sn+\" of [\"+t.startSN+\"-\"+t.endSN+\"], level \"+this.level+\", \"+(this.loadedmetadata?\"currentTime\":\"nextLoadPosition\")+\": \"+parseFloat(r.toFixed(3))+\", bufferEnd: \"+parseFloat(a.toFixed(3))),this.hls.trigger(c.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new ee(this.hls,\"main\")),this.state=be):n===j&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},s.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,o.MAIN)},s.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},s._checkFragmentChanged=function(){var e,t,r,a,n=this.media;n&&n.readyState&&!1===n.seeking&&((a=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=a),H.isBuffered(n,a)?e=this.getBufferedFrag(a):H.isBuffered(n,a+.1)&&(e=this.getBufferedFrag(a+.1)),!e||(t=e)!==this.fragPlaying&&(this.hls.trigger(c.default.FRAG_CHANGED,{frag:t}),r=t.level,this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(c.default.LEVEL_SWITCHED,{level:r}),this.fragPlaying=t))},s.immediateLevelSwitch=function(){var e,t;p.logger.log(\"immediateLevelSwitch\"),this.immediateSwitch||(this.immediateSwitch=!0,(e=this.media)?(t=e.paused)||e.pause():t=!0,this.previouslyPaused=t);var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},s.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,0<e.currentTime&&H.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},s.nextLevelSwitch=function(){var e,t,r,a,n,i,o,s,l,d=this.media;d&&d.readyState&&((e=this.getBufferedFrag(d.currentTime))&&1<e.startPTS&&this.flushMainBuffer(0,e.startPTS-1),n=d.paused?0:(t=this.hls.nextLoadLevel,r=this.levels[t],(a=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*r.bitrate/(1e3*a)+1:0),!(i=this.getBufferedFrag(d.currentTime+n))||(o=this.followingBufferedFrag(i))&&((s=this.fragCurrent)&&s.loader&&s.loader.abort(),this.fragCurrent=null,l=Math.max(i.endPTS,o.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,o.duration)),this.flushMainBuffer(l,Number.POSITIVE_INFINITY)))},s.flushMainBuffer=function(e,t){this.state=xe;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type=\"video\"),this.hls.trigger(c.default.BUFFER_FLUSHING,r)},s.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener(\"seeking\",this.onvseeking),t.addEventListener(\"seeked\",this.onvseeked),t.addEventListener(\"ended\",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new he(r,t,this.fragmentTracker,this.hls)},s.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(p.logger.log(\"MSE detaching and video ended, reset startPosition\"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.backtracked=void 0}))})),e&&(e.removeEventListener(\"seeking\",this.onvseeking),e.removeEventListener(\"seeked\",this.onvseeked),e.removeEventListener(\"ended\",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},s.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(u.isFiniteNumber)(t)&&p.logger.log(\"media seeked to \"+t.toFixed(3)),this.tick()},s.onManifestLoading=function(){p.logger.log(\"trigger BUFFER_RESET\"),this.hls.trigger(c.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},s.onManifestParsed=function(e){var t,r=!1,a=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf(\"mp4a.40.2\")&&(r=!0),-1!==t.indexOf(\"mp4a.40.5\")&&(a=!0))})),this.audioCodecSwitch=r&&a,this.audioCodecSwitch&&p.logger.log(\"both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC\"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var n=this.config;(n.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(n.startPosition)},s.onLevelLoaded=function(e){var t,r,a=e.details,n=e.level,i=this.levels[this.levelLastLoaded],o=this.levels[n],s=a.totalduration,l=0;p.logger.log(\"level \"+n+\" loaded [\"+a.startSN+\",\"+a.endSN+\"],duration:\"+s),a.live?(t=o.details)&&0<a.fragments.length?(ne(t,a),l=a.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(l,t),a.PTSKnown&&Object(u.isFiniteNumber)(l)?p.logger.log(\"live playlist sliding:\"+l.toFixed(3)):(p.logger.log(\"live playlist - outdated PTS, unknown sliding\"),de(this.fragPrevious,i,a))):(p.logger.log(\"live playlist - first load, unknown sliding\"),a.PTSKnown=!1,de(this.fragPrevious,i,a)):a.PTSKnown=!1,o.details=a,this.levelLastLoaded=n,this.hls.trigger(c.default.LEVEL_UPDATED,{details:a,level:n}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(r=a.startTimeOffset,Object(u.isFiniteNumber)(r)?(r<0&&(p.logger.log(\"negative start time offset \"+r+\", count from end of last fragment\"),r=l+s+r),p.logger.log(\"start time offset found in playlist, adjust startPosition to \"+r),this.startPosition=r):a.live?(this.startPosition=this.computeLivePosition(l,a),p.logger.log(\"configure startPosition to \"+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===Re&&(this.state=ye),this.tick()},s.onKeyLoaded=function(){this.state===ve&&(this.state=ye,this.tick())},s.onFragLoaded=function(e){var t,r,a,n,i,o,s=this.fragCurrent,l=this.hls,d=this.levels,u=this.media,h=e.frag;this.state===be&&s&&\"main\"===h.type&&h.level===s.level&&h.sn===s.sn&&(t=e.stats,a=(r=d[s.level]).details,this.bitrateTest=!1,this.stats=t,p.logger.log(\"Loaded \"+s.sn+\" of [\"+a.startSN+\" ,\"+a.endSN+\"],level \"+s.level),h.bitrateTest&&l.nextLoadLevel?(this.state=ye,this.startFragRequested=!1,t.tparsed=t.tbuffered=window.performance.now(),l.trigger(c.default.FRAG_BUFFERED,{stats:t,frag:s,id:\"main\"}),this.tick()):\"initSegment\"===h.sn?(this.state=ye,t.tparsed=t.tbuffered=window.performance.now(),a.initSegment.data=e.payload,l.trigger(c.default.FRAG_BUFFERED,{stats:t,frag:s,id:\"main\"}),this.tick()):(p.logger.log(\"Parsing \"+s.sn+\" of [\"+a.startSN+\" ,\"+a.endSN+\"],level \"+s.level+\", cc \"+s.cc),this.state=Te,this.pendingBuffering=!0,this.appended=!1,h.bitrateTest&&(h.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:h})),n=!(u&&u.seeking)&&(a.PTSKnown||!a.live),i=a.initSegment?a.initSegment.data:[],o=this._getAudioCodec(r),(this.demuxer=this.demuxer||new ee(this.hls,\"main\")).push(e.payload,i,o,r.videoCodec,s,a.totalduration,n))),this.fragLoadError=0},s.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&\"main\"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te){var a,n,i,o,s=e.tracks;for(a in this.audioOnly=s.audio&&!s.video,this.altAudio&&!this.audioOnly&&delete s.audio,(n=s.audio)&&(i=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase(),i&&this.audioCodecSwap&&(p.logger.log(\"swapping playlist audio codec\"),i=-1!==i.indexOf(\"mp4a.40.5\")?\"mp4a.40.2\":\"mp4a.40.5\"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===o.indexOf(\"firefox\")&&(i=\"mp4a.40.5\"),-1!==o.indexOf(\"android\")&&\"audio/mpeg\"!==n.container&&(i=\"mp4a.40.2\",p.logger.log(\"Android: force audio codec to \"+i)),n.levelCodec=i,n.id=e.id),(n=s.video)&&(n.levelCodec=this.levels[this.level].videoCodec,n.id=e.id),this.hls.trigger(c.default.BUFFER_CODECS,s),s){n=s[a],p.logger.log(\"main track:\"+a+\",container:\"+n.container+\",codecs[level/parsed]=[\"+n.levelCodec+\"/\"+n.codec+\"]\");var l=n.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(c.default.BUFFER_APPENDING,{type:a,data:l,parent:\"main\",content:\"initSegment\"}))}this.tick()}},s.onFragParsingData=function(e){var t=this,r=this.fragCurrent,a=e.frag;if(r&&\"main\"===e.id&&a.sn===r.sn&&a.level===r.level&&(\"audio\"!==e.type||!this.altAudio)&&this.state===Te){var n=this.levels[this.level],i=r;if(Object(u.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&i.addElementaryStream(y.AUDIO),!0===e.hasVideo&&i.addElementaryStream(y.VIDEO),p.logger.log(\"Parsed \"+e.type+\",PTS:[\"+e.startPTS.toFixed(3)+\",\"+e.endPTS.toFixed(3)+\"],DTS:[\"+e.startDTS.toFixed(3)+\"/\"+e.endDTS.toFixed(3)+\"],nb:\"+e.nb+\",dropped:\"+(e.dropped||0)),\"video\"===e.type)if(i.dropped=e.dropped,i.dropped)if(i.backtracked)p.logger.warn(\"Already backtracked on this fragment, appending with the gap\",i.sn);else{var o=n.details;if(!o||i.sn!==o.startSN)return p.logger.warn(\"missing video frame(s), backtracking fragment\",i.sn),this.fragmentTracker.removeFragment(i),i.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=ye,this.fragPrevious=i,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),void this.tick();p.logger.warn(\"missing video frame(s) on first frag, appending with gap\",i.sn)}else i.backtracked=!1;var s=ae(n.details,i,e.startPTS,e.endPTS,e.startDTS,e.endDTS),l=this.hls;l.trigger(c.default.LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===Te&&(t.appended=!0,t.pendingBuffering=!0,l.trigger(c.default.BUFFER_APPENDING,{type:e.type,data:r,parent:\"main\",content:\"data\"}))})),this.tick()}},s.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&\"main\"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te&&(this.stats.tparsed=window.performance.now(),this.state=Ee,this._checkAppendedParsed())},s.onAudioTrackSwitching=function(e){var t,r,a=this.altAudio,n=!!e.url,i=e.id;n||(this.mediaBuffer!==this.media&&(p.logger.log(\"switching on main audio, use media.buffered to schedule main fragment loading\"),this.mediaBuffer=this.media,(t=this.fragCurrent).loader&&(p.logger.log(\"switching to main audio track, cancel main fragment load\"),t.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ye),r=this.hls,a&&r.trigger(c.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:\"audio\"}),r.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:i}))},s.onAudioTrackSwitched=function(e){var t,r=e.id,a=!!this.hls.audioTracks[r].url;!a||(t=this.videoBuffer)&&this.mediaBuffer!==t&&(p.logger.log(\"switching on alternate audio, use video.buffered to schedule main fragment loading\"),this.mediaBuffer=t),this.altAudio=a,this.tick()},s.onBufferCreated=function(e){var t,r,a=e.tracks,n=!1;for(var i in a){var o=a[i];\"main\"===o.id?(t=o,\"video\"===(r=i)&&(this.videoBuffer=a[i].buffer)):n=!0}n&&t?(p.logger.log(\"alternate track found, use \"+r+\".buffered to schedule main fragment loading\"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},s.onBufferAppended=function(e){var t;\"main\"===e.parent&&((t=this.state)!==Te&&t!==Ee||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))},s._checkAppendedParsed=function(){var e,t,r;this.state!==Ee||this.appended&&this.pendingBuffering||((e=this.fragCurrent)&&(t=this.mediaBuffer?this.mediaBuffer:this.media,p.logger.log(\"main buffered : \"+se(t.buffered)),this.fragPrevious=e,(r=this.stats).tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(c.default.FRAG_BUFFERED,{stats:r,frag:e,id:\"main\"}),this.state=ye),(this.loadedmetadata||this.startPosition<=0)&&this.tick())},s.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||\"main\"===t.type){var r,a=!!this.media&&H.isBuffered(this.media,this.media.currentTime)&&H.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:case d.ErrorDetails.KEY_LOAD_ERROR:case d.ErrorDetails.KEY_LOAD_TIMEOUT:e.fatal||(this.fragLoadError+1<=this.config.fragLoadingMaxRetry?(r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout),p.logger.warn(\"mediaController: frag loading failed, retry in \"+r+\" ms\"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=we):(p.logger.error(\"mediaController: \"+e.details+\" reaches max retry, redispatch as fatal ...\"),e.fatal=!0,this.state=_e));break;case d.ErrorDetails.LEVEL_LOAD_ERROR:case d.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==_e&&(e.fatal?(this.state=_e,p.logger.warn(\"streamController: \"+e.details+\",switch to \"+this.state+\" state ...\")):e.levelRetry||this.state!==Re||(this.state=ye));break;case d.ErrorDetails.BUFFER_FULL_ERROR:\"main\"!==e.parent||this.state!==Te&&this.state!==Ee||(a?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ye):(p.logger.warn(\"buffer full error also media.currentTime is not buffered, flush everything\"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},s._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,p.logger.warn(\"main:reduce max buffer length to \"+t.maxMaxBufferLength+\"s\"),!0)},s._checkBuffer=function(){var e,t=this.media;t&&0!==t.readyState&&(e=(this.mediaBuffer?this.mediaBuffer:t).buffered,!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e))},s.onFragLoadEmergencyAborted=function(){this.state=ye,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},s.onBufferFlushed=function(){var e,t=this.mediaBuffer?this.mediaBuffer:this.media;t&&(e=this.audioOnly?y.AUDIO:y.VIDEO,this.fragmentTracker.detectEvictedFragments(e,t.buffered)),this.state=ye,this.fragPrevious=null},s.onLevelsUpdated=function(e){this.levels=e.levels},s.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},s._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=this.startPosition;if(t!==r&&0<=r){if(e.seeking)return void p.logger.log(\"could not seek to \"+r+\", already seeking at \"+t);var a=(e.buffered.length?e.buffered.start(0):0)-r;0<a&&a<this.config.maxBufferHole&&(p.logger.log(\"adjusting start position by \"+a+\" to match buffer start\"),r+=a,this.startPosition=r),p.logger.log(\"seek to target start position \"+r+\" from current time \"+t+\". ready state \"+e.readyState),e.currentTime=r}},s._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(p.logger.log(\"swapping playlist audio codec\"),t=t&&(-1!==t.indexOf(\"mp4a.40.5\")?\"mp4a.40.2\":\"mp4a.40.5\")),t},n=a,(i=[{key:\"state\",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,p.logger.log(\"main stream-controller: \"+t+\"->\"+e),this.hls.trigger(c.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e}))},get:function(){return this._state}},{key:\"currentLevel\",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:\"nextBufferedFrag\",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:\"nextLevel\",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:\"liveSyncPosition\",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&De(n.prototype,i),a}(Le);function Ie(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Pe=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.MANIFEST_LOADED,c.default.LEVEL_LOADED,c.default.AUDIO_TRACK_SWITCHED,c.default.FRAG_LOADED,c.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,Ce=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n,i,o=a.prototype;return o.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},o.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},o.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),null!==this.timer&&this.loadLevel()},o.stopLoad=function(){this.canload=!1},o.onManifestLoaded=function(e){var t,r=[],a=[],n={},i=null,o=!1,s=!1;if(e.levels.forEach((function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,s=s||!!e.audioCodec,Ce&&e.audioCodec&&-1!==e.audioCodec.indexOf(\"mp4a.40.34\")&&(e.audioCodec=void 0),(i=n[e.bitrate])?i.url.push(e.url):(e.url=[e.url],e.urlId=0,n[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&te(i||e,\"audio\",t.AUDIO),t.SUBTITLES&&te(i||e,\"text\",t.SUBTITLES))})),o&&s&&(r=r.filter((function(e){return!!e.videoCodec}))),r=r.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||R(t,\"audio\"))&&(!r||R(r,\"video\"))})),e.audioTracks&&(a=e.audioTracks.filter((function(e){return!e.audioCodec||R(e.audioCodec,\"audio\")}))).forEach((function(e,t){e.id=t})),0<r.length){t=r[0].bitrate,r.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=r;for(var l=0;l<r.length;l++)if(r[l].bitrate===t){this._firstLevel=l,p.logger.log(\"manifest loaded,\"+r.length+\" level(s) found, first bitrate:\"+t);break}var u=s&&!o;this.hls.trigger(c.default.MANIFEST_PARSED,{levels:r,audioTracks:a,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:o,altAudio:!u&&a.some((function(e){return!!e.url}))})}else this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:\"no level with compatible codecs found in manifest\"})},o.setLevelInternal=function(e){var t,r,a,n,i=this._levels,o=this.hls;0<=e&&e<i.length?(this.clearTimer(),this.currentLevelIndex!==e&&(p.logger.log(\"switching to level \"+e),(t=i[this.currentLevelIndex=e]).level=e,o.trigger(c.default.LEVEL_SWITCHING,t)),(a=(r=i[e]).details)&&!a.live||(n=r.urlId,o.trigger(c.default.LEVEL_LOADING,{url:r.url[n],level:e,id:n}))):o.trigger(c.default.ERROR,{type:d.ErrorTypes.OTHER_ERROR,details:d.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:\"invalid level idx\"})},o.onError=function(e){if(e.fatal)e.type===d.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,a=!1;switch(e.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:case d.ErrorDetails.KEY_LOAD_ERROR:case d.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,a=!0;break;case d.ErrorDetails.LEVEL_LOAD_ERROR:case d.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case d.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,a)}},o.recoverLevel=function(e,t,r,a){var n,i,o,s=this,l=this.hls.config,d=e.details,u=this._levels[t];if(u.loadError++,u.fragmentError=a,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return p.logger.error(\"level controller, cannot recover from \"+d+\" error\"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);i=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),i),e.levelRetry=!0,this.levelRetryCount++,p.logger.warn(\"level controller, \"+d+\", retry in \"+i+\" ms, current retry count is \"+this.levelRetryCount)}(r||a)&&(1<(n=u.url.length)&&u.loadError<n?(u.urlId=(u.urlId+1)%n,u.details=void 0,p.logger.warn(\"level controller, \"+d+\" for level \"+t+\": switching to redundant URL-id \"+u.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,p.logger.warn(\"level controller, \"+d+\": switch to \"+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):a&&(p.logger.warn(\"level controller, \"+d+\": reload a fragment\"),this.currentLevelIndex=null))},o.onFragLoaded=function(e){var t,r=e.frag;void 0===r||\"main\"!==r.type||void 0!==(t=this._levels[r.level])&&(t.fragmentError=!1,t.loadError=0,this.levelRetryCount=0)},o.onLevelLoaded=function(e){var t,r,a=this,n=e.level,i=e.details;n===this.currentLevelIndex&&((t=this._levels[n]).fragmentError||(t.loadError=0,this.levelRetryCount=0),i.live?(r=oe(t.details,i,e.stats.trequest),p.logger.log(\"live playlist, reload in \"+Math.round(r)+\" ms\"),this.timer=setTimeout((function(){return a.loadLevel()}),r)):this.clearTimer())},o.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var a=-1,n=0;n<r.audioGroupIds.length;n++)if(r.audioGroupIds[n]===t){a=n;break}a!==r.urlId&&(r.urlId=a,this.startLoad())}},o.loadLevel=function(){var e,t,r,a;p.logger.debug(\"call to loadLevel\"),null===this.currentLevelIndex||!this.canload||\"object\"==typeof(e=this._levels[this.currentLevelIndex])&&0<e.url.length&&(t=this.currentLevelIndex,r=e.urlId,a=e.url[r],p.logger.log(\"Attempt loading level index \"+t+\" with URL-id \"+r),this.hls.trigger(c.default.LEVEL_LOADING,{url:a,level:t,id:r}))},o.removeLevel=function(e,t){var r=this.levels.filter((function(r,a){return a!==e||1<r.url.length&&void 0!==t&&(r.url=r.url.filter((function(e,r){return r!==t})),!(r.urlId=0))})).map((function(e,t){var r=e.details;return r&&r.fragments&&r.fragments.forEach((function(e){e.level=t})),e}));this._levels=r,this.hls.trigger(c.default.LEVELS_UPDATED,{levels:r})},n=a,(i=[{key:\"levels\",get:function(){return this._levels}},{key:\"level\",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:\"manualLevel\",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:\"firstLevel\",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:\"startLevel\",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:\"nextLoadLevel\",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&Ie(n.prototype,i),a}(f),Me=r(\"./src/demux/id3.js\");function Fe(e,t){var r;try{r=new Event(\"addtrack\")}catch(e){(r=document.createEvent(\"Event\")).initEvent(\"addtrack\",!1,!1)}r.track=e,t.dispatchEvent(r)}function Be(e){if(null!=e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}var Ne=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_METADATA,c.default.LIVE_BACK_BUFFER_REACHED)||this;return r.id3Track=void 0,r.media=void 0,r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.destroy=function(){f.prototype.destroy.call(this)},n.onMediaAttached=function(e){this.media=e.media,this.media},n.onMediaDetaching=function(){Be(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if(\"metadata\"===r.kind&&\"id3\"===r.label)return Fe(r,this.media),r}return this.media.addTextTrack(\"metadata\",\"id3\")},n.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode=\"hidden\");for(var a=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,n=0;n<r.length;n++){var i=Me.default.getID3Frames(r[n].data);if(i){var o=Math.max(r[n].pts,0),s=n<r.length-1?r[n+1].pts:t.endPTS;(s=s||t.start+t.duration)-o<=0&&(s=o+.25);for(var l=0;l<i.length;l++){var d,u=i[l];Me.default.isTimeStampFrame(u)||((d=new a(o,s,\"\")).value=u,this.id3Track.addCue(d))}}}},n.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&&r.cues&&r.cues.length){var a=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var r=0,a=e.length-1;r<=a;){var n=Math.floor((a+r)/2);if(t<e[n].endTime)a=n-1;else{if(!(t>e[n].endTime))return e[n];r=n+1}}return e[r].endTime-t<t-e[a].endTime?e[r]:e[a]}(r.cues,t);if(a)for(;r.cues[0]!==a;)r.removeCue(r.cues[0])}},a}(f),Ue=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),je=function(){function e(e,t,r,a){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ue(t),this.fast_=new Ue(r)}var t=e.prototype;return t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,a=8*t/r;this.fast_.sample(r,a),this.slow_.sample(r,a)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();function Ye(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ge=window.performance,qe=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.FRAG_LOADING,c.default.FRAG_LOADED,c.default.FRAG_BUFFERED,c.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(r)),r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n,i,o=a.prototype;return o.destroy=function(){this.clearTimer(),f.prototype.destroy.call(this)},o.onFragLoading=function(e){var t,r,a,n,i,o=e.frag;\"main\"===o.type&&(this.timer||(this.fragCurrent=o,this.timer=setInterval(this.onCheck,100)),this._bwEstimator||(r=(t=this.hls).config,a=o.level,i=t.levels[a].details.live?(n=r.abrEwmaFastLive,r.abrEwmaSlowLive):(n=r.abrEwmaFastVoD,r.abrEwmaSlowVoD),this._bwEstimator=new je(t,i,n,r.abrEwmaDefaultEstimate)))},o._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var a=r.loader;if(!a||a.stats&&a.stats.aborted)return p.logger.warn(\"frag loader destroy or aborted, disarm abandonRules\"),this.clearTimer(),void(this._nextAutoLevel=-1);var n=a.stats;if(t&&n&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var i=Ge.now()-n.trequest,o=Math.abs(t.playbackRate);if(i>500*r.duration/o){var s=e.levels,l=Math.max(1,n.bw?n.bw/8:1e3*n.loaded/i),d=s[r.level];if(!d)return;var u=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,h=n.total?n.total:Math.max(n.loaded,Math.round(r.duration*u/8)),f=t.currentTime,g=(h-n.loaded)/l,m=(H.bufferInfo(t,f,e.config.maxBufferHole).end-f)/o;if(m<2*r.duration/o&&m<g){for(var y=e.minAutoLevel,v=r.level-1;y<v;v--){var b=s[v].realBitrate?Math.max(s[v].realBitrate,s[v].bitrate):s[v].bitrate;if(r.duration*b/(6.4*l)<m)break}void 0<g&&(p.logger.warn(\"loading too slow, abort fragment loading and switch to level \"+v+\":fragLoadedDelay[\"+v+\"]<fragLoadedDelay[\"+(r.level-1)+\"];bufferStarvationDelay:\"+(void 0).toFixed(1)+\"<\"+g.toFixed(1)+\":\"+m.toFixed(1)),e.nextLoadLevel=v,this._bwEstimator.sample(i,n.loaded),a.abort(),this.clearTimer(),e.trigger(c.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:n}))}}}}},o.onFragLoaded=function(e){var t,r,a,n,i=e.frag;\"main\"===i.type&&Object(u.isFiniteNumber)(i.sn)&&(this.clearTimer(),this.lastLoadedFragLevel=i.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(r=((t=this.hls.levels[i.level]).loaded?t.loaded.bytes:0)+e.stats.loaded,a=(t.loaded?t.loaded.duration:0)+e.frag.duration,t.loaded={bytes:r,duration:a},t.realBitrate=Math.round(8*r/a)),e.frag.bitrateTest&&((n=e.stats).tparsed=n.tbuffered=n.tload,this.onFragBuffered(e)))},o.onFragBuffered=function(e){var t,r=e.stats,a=e.frag;!0===r.aborted||\"main\"!==a.type||!Object(u.isFiniteNumber)(a.sn)||a.bitrateTest&&r.tload!==r.tbuffered||(t=r.tparsed-r.trequest,p.logger.log(\"latency/loading/parsing/append/kbps:\"+Math.round(r.tfirst-r.trequest)+\"/\"+Math.round(r.tload-r.tfirst)+\"/\"+Math.round(r.tparsed-r.tload)+\"/\"+Math.round(r.tbuffered-r.tparsed)+\"/\"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(t,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),a.bitrateTest?this.bitrateTestDelay=t/1e3:this.bitrateTestDelay=0)},o.onError=function(e){switch(e.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},o.clearTimer=function(){clearInterval(this.timer),this.timer=null},o._findBestLevel=function(e,t,r,a,n,i,o,s,l){for(var d=n;a<=d;d--){var u=l[d];if(u){var c=u.details,h=c?c.totalduration/c.fragments.length:t,f=!!c&&c.live,g=d<=e?o*r:s*r,m=l[d].realBitrate?Math.max(l[d].realBitrate,l[d].bitrate):l[d].bitrate,y=m*h/g;if(p.logger.trace(\"level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: \"+d+\"/\"+Math.round(g)+\"/\"+m+\"/\"+h+\"/\"+i+\"/\"+y),m<g&&(!y||f&&!this.bitrateTestDelay||y<i))return d}}return-1},n=a,(i=[{key:\"nextAutoLevel\",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:\"_nextABRAutoLevel\",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,a=e.config,n=e.minAutoLevel,i=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=i?i.currentTime:0,d=i&&0!==i.playbackRate?Math.abs(i.playbackRate):1,u=this._bwEstimator?this._bwEstimator.getEstimate():a.abrEwmaDefaultEstimate,c=(H.bufferInfo(i,l,a.maxBufferHole).end-l)/d,h=this._findBestLevel(o,s,u,n,t,c,a.abrBandWidthFactor,a.abrBandWidthUpFactor,r);if(0<=h)return h;p.logger.trace(\"rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering\");var f,g=s?Math.min(s,a.maxStarvationDelay):a.maxStarvationDelay,m=a.abrBandWidthFactor,y=a.abrBandWidthUpFactor;return 0!=c||(f=this.bitrateTestDelay)&&(g=(s?Math.min(s,a.maxLoadingDelay):a.maxLoadingDelay)-f,p.logger.trace(\"bitrate test took \"+Math.round(1e3*f)+\"ms, set first fragment max fetchDuration to \"+Math.round(1e3*g)+\" ms\"),m=y=1),h=this._findBestLevel(o,s,u,n,t,c+g,m,y,r),Math.max(h,0)}}])&&Ye(n.prototype,i),a}(f),ze=X(),He=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.MANIFEST_PARSED,c.default.BUFFER_RESET,c.default.BUFFER_APPENDING,c.default.BUFFER_CODECS,c.default.BUFFER_EOS,c.default.BUFFER_FLUSHING,c.default.LEVEL_PTS_UPDATED,c.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){p.logger.log(\"media source opened\"),r.hls.trigger(c.default.MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&&e.removeEventListener(\"sourceopen\",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){p.logger.log(\"media source closed\")},r._onMediaSourceEnded=function(){p.logger.log(\"media source ended\")},r._onSBUpdateEnd=function(){var e;r.audioTimestampOffset&&r.sourceBuffer.audio&&(e=r.sourceBuffer.audio,p.logger.warn(\"change mpeg audio timestamp offset from \"+e.timestampOffset+\" to \"+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset),r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var t=r.parent,a=r.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0),n={},i=r.sourceBuffer;for(var o in i){var s=i[o];if(!s)throw Error(\"handling source buffer update end error: source buffer for \"+o+\" uninitilized and unable to update buffered TimeRanges.\");n[o]=s.buffered}r.hls.trigger(c.default.BUFFER_APPENDED,{parent:t,pending:a,timeRanges:n}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===a&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){p.logger.error(\"sourceBuffer error:\",e),r.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.destroy=function(){f.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if(\"audio\"===t&&r&&\"audio/mpeg\"===r.container){var a=this.sourceBuffer.audio;if(!a)throw Error(\"Level PTS Updated and source buffer for audio uninitalized\");if(.1<Math.abs(a.timestampOffset-e.start)){var n=a.updating;try{a.abort()}catch(e){p.logger.warn(\"can not abort audio buffer: \"+e)}n?this.audioTimestampOffset=e.start:(p.logger.warn(\"change mpeg audio timestamp offset from \"+a.timestampOffset+\" to \"+e.start),a.timestampOffset=e.start)}}},n.onManifestParsed=function(e){var t=2;(!e.audio||e.video)&&e.altAudio||(t=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t,p.logger.log(this.bufferCodecEventsExpected+\" bufferCodec event(s) expected\")},n.onMediaAttaching=function(e){var t,r=this.media=e.media;r&&ze&&((t=this.mediaSource=new ze).addEventListener(\"sourceopen\",this._onMediaSourceOpen),t.addEventListener(\"sourceended\",this._onMediaSourceEnded),t.addEventListener(\"sourceclose\",this._onMediaSourceClose),r.src=window.URL.createObjectURL(t),this._objectUrl=r.src)},n.onMediaDetaching=function(){p.logger.log(\"media source detaching\");var e=this.mediaSource;if(e){if(\"open\"===e.readyState)try{e.endOfStream()}catch(e){p.logger.warn(\"onMediaDetaching:\"+e.message+\" while calling endOfStream\")}e.removeEventListener(\"sourceopen\",this._onMediaSourceOpen),e.removeEventListener(\"sourceended\",this._onMediaSourceEnded),e.removeEventListener(\"sourceclose\",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute(\"src\"),this.media.load()):p.logger.warn(\"media.src was changed by a third party - skip cleanup\")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(c.default.MEDIA_DETACHED)},n.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener(\"updateend\",this._onSBUpdateEnd),r.removeEventListener(\"error\",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach((function(r){t.pendingTracks[r]=e[r]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&\"open\"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error(\"createSourceBuffers called when mediaSource was null\");for(var a in e)if(!t[a]){var n=e[a];if(!n)throw Error(\"source buffer exists for track \"+a+\", however track does not\");var i=n.levelCodec||n.codec,o=n.container+\";codecs=\"+i;p.logger.log(\"creating sourceBuffer(\"+o+\")\");try{var s=t[a]=r.addSourceBuffer(o);s.addEventListener(\"updateend\",this._onSBUpdateEnd),s.addEventListener(\"error\",this._onSBUpdateError),this.tracks[a]={buffer:s,codec:i,id:n.id,container:n.container,levelCodec:n.levelCodec}}catch(e){p.logger.error(\"error while trying to add sourceBuffer:\"+e.message),this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(c.default.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},n.onBufferEos=function(e){for(var t in this.sourceBuffer){var r;e.type&&e.type!==t||(r=this.sourceBuffer[t])&&!r.ended&&(r.ended=!0,p.logger.log(t+\" sourceBuffer now EOS\"))}this.checkEos()},n.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&\"open\"===t.readyState){for(var r in e){var a=e[r];if(a){if(!a.ended)return;if(a.updating)return void(this._needsEos=!0)}}p.logger.log(\"all media data are available, signal endOfStream() to MediaSource and stop loading fragment\");try{t.endOfStream()}catch(e){p.logger.warn(\"exception while calling mediaSource.endOfStream()\")}this._needsEos=!1}else this._needsEos=!1},n.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:\"video\"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:\"audio\"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,a=Object.keys(r),n=t-Math.max(e,this._levelTargetDuration),i=a.length-1;0<=i;i--){var o,s=a[i],l=r[s];!l||0<(o=l.buffered).length&&n>o.start(0)&&this.removeBufferRange(s,l,0,n)&&this.hls.trigger(c.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n})}else p.logger.error(\"flushLiveBackBuffer called without attaching media\")}},n.onLevelUpdated=function(e){var t=e.details;0<t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&\"open\"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var a=this.sourceBuffer[r];if(a&&!0===a.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(p.logger.log(\"Media Source duration is set to Infinity\"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(u.isFiniteNumber)(e))&&(p.logger.log(\"Updating Media Source duration to \"+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},n.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var a in r){var n=r[a];n&&(t+=n.buffered.length)}}catch(e){p.logger.error(\"error while accessing sourceBuffer.buffered\")}this.appended=t,this.hls.trigger(c.default.BUFFER_FLUSHED)}},n.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,a=this.sourceBuffer;if(Object.keys(a).length){if(!this.media||this.media.error)return this.segments=[],void p.logger.error(\"trying to append although a media error occured, flush segment and abort\");if(!this.appending){var n=r.shift();if(n)try{var i=a[n.type];if(!i)return void this._onSBUpdateEnd();if(i.updating)return void r.unshift(n);i.ended=!1,this.parent=n.parent,i.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0}catch(a){p.logger.error(\"error while trying to append buffer:\"+a.message),r.unshift(n);var o={type:d.ErrorTypes.MEDIA_ERROR,parent:n.parent,details:\"\",fatal:!1};22===a.code?(this.segments=[],o.details=d.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=d.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(p.logger.log(\"fail \"+e.appendErrorMaxRetry+\" times to append segment in sourceBuffer\"),this.segments=[],o.fatal=!0)),t.trigger(c.default.ERROR,o)}}}},n.flushBuffer=function(e,t,r){var a=this.sourceBuffer;if(!Object.keys(a).length)return!0;var n=\"null\";if(this.media&&(n=this.media.currentTime.toFixed(3)),p.logger.log(\"flushBuffer,pos/start/end: \"+n+\"/\"+e+\"/\"+t),this.flushBufferCounter>=this.appended)return p.logger.warn(\"abort flushing too many retries\"),!0;var i=a[r];if(i){if(i.ended=!1,i.updating)return p.logger.warn(\"cannot flush, sb updating in progress\"),!1;if(this.removeBufferRange(r,i,e,t))return this.flushBufferCounter++,!1}return p.logger.log(\"buffer flushed\"),!0},n.removeBufferRange=function(e,t,r,a){try{for(var n=0;n<t.buffered.length;n++){var i=t.buffered.start(n),o=t.buffered.end(n),s=Math.max(i,r),l=Math.min(o,a);if(.5<Math.min(l,o)-s){var d=\"null\";return this.media&&(d=this.media.currentTime.toString()),p.logger.log(\"sb remove \"+e+\" [\"+s+\",\"+l+\"], of [\"+i+\",\"+o+\"], pos:\"+d),t.remove(s,l),!0}}}catch(e){p.logger.warn(\"removeBufferRange failed\",e)}return!1},a}(f);function Ke(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ve=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.FPS_DROP_LEVEL_CAPPING,c.default.MEDIA_ATTACHING,c.default.MANIFEST_PARSED,c.default.LEVELS_UPDATED,c.default.BUFFER_CODECS,c.default.MEDIA_DETACHING)||this;return r.autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r.clientRect=null,r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n,i,o,s=a.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},s.onFpsDropLevelCapping=function(e){a.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},s.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},s.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onLevelsUpdated=function(e){this.levels=e.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){var e,t;!this.media||(e=this.levels?this.levels.length:0)&&((t=this.hls).autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping)},s.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var r=this.levels.filter((function(r,n){return a.isLevelAllowed(n,t.restrictedLevels)&&n<=e}));return this.clientRect=null,a.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},s.getDimensions=function(){if(this.clientRect)return this.clientRect;var e,t=this.media,r={width:0,height:0};return t&&(e=t.getBoundingClientRect(),r.width=e.width,r.height=e.height,r.width||r.height||(r.width=e.right-e.left||t.width||0,r.height=e.bottom-e.top||t.height||0)),this.clientRect=r},a.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},a.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var a,n,i=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=r)&&(a=s,!(n=e[o+1])||a.width!==n.width||a.height!==n.height)){i=o;break}}return i},n=a,o=[{key:\"contentScaleFactor\",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(i=[{key:\"mediaWidth\",get:function(){return this.getDimensions().width*a.contentScaleFactor}},{key:\"mediaHeight\",get:function(){return this.getDimensions().height*a.contentScaleFactor}}])&&Ke(n.prototype,i),o&&Ke(n,o),a}(f),We=window.performance,Xe=function(e){var t,r;function a(t){return e.call(this,t,c.default.MEDIA_ATTACHING)||this}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&(\"function\"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},n.checkFPS=function(e,t,r){var a,n,i,o,s,l,d=We.now();t&&(this.lastTime&&(a=d-this.lastTime,n=r-this.lastDroppedFrames,i=t-this.lastDecodedFrames,o=1e3*n/a,(s=this.hls).trigger(c.default.FPS_DROP,{currentDropped:n,currentDecoded:i,totalDroppedFrames:r}),0<o&&n>s.config.fpsDroppedMonitoringThreshold*i&&(l=s.currentLevel,p.logger.warn(\"drop FPS ratio greater than max allowed value for currentLevel: \"+l),0<l&&(-1===s.autoLevelCapping||s.autoLevelCapping>=l)&&(--l,s.trigger(c.default.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:s.currentLevel}),s.autoLevelCapping=l,s.streamController.nextLevelSwitch()))),this.lastTime=d,this.lastDroppedFrames=r,this.lastDecodedFrames=t)},n.checkFPSInterval=function(){var e,t=this.video;t&&(this.isVideoPlaybackQualityAvailable?(e=t.getVideoPlaybackQuality(),this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)):this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount))},a}(f),$e=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.context,t=this.loader=new window.XMLHttpRequest,r=this.stats;r.tfirst=0,r.loaded=0;var a=this.xhrSetup;try{if(a)try{a(t,e.url)}catch(r){t.open(\"GET\",e.url,!0),a(t,e.url)}t.readyState||t.open(\"GET\",e.url,!0)}catch(r){return void this.callbacks.onError({code:t.status,text:r.message},e,t)}e.rangeEnd&&t.setRequestHeader(\"Range\",\"bytes=\"+e.rangeStart+\"-\"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},t.readystatechange=function(e){var t,r,a,n,i=e.currentTarget,o=i.readyState,s=this.stats,l=this.context,d=this.config;s.aborted||2<=o&&(window.clearTimeout(this.requestTimeout),0===s.tfirst&&(s.tfirst=Math.max(window.performance.now(),s.trequest)),4===o?200<=(t=i.status)&&t<300?(s.tload=Math.max(s.tfirst,window.performance.now()),a=\"arraybuffer\"===l.responseType?(r=i.response).byteLength:(r=i.responseText).length,s.loaded=s.total=a,n={url:i.responseURL,data:r},this.callbacks.onSuccess(n,s,l,i)):s.retry>=d.maxRetry||400<=t&&t<499?(p.logger.error(t+\" while loading \"+l.url),this.callbacks.onError({code:t,text:i.statusText},l,i)):(p.logger.warn(t+\" while loading \"+l.url+\", retrying in \"+this.retryDelay+\"...\"),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,d.maxRetryDelay),s.retry++):this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),d.timeout))},t.loadtimeout=function(){p.logger.warn(\"timeout while loading \"+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var a=this.callbacks.onProgress;a&&a(r,this.context,null,t)},e}();function Qe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Je=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.MANIFEST_LOADING,c.default.MANIFEST_PARSED,c.default.AUDIO_TRACK_LOADED,c.default.AUDIO_TRACK_SWITCHED,c.default.LEVEL_LOADED,c.default.ERROR)||this;return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n,i,o=a.prototype;return o.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},o.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(c.default.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},o.onAudioTrackLoaded=function(e){var t;e.id>=this.tracks.length?p.logger.warn(\"Invalid audio track id:\",e.id):(p.logger.log(\"audioTrack \"+e.id+\" loaded\"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()&&(t=1e3*e.details.targetduration,this.setInterval(t)),!e.details.live&&this.hasInterval()&&this.clearInterval())},o.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},o.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},o.onError=function(e){e.type===d.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===d.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(p.logger.warn(\"Network failure on audio-track id:\",e.context.id),this._handleLoadError()))},o._setAudioTrack=function(e){var t,r,a,n;this._trackId===e&&this.tracks[this._trackId].details?p.logger.debug(\"Same id as current audio-track passed, and track details available -> no-op\"):e<0||e>=this.tracks.length?p.logger.warn(\"Invalid id passed to audio-track controller\"):(t=this.tracks[e],p.logger.log(\"Now switching to audio-track index \"+e),this.clearInterval(),this._trackId=e,r=t.url,a=t.type,n=t.id,this.hls.trigger(c.default.AUDIO_TRACK_SWITCHING,{id:n,type:a,url:r}),this._loadTrackDetailsIfNeeded(t))},o.doTick=function(){this._updateTrack(this._trackId)},o._selectAudioGroup=function(e){var t,r=this.hls.levels[e];r&&r.audioGroupIds&&(t=r.audioGroupIds[r.urlId],this.audioGroupId!==t&&(this.audioGroupId=t,this._selectInitialAudioTrack()))},o._selectInitialAudioTrack=function(){var e,t,r,a,n,i=this,o=this.tracks;o.length&&(e=this.tracks[this._trackId],t=null,e&&(t=e.name),this._selectDefaultTrack&&((r=o.filter((function(e){return e.default}))).length?o=r:p.logger.warn(\"No default audio tracks defined\")),a=!1,(n=function(){o.forEach((function(e){a||i.audioGroupId&&e.groupId!==i.audioGroupId||t&&t!==e.name||(i._setAudioTrack(e.id),a=!0)}))})(),a||(t=null,n()),a||(p.logger.error(\"No track found for running audio group-ID: \"+this.audioGroupId),this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0})))},o._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live||!r)},o._loadTrackDetailsIfNeeded=function(e){var t,r;this._needsTrackLoading(e)&&(t=e.url,r=e.id,p.logger.log(\"loading audio-track playlist for id: \"+r),this.hls.trigger(c.default.AUDIO_TRACK_LOADING,{url:t,id:r}))},o._updateTrack=function(e){var t;e<0||e>=this.tracks.length||(this.clearInterval(),this._trackId=e,p.logger.log(\"trying to update audio-track \"+e),t=this.tracks[e],this._loadTrackDetailsIfNeeded(t))},o._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,a=t.language,n=t.groupId;p.logger.warn(\"Loading failed on audio track id: \"+e+\", group-id: \"+n+', name/language: \"'+r+'\" / \"'+a+'\"');for(var i=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===r){i=o;break}i!==e?(p.logger.log(\"Attempting audio-track fallback id:\",i,\"group-id:\",this.tracks[i].groupId),this._setAudioTrack(i)):p.logger.warn('No fallback audio-track found for name/language: \"'+r+'\" / \"'+a+'\"')},n=a,(i=[{key:\"audioTracks\",get:function(){return this.tracks}},{key:\"audioTrack\",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&Qe(n.prototype,i),a}(fe);function Ze(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function et(){return{decode:function(e){if(!e)return\"\";if(\"string\"!=typeof e)throw new Error(\"Error - expected string data.\");return decodeURIComponent(encodeURIComponent(e))}}}var tt=window.performance,rt=function(e){var t,r;function a(t,r){var a=e.call(this,t,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.AUDIO_TRACKS_UPDATED,c.default.AUDIO_TRACK_SWITCHING,c.default.AUDIO_TRACK_LOADED,c.default.KEY_LOADED,c.default.FRAG_LOADED,c.default.FRAG_PARSING_INIT_SEGMENT,c.default.FRAG_PARSING_DATA,c.default.FRAG_PARSED,c.default.ERROR,c.default.BUFFER_RESET,c.default.BUFFER_CREATED,c.default.BUFFER_APPENDED,c.default.BUFFER_FLUSHED,c.default.INIT_PTS_FOUND)||this;return a.fragmentTracker=r,a.config=t.config,a.audioCodecSwap=!1,a._state=ge,a.initPTS=[],a.waitingFragment=null,a.videoTrackCC=null,a.waitingVideoCC=null,a}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n,i,o=a.prototype;return o.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,a=e.initPTS;\"main\"===t&&(this.initPTS[r]=a,this.videoTrackCC=r,p.logger.log(\"InitPTS for cc: \"+r+\" found from main: \"+a),this.state===Ae&&this.tick())},o.startLoad=function(e){var t;this.tracks?(t=this.lastCurrentTime,this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<t&&-1===e?(p.logger.log(\"audio:override startPosition with lastCurrentTime @\"+t.toFixed(3)),this.state=ye):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=me),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()):(this.startPosition=e,this.state=ge)},o.doTick=function(){var e,t,r,a,n,i=this.hls,o=i.config;switch(this.state){case _e:case\"PAUSED\":case xe:break;case me:this.state=ke,this.loadedmetadata=!1;break;case ye:var s=this.tracks;if(!s)break;if(!this.media&&(this.startFragRequested||!o.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var l=this.mediaBuffer?this.mediaBuffer:this.media,d=this.videoBuffer?this.videoBuffer:this.media,h=e<o.maxBufferHole?Math.max(2,o.maxBufferHole):o.maxBufferHole,f=H.bufferInfo(l,e,h),g=H.bufferInfo(d,e,h),m=f.len,y=f.end,v=this.fragPrevious,b=Math.min(o.maxBufferLength,o.maxMaxBufferLength),w=Math.max(b,g.len),k=this.audioSwitch,T=this.trackId;if((m<w||k)&&T<s.length){if(void 0===(r=s[T].details)){this.state=ke;break}if(!k&&this._streamEnded(f,r))return this.hls.trigger(c.default.BUFFER_EOS,{type:\"audio\"}),void(this.state=Se);var E,x=r.fragments,S=x.length,_=x[0].start,A=x[S-1].start+x[S-1].duration;if(k)if(r.live&&!r.PTSKnown)p.logger.log(\"switching audiotrack, live stream, unknown PTS,load first fragment\"),y=0;else if(y=e,r.PTSKnown&&e<_){if(!(f.end>_||f.nextStart))return;p.logger.log(\"alt audio track ahead of main track, seek to start of alt audio track\"),this.media.currentTime=_+.05}if(r.initSegment&&!r.initSegment.data)E=r.initSegment;else if(y<=_){if(E=x[0],null!==this.videoTrackCC&&E.cc!==this.videoTrackCC&&(a=x,n=this.videoTrackCC,E=z(a,(function(e){return e.cc<n?1:e.cc>n?-1:0}))),r.live&&E.loadIdx&&E.loadIdx===this.fragLoadIdx){var R=f.nextStart?f.nextStart:_;return p.logger.log(\"no alt audio available @currentTime:\"+this.media.currentTime+\", seeking @\"+(R+.05)),void(this.media.currentTime=R+.05)}}else{var L=o.maxFragLookUpTolerance,D=v?x[v.sn-x[0].sn+1]:void 0,C=y<A?(A-L<y&&(L=0),D&&!pe(y,L,D)?D:z(x,(function(e){return pe(y,L,e)}))):x[S-1];C&&(_=(E=C).start,v&&E.level===v.level&&E.sn===v.sn&&(E.sn<r.endSN?(E=x[E.sn+1-r.startSN],this.fragmentTracker.getState(E)!==G&&p.logger.log(\"SN just loaded, load next one: \"+E.sn)):E=null))}E&&(E.encrypted?(p.logger.log(\"Loading key for \"+E.sn+\" of [\"+r.startSN+\" ,\"+r.endSN+\"],track \"+T),this.state=ve,i.trigger(c.default.KEY_LOADING,{frag:E})):(this.fragCurrent=E,!k&&this.fragmentTracker.getState(E)!==U||(p.logger.log(\"Loading \"+E.sn+\", cc: \"+E.cc+\" of [\"+r.startSN+\" ,\"+r.endSN+\"],track \"+T+\", \"+(this.loadedmetadata?\"currentTime\":\"nextLoadPosition\")+\": \"+e+\", bufferEnd: \"+y.toFixed(3)),\"initSegment\"!==E.sn&&(this.startFragRequested=!0),Object(u.isFiniteNumber)(E.sn)&&(this.nextLoadPosition=E.start+E.duration),i.trigger(c.default.FRAG_LOADING,{frag:E}),this.state=be)))}break;case ke:(t=this.tracks[this.trackId])&&t.details&&(this.state=ye);break;case we:var O=tt.now(),I=this.retryDate,P=(l=this.media)&&l.seeking;(!I||I<=O||P)&&(p.logger.log(\"audioStreamController: retryDate reached, switch back to IDLE state\"),this.state=ye);break;case Ae:var M,F,B=this.waitingFragment;B?(M=B.frag.cc,void 0!==this.initPTS[M]?(this.waitingFragment=null,this.state=be,this.onFragLoaded(B)):this.videoTrackCC!==this.waitingVideoCC?(p.logger.log(\"Waiting fragment cc (\"+M+\") cancelled because video is at cc \"+this.videoTrackCC),this.clearWaitingFragment()):pe((F=H.bufferInfo(this.mediaBuffer,this.media.currentTime,o.maxBufferHole)).end,o.maxFragLookUpTolerance,B.frag)<0&&(p.logger.log(\"Waiting fragment cc (\"+M+\") @ \"+B.frag.start+\" cancelled because another fragment at \"+F.end+\" is needed\"),this.clearWaitingFragment())):this.state=ye}},o.clearWaitingFragment=function(){var e=this.waitingFragment;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=ye)},o.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener(\"seeking\",this.onvseeking),t.addEventListener(\"ended\",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},o.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(p.logger.log(\"MSE detaching and video ended, reset startPosition\"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener(\"seeking\",this.onvseeking),e.removeEventListener(\"ended\",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},o.onAudioTracksUpdated=function(e){p.logger.log(\"audio tracks updated\"),this.tracks=e.audioTracks},o.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=\"PAUSED\",t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=ye),this.tick()},o.onAudioTrackLoaded=function(e){var t,r,a=e.details,n=e.id,i=this.tracks[n],o=a.totalduration,s=0;p.logger.log(\"track \"+n+\" loaded [\"+a.startSN+\",\"+a.endSN+\"],duration:\"+o),a.live?(t=i.details)&&0<a.fragments.length?(ne(t,a),s=a.fragments[0].start,a.PTSKnown?p.logger.log(\"live audio playlist sliding:\"+s.toFixed(3)):p.logger.log(\"live audio playlist - outdated PTS, unknown sliding\")):(a.PTSKnown=!1,p.logger.log(\"live audio playlist - first load, unknown sliding\")):a.PTSKnown=!1,i.details=a,this.startFragRequested||(-1===this.startPosition&&(r=a.startTimeOffset,Object(u.isFiniteNumber)(r)?(p.logger.log(\"start time offset found in playlist, adjust startPosition to \"+r),this.startPosition=r):a.live?(this.startPosition=this.computeLivePosition(s,a),p.logger.log(\"compute startPosition for audio-track to \"+this.startPosition)):this.startPosition=0),this.nextLoadPosition=this.startPosition),this.state===ke&&(this.state=ye),this.tick()},o.onKeyLoaded=function(){this.state===ve&&(this.state=ye,this.tick())},o.onFragLoaded=function(e){var t,r,a,n,i,o,s,l,d,u,h=this.fragCurrent,f=e.frag;this.state===be&&h&&\"audio\"===f.type&&f.level===h.level&&f.sn===h.sn&&(a=(r=(t=this.tracks[this.trackId]).details).totalduration,n=h.level,i=h.sn,o=h.cc,s=this.config.defaultAudioCodec||t.audioCodec||\"mp4a.40.2\",l=this.stats=e.stats,\"initSegment\"===i?(this.state=ye,l.tparsed=l.tbuffered=tt.now(),r.initSegment.data=e.payload,this.hls.trigger(c.default.FRAG_BUFFERED,{stats:l,frag:h,id:\"audio\"}),this.tick()):(this.state=Te,this.appended=!1,this.demuxer||(this.demuxer=new ee(this.hls,\"audio\")),d=this.initPTS[o],u=r.initSegment?r.initSegment.data:[],void 0!==d?(this.pendingBuffering=!0,p.logger.log(\"Demuxing \"+i+\" of [\"+r.startSN+\" ,\"+r.endSN+\"],track \"+n),this.demuxer.push(e.payload,u,s,null,h,a,!1,d)):(p.logger.log(\"Unknown video PTS for cc \"+o+\", waiting for video PTS before demuxing audio frag \"+i+\" of [\"+r.startSN+\" ,\"+r.endSN+\"],track \"+n),this.waitingFragment=e,this.waitingVideoCC=this.videoTrackCC,this.state=Ae))),this.fragLoadError=0},o.onFragParsingInitSegment=function(e){var t,r,a,n,i=this.fragCurrent,o=e.frag;i&&\"audio\"===e.id&&o.sn===i.sn&&o.level===i.level&&this.state===Te&&((t=e.tracks).video&&delete t.video,(r=t.audio)&&(r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(c.default.BUFFER_CODECS,t),p.logger.log(\"audio track:audio,container:\"+r.container+\",codecs[level/parsed]=[\"+r.levelCodec+\"/\"+r.codec+\"]\"),(a=r.initSegment)&&(n={type:\"audio\",data:a,parent:\"audio\",content:\"initSegment\"},this.audioSwitch?this.pendingData=[n]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(c.default.BUFFER_APPENDING,n))),this.tick()))},o.onFragParsingData=function(e){var t=this,r=this.fragCurrent,a=e.frag;if(r&&\"audio\"===e.id&&\"audio\"===e.type&&a.sn===r.sn&&a.level===r.level&&this.state===Te){var n=this.trackId,i=this.tracks[n],o=this.hls;Object(u.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(y.AUDIO),p.logger.log(\"parsed \"+e.type+\",PTS:[\"+e.startPTS.toFixed(3)+\",\"+e.endPTS.toFixed(3)+\"],DTS:[\"+e.startDTS.toFixed(3)+\"/\"+e.endDTS.toFixed(3)+\"],nb:\"+e.nb),ae(i.details,r,e.startPTS,e.endPTS);var s,l=this.media,h=!1;this.audioSwitch&&(l&&l.readyState?(s=l.currentTime,p.logger.log(\"switching audio track : currentTime:\"+s),s>=e.startPTS&&(p.logger.log(\"switching audio track : flushing all audio\"),this.state=xe,o.trigger(c.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:\"audio\"}),h=!0,this.audioSwitch=!1,o.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:n}))):(this.audioSwitch=!1,o.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:n})));var f=this.pendingData;if(!f)return p.logger.warn(\"Apparently attempt to enqueue media payload without codec initialization data upfront\"),void o.trigger(c.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach((function(t){t&&t.length&&f.push({type:e.type,data:t,parent:\"audio\",content:\"data\"})})),!h&&f.length&&(f.forEach((function(e){t.state===Te&&(t.pendingBuffering=!0,t.hls.trigger(c.default.BUFFER_APPENDING,e))})),this.pendingData=[],this.appended=!0)),this.tick()}},o.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&\"audio\"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===Te&&(this.stats.tparsed=tt.now(),this.state=Ee,this._checkAppendedParsed())},o.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},o.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},o.onBufferAppended=function(e){var t;\"audio\"===e.parent&&((t=this.state)!==Te&&t!==Ee||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed()))},o._checkAppendedParsed=function(){var e,t,r,a;this.state!==Ee||this.appended&&this.pendingBuffering||(e=this.fragCurrent,t=this.stats,r=this.hls,e&&(this.fragPrevious=e,t.tbuffered=tt.now(),r.trigger(c.default.FRAG_BUFFERED,{stats:t,frag:e,id:\"audio\"}),(a=this.mediaBuffer?this.mediaBuffer:this.media)&&p.logger.log(\"audio buffered : \"+se(a.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(c.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=ye),this.tick())},o.onError=function(e){var t,r,a,n=e.frag;if(!n||\"audio\"===n.type)switch(e.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:var i,o,s,l=e.frag;if(l&&\"audio\"!==l.type)break;e.fatal||((i=this.fragLoadError)?i++:i=1,i<=(o=this.config).fragLoadingMaxRetry?(this.fragLoadError=i,s=Math.min(Math.pow(2,i-1)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout),p.logger.warn(\"AudioStreamController: frag loading failed, retry in \"+s+\" ms\"),this.retryDate=tt.now()+s,this.state=we):(p.logger.error(\"AudioStreamController: \"+e.details+\" reaches max retry, redispatch as fatal ...\"),e.fatal=!0,this.state=_e));break;case d.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case d.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case d.ErrorDetails.KEY_LOAD_ERROR:case d.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==_e&&(this.state=e.fatal?_e:ye,p.logger.warn(\"AudioStreamController: \"+e.details+\" while loading frag, now switching to \"+this.state+\" state ...\"));break;case d.ErrorDetails.BUFFER_FULL_ERROR:\"audio\"!==e.parent||this.state!==Te&&this.state!==Ee||(t=this.mediaBuffer,r=this.media.currentTime,t&&H.isBuffered(t,r)&&H.isBuffered(t,r+.5)?((a=this.config).maxMaxBufferLength>=a.maxBufferLength&&(a.maxMaxBufferLength/=2,p.logger.warn(\"AudioStreamController: reduce max buffer length to \"+a.maxMaxBufferLength+\"s\")),this.state=ye):(p.logger.warn(\"AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer\"),this.fragCurrent=null,this.state=xe,this.hls.trigger(c.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:\"audio\"})))}},o.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(p.logger.log(\"AudioStreamController: appending pending audio data after buffer flushed\"),t.forEach((function(t){e.hls.trigger(c.default.BUFFER_APPENDING,t)})),this.appended=!0,this.pendingData=[],this.state=Ee):(this.state=ye,this.fragPrevious=null,this.tick())},n=a,(i=[{key:\"state\",set:function(e){var t;this.state!==e&&(t=this.state,this._state=e,p.logger.log(\"audio stream:\"+t+\"->\"+e))},get:function(){return this._state}}])&&Ze(n.prototype,i),a}(Le),at=function(){if(\"undefined\"!=typeof window&&window.VTTCue)return window.VTTCue;var e={\"\":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return\"string\"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}function n(t,n,i){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l=\"\",d=!1,u=t,c=n,p=i,h=null,f=\"\",g=!0,m=\"auto\",y=\"start\",v=50,b=\"middle\",w=50,k=\"middle\";Object.defineProperty(o,\"id\",a({},s,{get:function(){return l},set:function(e){l=\"\"+e}})),Object.defineProperty(o,\"pauseOnExit\",a({},s,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(o,\"startTime\",a({},s,{get:function(){return u},set:function(e){if(\"number\"!=typeof e)throw new TypeError(\"Start time must be set to a number.\");u=e,this.hasBeenReset=!0}})),Object.defineProperty(o,\"endTime\",a({},s,{get:function(){return c},set:function(e){if(\"number\"!=typeof e)throw new TypeError(\"End time must be set to a number.\");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,\"text\",a({},s,{get:function(){return p},set:function(e){p=\"\"+e,this.hasBeenReset=!0}})),Object.defineProperty(o,\"region\",a({},s,{get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,\"vertical\",a({},s,{get:function(){return f},set:function(t){var r,a=\"string\"==typeof(r=t)&&!!e[r.toLowerCase()]&&r.toLowerCase();if(!1===a)throw new SyntaxError(\"An invalid or illegal string was specified.\");f=a,this.hasBeenReset=!0}})),Object.defineProperty(o,\"snapToLines\",a({},s,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,\"line\",a({},s,{get:function(){return m},set:function(e){if(\"number\"!=typeof e&&\"auto\"!==e)throw new SyntaxError(\"An invalid number or illegal string was specified.\");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,\"lineAlign\",a({},s,{get:function(){return y},set:function(e){var t=r(e);if(!t)throw new SyntaxError(\"An invalid or illegal string was specified.\");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,\"position\",a({},s,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error(\"Position must be between 0 and 100.\");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,\"positionAlign\",a({},s,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError(\"An invalid or illegal string was specified.\");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,\"size\",a({},s,{get:function(){return w},set:function(e){if(e<0||100<e)throw new Error(\"Size must be between 0 and 100.\");w=e,this.hasBeenReset=!0}})),Object.defineProperty(o,\"align\",a({},s,{get:function(){return k},set:function(e){var t=r(e);if(!t)throw new SyntaxError(\"An invalid or illegal string was specified.\");k=t,this.hasBeenReset=!0}})),o.displayState=void 0}return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}();function nt(){this.window=window,this.state=\"INITIAL\",this.buffer=\"\",this.decoder=new et,this.regionList=[]}function it(){this.values=Object.create(null)}function ot(e,t,r,a){var n,i=a?e.split(a):[e];for(var o in i)\"string\"==typeof i[o]&&2===(n=i[o].split(r)).length&&t(n[0],n[1])}it.prototype={set:function(e,t){this.get(e)||\"\"===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var a=0;a<r.length;++a)if(t===r[a]){this.set(e,t);break}},integer:function(e,t){/^-?\\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var st=new at(0,0,0),lt=\"middle\"===st.align?\"middle\":\"center\";function dt(e,t,r){var a=e;function n(){var t,r=(t=e.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/))?t[3]?n(t[1],t[2],t[3].replace(\":\",\"\"),t[4]):59<t[1]?n(t[1],t[2],0,t[4]):n(0,t[1],t[2],t[4]):null;function n(e,t,r,a){return 3600*(0|e)+60*(0|t)+(0|r)+(0|a)/1e3}if(null===r)throw new Error(\"Malformed timestamp: \"+a);return e=e.replace(/^[^\\sa-zA-Z-]+/,\"\"),r}function i(){e=e.replace(/^\\s+/,\"\")}if(i(),t.startTime=n(),i(),\"--\\x3e\"!==e.substr(0,3))throw new Error(\"Malformed time stamp (time stamps must be separated by '--\\x3e'): \"+a);e=e.substr(3),i(),t.endTime=n(),i(),function(e,t){var a=new it;ot(e,(function(e,t){switch(e){case\"region\":for(var n=r.length-1;0<=n;n--)if(r[n].id===t){a.set(e,r[n].region);break}break;case\"vertical\":a.alt(e,t,[\"rl\",\"lr\"]);break;case\"line\":var i=t.split(\",\"),o=i[0];a.integer(e,o),a.percent(e,o)&&a.set(\"snapToLines\",!1),a.alt(e,o,[\"auto\"]),2===i.length&&a.alt(\"lineAlign\",i[1],[\"start\",lt,\"end\"]);break;case\"position\":i=t.split(\",\"),a.percent(e,i[0]),2===i.length&&a.alt(\"positionAlign\",i[1],[\"start\",lt,\"end\",\"line-left\",\"line-right\",\"auto\"]);break;case\"size\":a.percent(e,t);break;case\"align\":a.alt(e,t,[\"start\",lt,\"end\",\"left\",\"right\"])}}),/:/,/\\s/),t.region=a.get(\"region\",null),t.vertical=a.get(\"vertical\",\"\");var n=a.get(\"line\",\"auto\");\"auto\"===n&&-1===st.line&&(n=-1),t.line=n,t.lineAlign=a.get(\"lineAlign\",\"start\"),t.snapToLines=a.get(\"snapToLines\",!0),t.size=a.get(\"size\",100),t.align=a.get(\"align\",lt);var i=a.get(\"position\",\"auto\");\"auto\"===i&&50===st.position&&(i=\"start\"===t.align||\"left\"===t.align?0:\"end\"===t.align||\"right\"===t.align?100:50),t.position=i}(e,t)}function ut(e){return e.replace(/<br(?: \\/)?>/gi,\"\\n\")}nt.prototype={parse:function(e){var t,r=this;function a(){for(var e=0,t=ut(t=r.buffer);e<t.length&&\"\\r\"!==t[e]&&\"\\n\"!==t[e];)++e;var a=t.substr(0,e);return\"\\r\"===t[e]&&++e,\"\\n\"===t[e]&&++e,r.buffer=t.substr(e),a}e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{if(\"INITIAL\"===r.state){if(!/\\r\\n|\\n/.test(r.buffer))return this;var n=(t=a()).match(/^(ï»¿)?WEBVTT([ \\t].*)?$/);if(!n||!n[0])throw new Error(\"Malformed WebVTT signature.\");r.state=\"HEADER\"}for(var i=!1;r.buffer;){if(!/\\r\\n|\\n/.test(r.buffer))return this;switch(i?i=!1:t=a(),r.state){case\"HEADER\":/:/.test(t)?ot(t,(function(e,t){}),/:/):t||(r.state=\"ID\");continue;case\"NOTE\":t||(r.state=\"ID\");continue;case\"ID\":if(/^NOTE($|[ \\t])/.test(t)){r.state=\"NOTE\";break}if(!t)continue;if(r.cue=new at(0,0,\"\"),r.state=\"CUE\",-1===t.indexOf(\"--\\x3e\")){r.cue.id=t;continue}case\"CUE\":try{dt(t,r.cue,r.regionList)}catch(e){r.cue=null,r.state=\"BADCUE\";continue}r.state=\"CUETEXT\";continue;case\"CUETEXT\":var o=-1!==t.indexOf(\"--\\x3e\");if(!t||o&&(i=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state=\"ID\";continue}r.cue.text&&(r.cue.text+=\"\\n\"),r.cue.text+=t;continue;case\"BADCUE\":t||(r.state=\"ID\");continue}}}catch(e){\"CUETEXT\"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state=\"INITIAL\"===r.state?\"BADWEBVTT\":\"BADCUE\"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&\"HEADER\"!==this.state||(this.buffer+=\"\\n\\n\",this.parse()),\"INITIAL\"===this.state)throw new Error(\"Malformed WebVTT signature.\")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var ct=nt;function pt(e,t,r,a){for(var n,i,o,s,l,d=[],u=window.VTTCue||TextTrackCue,c=0;c<a.rows.length;c++)if(o=!0,s=0,l=\"\",!(n=a.rows[c]).isEmpty()){for(var p=0;p<n.chars.length;p++)n.chars[p].uchar.match(/\\s/)&&o?s++:(l+=n.chars[p].uchar,o=!1);(n.cueStartTime=t)===r&&(r+=1e-4),i=new u(t,r,ut(l.trim())),16<=s?s--:s++,navigator.userAgent.match(/Firefox\\//)?i.line=c+1:i.line=7<c?c-2:c+1,i.align=\"left\",i.position=Math.max(0,Math.min(100,s/32*100)),d.push(i),e&&e.addCue(i)}return d}function ht(e){var t=e;return mt.hasOwnProperty(e)&&(t=mt[e]),String.fromCharCode(t)}var ft,gt,mt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},yt=100,vt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},bt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},wt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},kt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Tt=[\"white\",\"green\",\"blue\",\"cyan\",\"red\",\"yellow\",\"magenta\",\"black\",\"transparent\"];function Et(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t}(gt=ft=ft||{})[gt.ERROR=0]=\"ERROR\",gt[gt.TEXT=1]=\"TEXT\",gt[gt.WARNING=2]=\"WARNING\",gt[gt.INFO=2]=\"INFO\",gt[gt.DEBUG=3]=\"DEBUG\",gt[gt.DATA=3]=\"DATA\";var xt=function(){function e(){this.time=null,this.verboseLevel=ft.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&p.logger.log(this.time+\" [\"+e+\"] \"+t)},e}(),St=function(){function e(e,t,r,a,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||\"white\",this.underline=t||!1,this.italics=r||!1,this.background=a||\"black\",this.flash=n||!1}var t=e.prototype;return t.reset=function(){this.foreground=\"white\",this.underline=!1,this.italics=!1,this.background=\"black\",this.flash=!1},t.setStyles=function(e){for(var t=[\"foreground\",\"underline\",\"italics\",\"background\",\"flash\"],r=0;r<t.length;r++){var a=t[r];e.hasOwnProperty(a)&&(this[a]=e[a])}},t.isDefault=function(){return\"white\"===this.foreground&&!this.underline&&!this.italics&&\"black\"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return\"color=\"+this.foreground+\", underline=\"+this.underline+\", italics=\"+this.italics+\", background=\"+this.background+\", flash=\"+this.flash},e}(),_t=function(){function e(e,t,r,a,n,i){this.uchar=void 0,this.penState=void 0,this.uchar=e||\" \",this.penState=new St(t,r,a,n,i)}var t=e.prototype;return t.reset=function(){this.uchar=\" \",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return\" \"===this.uchar&&this.penState.isDefault()},e}(),At=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<yt;t++)this.chars.push(new _t);this.logger=e,this.pos=0,this.currPenState=new St}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<yt;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<yt;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<yt;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(ft.DEBUG,\"Negative cursor position \"+this.pos),this.pos=0):this.pos>yt&&(this.logger.log(ft.DEBUG,\"Too large cursor position \"+this.pos),this.pos=yt)},t.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(\" \",this.currPenState)},t.insertChar=function(e){144<=e&&this.backSpace();var t=ht(e);this.pos>=yt?this.logger.log(ft.ERROR,\"Cannot insert \"+e.toString(16)+\" (\"+t+\") at position \"+this.pos+\". Skipping it!\"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){for(var t=e;t<yt;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<yt;r++){var a=this.chars[r].uchar;\" \"!==a&&(t=!1),e.push(a)}return t?\"\":e.join(\"\")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Rt=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new At(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(ft.INFO,\"setCursor: \"+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(ft.INFO,\"pacData = \"+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var a=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var i=n.rows[a].cueStartTime,o=this.logger.time;if(i&&null!==o&&i<o)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(n.rows[a+s])}}this.currRow=t;var l,d,u=this.rows[this.currRow];null!==e.indent&&(l=e.indent,d=Math.max(l-1,0),u.setCursor(e.indent),e.color=u.chars[d].penState.foreground);var c={foreground:e.color,underline:e.underline,italics:e.italics,background:\"black\",flash:!1};this.setPen(c)},t.setBkgData=function(e){this.logger.log(ft.INFO,\"bkgData = \"+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){var e,t;null!==this.nrRollUpRows?(this.logger.log(ft.TEXT,this.getDisplayText()),e=this.currRow+1-this.nrRollUpRows,(t=this.rows.splice(e,1)[0]).clear(),this.rows.splice(this.currRow,0,t),this.logger.log(ft.INFO,\"Rolling up\")):this.logger.log(ft.DEBUG,\"roll_up but nrRollUpRows not set yet\")},t.getDisplayText=function(e){e=e||!1;for(var t,r=[],a=\"\",n=0;n<15;n++){var i=this.rows[n].getTextString();i&&(t=n+1,e?r.push(\"Row \"+t+\": '\"+i+\"'\"):r.push(i.trim()))}return 0<r.length&&(a=e?\"[\"+r.join(\" | \")+\"]\":r.join(\"\\n\")),a},t.getTextAndFormat=function(){return this.rows},e}(),Lt=function(){function e(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Rt(r),this.nonDisplayedMemory=new Rt(r),this.lastOutputScreen=new Rt(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(ft.INFO,\"MODE=\"+e),\"MODE_POP-ON\"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),\"MODE_ROLL-UP\"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?\"DISP\":\"NON_DISP\";this.logger.log(ft.INFO,r+\": \"+this.writeScreen.getDisplayText(!0)),\"MODE_PAINT-ON\"!==this.mode&&\"MODE_ROLL-UP\"!==this.mode||(this.logger.log(ft.TEXT,\"DISPLAYED: \"+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(ft.INFO,\"RCL - Resume Caption Loading\"),this.setMode(\"MODE_POP-ON\")},t.ccBS=function(){this.logger.log(ft.INFO,\"BS - BackSpace\"),\"MODE_TEXT\"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(ft.INFO,\"DER- Delete to End of Row\"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(ft.INFO,\"RU(\"+e+\") - Roll Up\"),this.writeScreen=this.displayedMemory,this.setMode(\"MODE_ROLL-UP\"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(ft.INFO,\"FON - Flash On\"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(ft.INFO,\"RDC - Resume Direct Captioning\"),this.setMode(\"MODE_PAINT-ON\")},t.ccTR=function(){this.logger.log(ft.INFO,\"TR\"),this.setMode(\"MODE_TEXT\")},t.ccRTD=function(){this.logger.log(ft.INFO,\"RTD\"),this.setMode(\"MODE_TEXT\")},t.ccEDM=function(){this.logger.log(ft.INFO,\"EDM - Erase Displayed Memory\"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(ft.INFO,\"CR - Carriage Return\"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(ft.INFO,\"ENM - Erase Non-displayed Memory\"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){var e;this.logger.log(ft.INFO,\"EOC - End Of Caption\"),\"MODE_POP-ON\"===this.mode&&(e=this.displayedMemory,this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(ft.TEXT,\"DISP: \"+this.displayedMemory.getDisplayText())),this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(ft.INFO,\"TO(\"+e+\") - Tab Offset\"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t,r={flash:!1};r.underline=e%2==1,r.italics=46<=e,r.italics?r.foreground=\"white\":(t=Math.floor(e/2)-16,r.foreground=[\"white\",\"green\",\"blue\",\"cyan\",\"red\",\"yellow\",\"magenta\"][t]),this.logger.log(ft.INFO,\"MIDROW: \"+JSON.stringify(r)),this.writeScreen.setPen(r)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}();function Dt(e,t,r){r.a=e,r.b=t}function Ct(e,t,r){return r.a===e&&r.b===t}function Ot(e,t,r){return e.substr(r||0,t.length)===t}function It(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}var Pt=function(){function e(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var a=new xt;this.channels=[null,new Lt(e,t,a),new Lt(e+1,r,a)],this.cmdHistory={a:null,b:null},this.logger=a}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,a=!1;this.logger.time=e;for(var n=0;n<t.length;n+=2){var i,o=127&t[n],s=127&t[n+1];0==o&&0==s||(this.logger.log(ft.DATA,\"[\"+Et([t[n],t[n+1]])+\"] -> (\"+Et([o,s])+\")\"),(r=(r=(r=(r=this.parseCmd(o,s))||this.parseMidrow(o,s))||this.parsePAC(o,s))||this.parseBackgroundAttributes(o,s))||(a=this.parseChars(o,s))&&((i=this.currentChannel)&&0<i?this.channels[i].insertChars(a):this.logger.log(ft.WARNING,\"No channel found yet. TEXT-MODE?\")),r||a||this.logger.log(ft.WARNING,\"Couldn't parse cleaned data \"+Et([o,s])+\" orig: \"+Et([t[n],t[n+1]])))}},t.parseCmd=function(e,t){var r=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;if(Ct(e,t,r))return Dt(null,null,r),this.logger.log(ft.DEBUG,\"Repeated command (\"+Et([e,t])+\") is dropped\"),!0;var a=20===e||21===e||23===e?1:2,n=this.channels[a];return 20===e||21===e||28===e||29===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),Dt(e,t,r),this.currentChannel=a,!0},t.parseMidrow=function(e,t){var r=0;if((17===e||25===e)&&32<=t&&t<=47){if((r=17===e?1:2)!==this.currentChannel)return this.logger.log(ft.ERROR,\"Mismatch channel in midrow parsing\"),!1;var a=this.channels[r];return!!a&&(a.ccMIDROW(t),this.logger.log(ft.DEBUG,\"MIDROW (\"+Et([e,t])+\")\"),!0)}return!1},t.parsePAC=function(e,t){var r=this.cmdHistory;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;if(Ct(e,t,r))return Dt(null,null,r),!0;var a=e<=23?1:2,n=64<=t&&t<=95?1==a?vt[e]:wt[e]:1==a?bt[e]:kt[e],i=this.channels[a];return!!i&&(i.setPAC(this.interpretPAC(n,t)),Dt(e,t,r),this.currentChannel=a,!0)},t.interpretPAC=function(e,t){var r={color:null,italics:!1,indent:null,underline:!1,row:e},a=95<t?t-96:t-64;return r.underline=1==(1&a),a<=13?r.color=[\"white\",\"green\",\"blue\",\"cyan\",\"red\",\"yellow\",\"magenta\",\"white\"][Math.floor(a/2)]:a<=15?(r.italics=!0,r.color=\"white\"):r.indent=4*Math.floor((a-16)/2),r},t.parseChars=function(e,t){var r,a,n,i,o=null;return 17<=(i=25<=e?(r=2,e-8):(r=1,e))&&i<=19?(t,a=17===i?t+80:18===i?t+112:t+144,this.logger.log(ft.INFO,\"Special char '\"+ht(a)+\"' in channel \"+r),o=[a]):32<=e&&e<=127&&(o=0===t?[e]:[e,t]),o&&(n=Et(o),this.logger.log(ft.DEBUG,\"Char codes =  \"+n.join(\",\")),Dt(e,t,this.cmdHistory)),o},t.parseBackgroundAttributes=function(e,t){var r;if(!((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47))return!1;var a={};16===e||24===e?(r=Math.floor((t-32)/2),a.background=Tt[r],t%2==1&&(a.background=a.background+\"_semi\")):45===t?a.background=\"transparent\":(a.foreground=\"black\",47===t&&(a.underline=!0));var n=e<=23?1:2;return this.channels[n].setBkgData(a),Dt(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},e}(),Mt=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}(),Ft=function(e,t,r,a,n,i){var o,s=Object(Me.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\\r\\n|\\n\\r|\\n|\\r/g,\"\\n\").split(\"\\n\"),l=\"00:00.000\",d=0,c=0,p=0,h=[],f=!0,g=!1,m=new ct;m.oncue=function(e){var t=r[a],n=r.ccOffset;t&&t.new&&(void 0!==c?n=r.ccOffset=t.start:function(e,t,r){var a=e[t],n=e[a.prevCC];if(!n||!n.new&&a.new)return e.ccOffset=e.presentationOffset=a.start,a.new=!1;for(;n&&n.new;)e.ccOffset+=a.start-n.start,a.new=!1,n=e[(a=n).prevCC];e.presentationOffset=r}(r,a,p)),p&&(n=p-r.presentationOffset),g&&(e.startTime+=n-c,e.endTime+=n-c),e.id=It(e.startTime.toString())+It(e.endTime.toString())+It(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),0<e.endTime&&h.push(e)},m.onparsingerror=function(e){o=e},m.onflush=function(){o&&i?i(o):n(h)},s.forEach((function(e){if(f){if(Ot(e,\"X-TIMESTAMP-MAP=\")){g=!(f=!1),e.substr(16).split(\",\").forEach((function(e){Ot(e,\"LOCAL:\")?l=e.substr(6):Ot(e,\"MPEGTS:\")&&(d=parseInt(e.substr(7)))}));try{t+(9e4*r[a].start||0)<0&&(t+=8589934592),d-=t,c=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),a=parseInt(e.substr(-9,2)),n=9<e.length?parseInt(e.substr(0,e.indexOf(\":\"))):0;if(!(Object(u.isFiniteNumber)(t)&&Object(u.isFiniteNumber)(r)&&Object(u.isFiniteNumber)(a)&&Object(u.isFiniteNumber)(n)))throw Error(\"Malformed X-TIMESTAMP-MAP: Local:\"+e);return t+=1e3*r,(t+=6e4*a)+36e5*n}(l)/1e3,p=d/9e4}catch(e){g=!1,o=e}return}\"\"===e&&(f=!1)}m.parse(e+\"\\n\")})),m.flush()};function Bt(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}var Nt=function(e){var t,r;function a(t){var r,a,n,i,o=e.call(this,t,c.default.MEDIA_ATTACHING,c.default.MEDIA_DETACHING,c.default.FRAG_PARSING_USERDATA,c.default.FRAG_DECRYPTED,c.default.MANIFEST_LOADING,c.default.MANIFEST_LOADED,c.default.FRAG_LOADED,c.default.INIT_PTS_FOUND)||this;return o.media=null,o.config=void 0,o.enabled=!0,o.Cues=void 0,o.textTracks=[],o.tracks=[],o.initPTS=[],o.unparsedVttFrags=[],o.captionsTracks={},o.nonNativeCaptionsTracks={},o.captionsProperties=void 0,o.cea608Parser1=void 0,o.cea608Parser2=void 0,o.lastSn=-1,o.prevCC=-1,o.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},o.hls=t,o.config=t.config,o.Cues=t.config.cueHandler,o.captionsProperties={textTrack1:{label:o.config.captionsTextTrack1Label,languageCode:o.config.captionsTextTrack1LanguageCode},textTrack2:{label:o.config.captionsTextTrack2Label,languageCode:o.config.captionsTextTrack2LanguageCode},textTrack3:{label:o.config.captionsTextTrack3Label,languageCode:o.config.captionsTextTrack3LanguageCode},textTrack4:{label:o.config.captionsTextTrack4Label,languageCode:o.config.captionsTextTrack4LanguageCode}},o.config.enableCEA708Captions&&(r=new Mt(Bt(o),\"textTrack1\"),a=new Mt(Bt(o),\"textTrack2\"),n=new Mt(Bt(o),\"textTrack3\"),i=new Mt(Bt(o),\"textTrack4\"),o.cea608Parser1=new Pt(1,r,a),o.cea608Parser2=new Pt(3,n,i)),o}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.addCues=function(e,t,r,a,n){for(var i,o,s,l,d,u=!1,p=n.length;p--;){var h=n[p],f=(i=h[0],o=h[1],s=t,l=r,Math.min(o,l)-Math.max(i,s));if(0<=f&&(h[0]=Math.min(h[0],t),h[1]=Math.max(h[1],r),u=!0,.5<f/(r-t)))return}u||n.push([t,r]),this.config.renderTextTracksNatively?this.Cues.newCue(this.captionsTracks[e],t,r,a):(d=this.Cues.newCue(null,t,r,a),this.hls.trigger(c.default.CUES_PARSED,{type:\"captions\",cues:d,track:e}))},n.onInitPtsFound=function(e){var t=this,r=e.frag,a=e.id,n=e.initPTS,i=this.unparsedVttFrags;\"main\"===a&&(this.initPTS[r.cc]=n),i.length&&(this.unparsedVttFrags=[],i.forEach((function(e){t.onFragLoaded(e)})))},n.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var a=t.textTracks[r];if(a[e])return a}return null},n.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},n.createNativeTrack=function(e){var t,r,a,n,i,o,s,l;this.captionsTracks[e]||(t=this.captionsProperties,r=this.captionsTracks,a=this.media,i=(n=t[e]).label,o=n.languageCode,(s=this.getExistingTrack(e))?(r[e]=s,Be(r[e]),Fe(r[e],a)):(l=this.createTextTrack(\"captions\",i,o))&&(l[e]=!0,r[e]=l))},n.createNonNativeTrack=function(e){var t,r;this.nonNativeCaptionsTracks[e]||(t=this.captionsProperties[e])&&(r={_id:e,label:t.label,kind:\"captions\",default:!!t.media&&!!t.media.default,closedCaptions:t.media},this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(c.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]}))},n.createTextTrack=function(e,t,r){var a=this.media;if(a)return a.addTextTrack(e,t,r)},n.destroy=function(){e.prototype.destroy.call(this)},n.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},n.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Be(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},n.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},n._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Be(t[r])}},n.onManifestLoaded=function(e){var t,r,a,n,i=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT&&(t=e.subtitles||[],r=this.tracks&&t&&this.tracks.length===t.length,this.tracks=e.subtitles||[],this.config.renderTextTracksNatively?(a=this.media?this.media.textTracks:[],this.tracks.forEach((function(e,t){var r,n,o;if(t<a.length){for(var s=null,l=0;l<a.length;l++)if(o=e,(n=a[l])&&n.label===o.name&&!n.textTrack1&&!n.textTrack2){s=a[l];break}s&&(r=s)}r=r||i.createTextTrack(\"subtitles\",e.name,e.lang),e.default?r.mode=i.hls.subtitleDisplay?\"showing\":\"hidden\":r.mode=\"disabled\",i.textTracks.push(r)}))):!r&&this.tracks&&this.tracks.length&&(n=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}})),this.hls.trigger(c.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:n}))),this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(e){var t,r,a=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);a&&(t=\"textTrack\"+a[1],(r=i.captionsProperties[t])&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e))}))},n.onFragLoaded=function(e){var t=e.frag,r=e.payload,a=this.cea608Parser1,n=this.cea608Parser2,i=this.initPTS,o=this.lastSn,s=this.unparsedVttFrags;if(\"main\"===t.type){var l=t.sn;t.sn!==o+1&&a&&n&&(a.reset(),n.reset()),this.lastSn=l}else if(\"subtitle\"===t.type)if(r.byteLength){if(!Object(u.isFiniteNumber)(i[t.cc]))return s.push(e),void(i.length&&this.hls.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var d=t.decryptdata;null!=d&&null!=d.key&&\"AES-128\"===d.method||this._parseVTTs(t,r)}else this.hls.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},n._parseVTTs=function(e,t){var r=this,a=this.hls,n=this.prevCC,i=this.textTracks,o=this.vttCCs;o[e.cc]||(o[e.cc]={start:e.start,prevCC:n,new:!0},this.prevCC=e.cc),Ft(t,this.initPTS[e.cc],o,e.cc,(function(t){if(r.config.renderTextTracksNatively){var n=i[e.level];if(\"disabled\"===n.mode)return void a.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach((function(e){if(!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(\"addCue is failed for: \"+e)}catch(r){p.logger.debug(\"Failed occurred on adding cues: \"+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}))}else{var o=r.tracks[e.level].default?\"default\":\"subtitles\"+e.level;a.trigger(c.default.CUES_PARSED,{type:\"subtitles\",cues:t,track:o})}a.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){p.logger.log(\"Failed to parse VTT cue: \"+t),a.trigger(c.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})}))},n.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if(\"subtitle\"===t.type){if(!Object(u.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},n.onFragParsingUserdata=function(e){var t=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&t&&r)for(var a=0;a<e.samples.length;a++){var n,i=e.samples[a].bytes;i&&(n=this.extractCea608Data(i),t.addData(e.samples[a].pts,n[0]),r.addData(e.samples[a].pts,n[1]))}},n.extractCea608Data=function(e){for(var t=31&e[0],r=2,a=[[],[]],n=0;n<t;n++){var i=e[r++],o=127&e[r++],s=127&e[r++],l=3&i;0==o&&0==s||0!=(4&i)&&(0!=l&&1!=l||(a[l].push(o),a[l].push(s)))}return a},a}(f);function Ut(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function jt(e){for(var t=[],r=0;r<e.length;r++){var a=e[r];\"subtitles\"===a.kind&&a.label&&t.push(e[r])}return t}var Yt,Gt,qt=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.MANIFEST_LOADED,c.default.SUBTITLE_TRACK_LOADED)||this;return r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n,i,o=a.prototype;return o.destroy=function(){f.prototype.destroy.call(this)},o.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(u.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&\"onchange\"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){t.trackChangeListener()}),500):this.media.textTracks.addEventListener(\"change\",this.trackChangeListener))},o.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener(\"change\",this.trackChangeListener),Object(u.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),jt(this.media.textTracks).forEach((function(e){Be(e)})),this.subtitleTrack=-1,this.media=null)},o.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(c.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach((function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)}))},o.onSubtitleTrackLoaded=function(e){var t,r=this,a=e.id,n=e.details,i=this.trackId,o=this.tracks,s=o[i];a>=o.length||a!==i||!s||this.stopped?this._clearReloadTimer():(p.logger.log(\"subtitle track \"+a+\" loaded\"),n.live?(t=oe(s.details,n,e.stats.trequest),p.logger.log(\"Reloading live subtitle playlist in \"+t+\"ms\"),this.timer=setTimeout((function(){r._loadCurrentTrack()}),t)):this._clearReloadTimer())},o.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},o.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},o._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},o._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,a=t[e];e<0||!a||a.details&&!a.details.live||(p.logger.log(\"Loading subtitle track \"+e),r.trigger(c.default.SUBTITLE_TRACK_LOADING,{url:a.url,id:e}))},o._toggleTrackModes=function(e){var t,r,a,n=this.media,i=this.subtitleDisplay,o=this.trackId;n&&(t=jt(n.textTracks),-1===e?[].slice.call(t).forEach((function(e){e.mode=\"disabled\"})):(r=t[o])&&(r.mode=\"disabled\"),(a=t[e])&&(a.mode=i?\"showing\":\"hidden\"))},o._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(u.isFiniteNumber)(e)||e<-1||e>=r.length||(this.trackId=e,p.logger.log(\"Switching to subtitle track \"+e),t.trigger(c.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},o._onTextTracksChanged=function(){if(this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=jt(this.media.textTracks),r=0;r<t.length;r++)if(\"hidden\"===t[r].mode)e=r;else if(\"showing\"===t[r].mode){e=r;break}this.subtitleTrack=e}},n=a,(i=[{key:\"subtitleTracks\",get:function(){return this.tracks}},{key:\"subtitleTrack\",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&Ut(n.prototype,i),a}(f),zt=r(\"./src/crypt/decrypter.js\"),Ht=window.performance,Kt=function(e){var t,r;function a(t,r){var a=e.call(this,t,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.ERROR,c.default.KEY_LOADED,c.default.FRAG_LOADED,c.default.SUBTITLE_TRACKS_UPDATED,c.default.SUBTITLE_TRACK_SWITCH,c.default.SUBTITLE_TRACK_LOADED,c.default.SUBTITLE_FRAG_PROCESSED,c.default.LEVEL_UPDATED)||this;return a.fragmentTracker=r,a.config=t.config,a.state=ge,a.tracks=[],a.tracksBuffered=[],a.currentTrackId=-1,a.decrypter=new zt.default(t,t.config),a.lastAVStart=0,a._onMediaSeeking=a.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(a)),a}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=a.prototype;return n.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=ye,r){var a=this.tracksBuffered[this.currentTrackId];if(a){for(var n,i=t.start,o=0;o<a.length;o++)if(i>=a[o].start&&i<=a[o].end){n=a[o];break}var s=t.start+t.duration;n?n.end=s:(n={start:i,end:s},a.push(n))}}},n.onMediaAttached=function(e){var t=e.media;(this.media=t).addEventListener(\"seeking\",this._onMediaSeeking),this.state=ye},n.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener(\"seeking\",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]})),this.media=null,this.state=ge)},n.onError=function(e){var t=e.frag;t&&\"subtitle\"===t.type&&(this.state=ye)},n.onSubtitleTracksUpdated=function(e){var t=this;p.logger.log(\"subtitle tracks updated\"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]}))},n.onSubtitleTrackSwitch=function(e){var t;this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId?(t=this.tracks[this.currentTrackId])&&t.details&&this.setInterval(500):this.clearInterval()},n.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,a=this.currentTrackId,n=this.tracks,i=n[a];t>=n.length||t!==a||!i||(r.live&&function(e,t,r){void 0===r&&(r=0);var a=-1;ie(e,t,(function(e,t,r){t.start=e.start,a=r}));var n=t.fragments;if(a<0)n.forEach((function(e){e.start+=r}));else for(var i=a+1;i<n.length;i++)n[i].start=n[i-1].start+n[i-1].duration}(i.details,r,this.lastAVStart),i.details=r,this.setInterval(500))},n.onKeyLoaded=function(){this.state===ve&&(this.state=ye)},n.onFragLoaded=function(e){var t,r=this.fragCurrent,a=e.frag.decryptdata,n=e.frag,i=this.hls;this.state===be&&r&&\"subtitle\"===e.frag.type&&r.sn===e.frag.sn&&0<e.payload.byteLength&&a&&a.key&&\"AES-128\"===a.method&&(t=Ht.now(),this.decrypter.decrypt(e.payload,a.key.buffer,a.iv.buffer,(function(e){var r=Ht.now();i.trigger(c.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:t,tdecrypt:r}})})))},n.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},n.doTick=function(){if(this.media)switch(this.state){case ye:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,a=this.media,n=this.tracks;if(!n||!n[t]||!n[t].details)break;var i=e.maxBufferHole,o=e.maxFragLookUpTolerance,s=Math.min(e.maxBufferLength,e.maxMaxBufferLength),l=H.bufferedInfo(this._getBuffered(),a.currentTime,i),d=l.end,u=l.len,h=n[t].details,f=h.fragments,g=f.length,m=f[g-1].start+f[g-1].duration;if(s<u)return;var y,v=this.fragPrevious;(y=d<m?(v&&h.hasProgramDateTime&&(y=ue(f,v.endProgramDateTime,o)),y||ce(v,f,d,o)):f[g-1])&&y.encrypted?(p.logger.log(\"Loading key for \"+y.sn),this.state=ve,this.hls.trigger(c.default.KEY_LOADING,{frag:y})):y&&r.getState(y)===U&&(this.fragCurrent=y,this.state=be,this.hls.trigger(c.default.FRAG_LOADING,{frag:y}))}else this.state=ye},n.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},n._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},n.onMediaSeeking=function(){this.fragPrevious=null},a}(Le);(Gt=Yt=Yt||{}).WIDEVINE=\"com.widevine.alpha\",Gt.PLAYREADY=\"com.microsoft.playready\";var Vt=\"undefined\"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function Wt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Xt=function(e){var t,r;function a(t){var r=e.call(this,t,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHED,c.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._drmSystemOptions=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r.mediaKeysPromise=null,r._onMediaEncrypted=function(e){if(p.logger.log('Media is encrypted using \"'+e.initDataType+'\" init data type'),!r.mediaKeysPromise)return p.logger.error(\"Fatal: Media is encrypted but no CDM access or no keys have been requested\"),void r.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});function t(t){r._media&&(r._attemptSetMediaKeys(t),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData))}r.mediaKeysPromise.then(t).catch(t)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r._drmSystemOptions=t.config.drmSystemOptions,r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n,i,o=a.prototype;return o.getLicenseServerUrl=function(e){switch(e){case Yt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system \"'+e+'\"')},o._attemptKeySystemAccess=function(e,t,r){var a=this,n=function(e,t,r,a){if(e!==Yt.WIDEVINE)throw new Error(\"Unknown key-system: \"+e);return n=r,i=a,o={audioCapabilities:[],videoCapabilities:[]},t.forEach((function(e){o.audioCapabilities.push({contentType:'audio/mp4; codecs=\"'+e+'\"',robustness:i.audioRobustness||\"\"})})),n.forEach((function(e){o.videoCapabilities.push({contentType:'video/mp4; codecs=\"'+e+'\"',robustness:i.videoRobustness||\"\"})})),[o];var n,i,o}(e,t,r,this._drmSystemOptions);p.logger.log(\"Requesting encrypted media key-system access\");var i=this.requestMediaKeySystemAccess(e,n);this.mediaKeysPromise=i.then((function(t){return a._onMediaKeySystemAccessObtained(e,t)})),i.catch((function(t){p.logger.error('Failed to obtain key-system \"'+e+'\" access:',t)}))},o._onMediaKeySystemAccessObtained=function(e,t){var r=this;p.logger.log('Access for key-system \"'+e+'\" obtained');var a={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(a);var n=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return a.mediaKeys=t,p.logger.log('Media-keys created for key-system \"'+e+'\"'),r._onMediaKeysCreated(),t}));return n.catch((function(e){p.logger.error(\"Failed to create media-keys:\",e)})),n},o._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},o._onNewMediaKeySession=function(e){var t=this;p.logger.log(\"New key-system session \"+e.sessionId),e.addEventListener(\"message\",(function(r){t._onKeySessionMessage(e,r.message)}),!1)},o._onKeySessionMessage=function(e,t){p.logger.log(\"Got EME message event, creating license request\"),this._requestLicense(t,(function(t){p.logger.log(\"Received license data (length: \"+(t?t.byteLength:t)+\"), updating key-session\"),e.update(t)}))},o._attemptSetMediaKeys=function(){if(!this._media)throw new Error(\"Attempted to set mediaKeys without first attaching a media element\");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return p.logger.error(\"Fatal: Media is encrypted but no CDM access or no keys have been obtained yet\"),void this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});p.logger.log(\"Setting keys for encrypted media\"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},o._generateRequestWithPreferredKeySession=function(e,t){var r=this,a=this._mediaKeysList[0];if(!a)return p.logger.error(\"Fatal: Media is encrypted but not any key-system access has been obtained yet\"),void this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(a.mediaKeysSessionInitialized)p.logger.warn(\"Key-Session already initialized but requested again\");else{var n=a.mediaKeysSession;if(!n)return p.logger.error(\"Fatal: Media is encrypted but no key-session existing\"),void this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return p.logger.warn(\"Fatal: initData required for generating a key session is null\"),void this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});p.logger.log('Generating key-session request for \"'+e+'\" init data type'),a.mediaKeysSessionInitialized=!0,n.generateRequest(e,t).then((function(){p.logger.debug(\"Key-session generation succeeded\")})).catch((function(e){p.logger.error(\"Error generating key-session request:\",e),r.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},o._createLicenseXhr=function(e,t,r){var a=new XMLHttpRequest,n=this._licenseXhrSetup;try{if(n)try{n(a,e)}catch(t){a.open(\"POST\",e,!0),n(a,e)}a.readyState||a.open(\"POST\",e,!0)}catch(t){throw new Error(\"issue setting up KeySystem license XHR \"+t)}return a.responseType=\"arraybuffer\",a.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,a,e,t,r),a},o._onLicenseRequestReadyStageChange=function(e,t,r,a){if(4===e.readyState)if(200===e.status)this._requestLicenseFailureCount=0,p.logger.log(\"License request succeeded\"),\"arraybuffer\"!==e.responseType&&p.logger.warn(\"xhr response type was not set to the expected arraybuffer for license request\"),a(e.response);else{if(p.logger.error(\"License Request XHR failed (\"+t+\"). Status: \"+e.status+\" (\"+e.statusText+\")\"),this._requestLicenseFailureCount++,3<this._requestLicenseFailureCount)return void this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var n=3-this._requestLicenseFailureCount+1;p.logger.warn(\"Retrying license request, \"+n+\" attempts left\"),this._requestLicense(r,a)}},o._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===Yt.WIDEVINE)return t;throw new Error(\"unsupported key-system: \"+e.mediaKeySystemDomain)},o._requestLicense=function(e,t){p.logger.log(\"Requesting content license for key-system\");var r=this._mediaKeysList[0];if(!r)return p.logger.error(\"Fatal error: Media is encrypted but no key-system access has been obtained yet\"),void this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var a=this.getLicenseServerUrl(r.mediaKeySystemDomain),n=this._createLicenseXhr(a,e,t);p.logger.log(\"Sending license request to URL: \"+a);var i=this._generateLicenseRequestChallenge(r,e);n.send(i)}catch(e){p.logger.error(\"Failure requesting DRM license: \"+e),this.hls.trigger(c.default.ERROR,{type:d.ErrorTypes.KEY_SYSTEM_ERROR,details:d.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},o.onMediaAttached=function(e){var t;this._emeEnabled&&(t=e.media,(this._media=t).addEventListener(\"encrypted\",this._onMediaEncrypted))},o.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener(\"encrypted\",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},o.onManifestParsed=function(e){var t,r;this._emeEnabled&&(t=e.levels.map((function(e){return e.audioCodec})),r=e.levels.map((function(e){return e.videoCodec})),this._attemptKeySystemAccess(Yt.WIDEVINE,t,r))},n=a,(i=[{key:\"requestMediaKeySystemAccess\",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error(\"No requestMediaKeySystemAccess function configured\");return this._requestMediaKeySystemAccess}}])&&Wt(n.prototype,i),a}(f);function $t(e,t){var r,a=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)),a}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){var a,n,i;a=e,i=r[n=t],n in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jt=Qt(Qt({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:$e,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:qe,bufferController:He,capLevelController:Ve,fpsController:Xe,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:Vt,testBandwidth:!0},{cueHandler:a,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:\"English\",captionsTextTrack1LanguageCode:\"en\",captionsTextTrack2Label:\"Spanish\",captionsTextTrack2LanguageCode:\"es\",captionsTextTrack3Label:\"Unknown CC\",captionsTextTrack3LanguageCode:\"\",captionsTextTrack4Label:\"Unknown CC\",captionsTextTrack4LanguageCode:\"\",renderTextTracksNatively:!0}),{},{subtitleStreamController:Kt,subtitleTrackController:qt,timelineController:Nt,audioStreamController:rt,audioTrackController:Je,emeController:Xt});function Zt(e,t){var r,a=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)),a}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){var a,n,i;a=e,i=r[n=t],n in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tr(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function rr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ar(e,t,r){return t&&rr(e.prototype,t),r&&rr(e,r),e}var nr=function(e){var t,r;function a(t){var r;void 0===t&&(t={}),(r=e.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var n=a.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error(\"Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration\");r.config=er(er({},n),t);var i=tr(r).config;if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: \"liveMaxLatencyDurationCount\" must be gt \"liveSyncDurationCount\"');if(void 0!==i.liveMaxLatencyDuration&&(void 0===i.liveSyncDuration||i.liveMaxLatencyDuration<=i.liveSyncDuration))throw new Error('Illegal hls.js config: \"liveMaxLatencyDuration\" must be gt \"liveSyncDuration\"');Object(p.enableLogs)(i.debug),r._autoLevelCapping=-1;var o=r.abrController=new i.abrController(tr(r)),s=new i.bufferController(tr(r)),l=r.capLevelController=new i.capLevelController(tr(r)),d=new i.fpsController(tr(r)),u=new F(tr(r)),c=new B(tr(r)),h=new N(tr(r)),f=new Ne(tr(r)),g=r.levelController=new Pe(tr(r)),m=new q(tr(r)),y=[g,r.streamController=new Oe(tr(r),m)],v=i.audioStreamController;v&&y.push(new v(tr(r),m)),r.networkControllers=y;var b,w,k,T=[u,c,h,o,s,l,d,f,m];return(v=i.audioTrackController)&&(b=new v(tr(r)),r.audioTrackController=b,T.push(b)),(v=i.subtitleTrackController)&&(w=new v(tr(r)),r.subtitleTrackController=w,y.push(w)),(v=i.emeController)&&(k=new v(tr(r)),r.emeController=k,T.push(k)),(v=i.subtitleStreamController)&&y.push(new v(tr(r),m)),(v=i.timelineController)&&T.push(new v(tr(r))),r.coreComponents=T,r}r=e,(t=a).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r,a.isSupported=function(){var e=X();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&\"function\"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"'),a=!t||t.prototype&&\"function\"==typeof t.prototype.appendBuffer&&\"function\"==typeof t.prototype.remove;return!!r&&!!a},ar(a,null,[{key:\"version\",get:function(){return\"0.14.10\"}},{key:\"Events\",get:function(){return c.default}},{key:\"ErrorTypes\",get:function(){return d.ErrorTypes}},{key:\"ErrorDetails\",get:function(){return d.ErrorDetails}},{key:\"DefaultConfig\",get:function(){return a.defaultConfig?a.defaultConfig:Jt},set:function(e){a.defaultConfig=e}}]);var n=a.prototype;return n.destroy=function(){p.logger.log(\"destroy\"),this.trigger(c.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},n.attachMedia=function(e){p.logger.log(\"attachMedia\"),this.media=e,this.trigger(c.default.MEDIA_ATTACHING,{media:e})},n.detachMedia=function(){p.logger.log(\"detachMedia\"),this.trigger(c.default.MEDIA_DETACHING),this.media=null},n.loadSource=function(e){e=l.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),p.logger.log(\"loadSource:\"+e),this.url=e,this.trigger(c.default.MANIFEST_LOADING,{url:e})},n.startLoad=function(e){void 0===e&&(e=-1),p.logger.log(\"startLoad(\"+e+\")\"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},n.stopLoad=function(){p.logger.log(\"stopLoad\"),this.networkControllers.forEach((function(e){e.stopLoad()}))},n.swapAudioCodec=function(){p.logger.log(\"swapAudioCodec\"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){p.logger.log(\"recoverMediaError\");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},n.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},ar(a,[{key:\"levels\",get:function(){return this.levelController.levels}},{key:\"currentLevel\",get:function(){return this.streamController.currentLevel},set:function(e){p.logger.log(\"set currentLevel:\"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:\"nextLevel\",get:function(){return this.streamController.nextLevel},set:function(e){p.logger.log(\"set nextLevel:\"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:\"loadLevel\",get:function(){return this.levelController.level},set:function(e){p.logger.log(\"set loadLevel:\"+e),this.levelController.manualLevel=e}},{key:\"nextLoadLevel\",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:\"firstLevel\",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){p.logger.log(\"set firstLevel:\"+e),this.levelController.firstLevel=e}},{key:\"startLevel\",get:function(){return this.levelController.startLevel},set:function(e){p.logger.log(\"set startLevel:\"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:\"capLevelToPlayerSize\",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:\"autoLevelCapping\",get:function(){return this._autoLevelCapping},set:function(e){p.logger.log(\"set autoLevelCapping:\"+e),this._autoLevelCapping=e}},{key:\"bandwidthEstimate\",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:\"autoLevelEnabled\",get:function(){return-1===this.levelController.manualLevel}},{key:\"manualLevel\",get:function(){return this.levelController.manualLevel}},{key:\"minAutoLevel\",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,a=0;a<r;a++)if(t<(e[a].realBitrate?Math.max(e[a].realBitrate,e[a].bitrate):e[a].bitrate))return a;return 0}},{key:\"maxAutoLevel\",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:\"nextAutoLevel\",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:\"audioTracks\",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:\"audioTrack\",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:\"liveSyncPosition\",get:function(){return this.streamController.liveSyncPosition}},{key:\"subtitleTracks\",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:\"subtitleTrack\",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:\"subtitleDisplay\",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),a}(Q);nr.defaultConfig=void 0},\"./src/polyfills/number.js\":\n/*!*********************************!*\\\n  !*** ./src/polyfills/number.js ***!\n  \\*********************************/\n/*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */function(e,t,r){\"use strict\";r.r(t),r.d(t,\"isFiniteNumber\",(function(){return a})),r.d(t,\"MAX_SAFE_INTEGER\",(function(){return n}));var a=Number.isFinite||function(e){return\"number\"==typeof e&&isFinite(e)},n=Number.MAX_SAFE_INTEGER||9007199254740991},\"./src/utils/get-self-scope.js\":\n/*!*************************************!*\\\n  !*** ./src/utils/get-self-scope.js ***!\n  \\*************************************/\n/*! exports provided: getSelfScope */function(e,t,r){\"use strict\";function a(){return\"undefined\"==typeof window?self:window}r.r(t),r.d(t,\"getSelfScope\",(function(){return a}))},\"./src/utils/logger.js\":\n/*!*****************************!*\\\n  !*** ./src/utils/logger.js ***!\n  \\*****************************/\n/*! exports provided: enableLogs, logger */function(e,t,r){\"use strict\";r.r(t),r.d(t,\"enableLogs\",(function(){return d})),r.d(t,\"logger\",(function(){return u}));var a=r(/*! ./get-self-scope */\"./src/utils/get-self-scope.js\");function n(){}var i={trace:n,debug:n,log:n,warn:n,info:n,error:n},o=i,s=Object(a.getSelfScope)();function l(e){var t=s.console[e];return t?function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];a[0]&&(a[0]=\"[\"+e+\"] > \"+a[0]),t.apply(s.console,a)}:n}var d=function(e){if(s.console&&!0===e||\"object\"==typeof e){!function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];r.forEach((function(t){o[t]=e[t]?e[t].bind(e):l(t)}))}(e,\"debug\",\"log\",\"info\",\"warn\",\"error\");try{o.log()}catch(e){o=i}}else o=i},u=o}},e.c=r,e.d=function(t,r,a){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:a})},e.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\"object\"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:t}),2&r&&\"string\"!=typeof t)for(var n in t)e.d(a,n,function(e){return t[e]}.bind(null,n));return a},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\"a\",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p=\"/dist/\",e(e.s=\"./src/hls.ts\").default;function e(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var t,r},e.exports=a())},\"./node_modules/process/browser.js\":function(e,t){var r,a,n=e.exports={};function i(){throw new Error(\"setTimeout has not been defined\")}function o(){throw new Error(\"clearTimeout has not been defined\")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r=\"function\"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{a=\"function\"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var l,d=[],u=!1,c=-1;function p(){u&&l&&(u=!1,l.length?d=l.concat(d):c=-1,d.length&&h())}function h(){if(!u){var e=s(p);u=!0;for(var t=d.length;t;){for(l=d,d=[];++c<t;)l&&l[c].run();c=-1,t=d.length}l=null,u=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new f(e,t)),1!==d.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title=\"browser\",n.browser=!0,n.env={},n.argv=[],n.version=\"\",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error(\"process.binding is not supported\")},n.cwd=function(){return\"/\"},n.chdir=function(e){throw new Error(\"process.chdir is not supported\")},n.umask=function(){return 0}},\"./node_modules/setimmediate/setImmediate.js\":function(e,t,r){(function(e,t){!function(e,r){\"use strict\";var a,n,i,o,s,l,d,u,c;function p(e){delete n[e]}function h(e){if(i)setTimeout(h,0,e);else{var t=n[e];if(t){i=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{p(e),i=!1}}}}function f(t){t.source===e&&\"string\"==typeof t.data&&0===t.data.indexOf(u)&&h(+t.data.slice(u.length))}e.setImmediate||(a=1,i=!(n={}),o=e.document,c=(c=Object.getPrototypeOf&&Object.getPrototypeOf(e))&&c.setTimeout?c:e,s=\"[object process]\"==={}.toString.call(e.process)?function(e){t.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage(\"\",\"*\"),e.onmessage=r,t}}()?(u=\"setImmediate$\"+Math.random()+\"$\",e.addEventListener?e.addEventListener(\"message\",f,!1):e.attachEvent(\"onmessage\",f),function(t){e.postMessage(u+t,\"*\")}):e.MessageChannel?((d=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){d.port2.postMessage(e)}):o&&\"onreadystatechange\"in o.createElement(\"script\")?(l=o.documentElement,function(e){var t=o.createElement(\"script\");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,l.removeChild(t),t=null},l.appendChild(t)}):function(e){setTimeout(h,0,e)},c.setImmediate=function(e){\"function\"!=typeof e&&(e=new Function(\"\"+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return n[a]=i,s(a),a++},c.clearImmediate=p)}(\"undefined\"==typeof self?void 0===e?this:e:self)}).call(this,r(\"./node_modules/webpack/buildin/global.js\"),r(\"./node_modules/process/browser.js\"))},\"./node_modules/style-loader/lib/addStyles.js\":function(e,t,r){var a,n,i,o={},s=(a=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===n&&(n=a.apply(this,arguments)),n}),l=(i={},function(e,t){if(\"function\"==typeof e)return e();if(void 0===i[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}i[e]=r}return i[e]}),d=null,u=0,c=[],p=r(\"./node_modules/style-loader/lib/urls.js\");function h(e,t){for(var r=0;r<e.length;r++){var a=e[r],n=o[a.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](a.parts[i]);for(;i<a.parts.length;i++)n.parts.push(b(a.parts[i],t))}else{var s=[];for(i=0;i<a.parts.length;i++)s.push(b(a.parts[i],t));o[a.id]={id:a.id,refs:1,parts:s}}}}function f(e,t){for(var r=[],a={},n=0;n<e.length;n++){var i=e[n],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};a[o]?a[o].parts.push(s):r.push(a[o]={id:o,parts:[s]})}return r}function g(e,t){var r=l(e.insertInto);if(!r)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");var a=c[c.length-1];if(\"top\"===e.insertAt)a?a.nextSibling?r.insertBefore(t,a.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),c.push(t);else if(\"bottom\"===e.insertAt)r.appendChild(t);else{if(\"object\"!=typeof e.insertAt||!e.insertAt.before)throw new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");var n=l(e.insertAt.before,r);r.insertBefore(t,n)}}function m(e){var t;null!==e.parentNode&&(e.parentNode.removeChild(e),0<=(t=c.indexOf(e))&&c.splice(t,1))}function y(e){var t,a=document.createElement(\"style\");return void 0===e.attrs.type&&(e.attrs.type=\"text/css\"),void 0!==e.attrs.nonce||(t=r.nc)&&(e.attrs.nonce=t),v(a,e.attrs),g(e,a),a}function v(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function b(e,t){var r,a,n,i,o,s,l;if(t.transform&&e.css){if(!(r=\"function\"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=r}return o=t.singleton?(a=u++,n=d=d||y(t),i=T.bind(null,n,a,!1),T.bind(null,n,a,!0)):e.sourceMap&&\"function\"==typeof URL&&\"function\"==typeof URL.createObjectURL&&\"function\"==typeof URL.revokeObjectURL&&\"function\"==typeof Blob&&\"function\"==typeof btoa?(s=t,l=document.createElement(\"link\"),void 0===s.attrs.type&&(s.attrs.type=\"text/css\"),s.attrs.rel=\"stylesheet\",v(l,s.attrs),g(s,l),i=function(e,t,r){var a=r.css,n=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&n;(t.convertToAbsoluteUrls||i)&&(a=p(a)),n&&(a+=\"\\n/*# sourceMappingURL=data:application/json;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+\" */\");var o=new Blob([a],{type:\"text/css\"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n=l,t),function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),i=function(e,t){var r=t.css,a=t.media;if(a&&e.setAttribute(\"media\",a),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n),function(){m(n)}),i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){if(\"undefined\"!=typeof DEBUG&&DEBUG&&\"object\"!=typeof document)throw new Error(\"The style-loader cannot be used in a non-browser environment\");(t=t||{}).attrs=\"object\"==typeof t.attrs?t.attrs:{},t.singleton||\"boolean\"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto=\"head\"),t.insertAt||(t.insertAt=\"bottom\");var r=f(e,t);return h(r,t),function(e){for(var a=[],n=0;n<r.length;n++){var i=r[n];(s=o[i.id]).refs--,a.push(s)}e&&h(f(e,t),t);var s;for(n=0;n<a.length;n++)if(0===(s=a[n]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}};var w,k=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join(\"\\n\")});function T(e,t,r,a){var n,i,o=r?\"\":a.css;e.styleSheet?e.styleSheet.cssText=k(t,o):(n=document.createTextNode(o),(i=e.childNodes)[t]&&e.removeChild(i[t]),i.length?e.insertBefore(n,i[t]):e.appendChild(n))}},\"./node_modules/style-loader/lib/urls.js\":function(e,t){e.exports=function(e){var t=\"undefined\"!=typeof window&&window.location;if(!t)throw new Error(\"fixUrls requires window.location\");if(!e||\"string\"!=typeof e)return e;var r=t.protocol+\"//\"+t.host,a=r+t.pathname.replace(/\\/[^\\/]*$/,\"/\");return e.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi,(function(e,t){var n,i=t.trim().replace(/^\"(.*)\"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(i)?e:(n=0===i.indexOf(\"//\")?i:0===i.indexOf(\"/\")?r+i:a+i.replace(/^\\.\\//,\"\"),\"url(\"+JSON.stringify(n)+\")\")}))}},\"./node_modules/timers-browserify/main.js\":function(e,t,r){(function(e){var a=void 0!==e&&e||\"undefined\"!=typeof self&&self||window,n=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(n.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new i(n.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(\"./node_modules/setimmediate/setImmediate.js\"),t.setImmediate=\"undefined\"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate=\"undefined\"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(\"./node_modules/webpack/buildin/global.js\"))},\"./node_modules/webpack/buildin/global.js\":function(e,t){var r=function(){return this}();try{r=r||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(r=window)}e.exports=r},\"./src/index.js\":function(e,t,r){\"use strict\";r.r(t),r(\"./node_modules/dplayer/dist/DPlayer.min.css\");var a=r(\"./node_modules/dplayer/dist/DPlayer.min.js\"),n=r.n(a);window.Hls=r(\"./node_modules/hls.js/dist/hls.js\");var i,o,s,l,d,u,c,p,h,f,g={name:\"VuePlayer\",data:function(){return{}},props:{id:{type:String,default:\"player\"},isSwf:{type:Boolean,default:!1},src:{type:String},height:{type:String,default:\"auto\"},auto:{type:Boolean,default:!1},type:{type:String,default:\"mp4\"}},mounted:function(){var e,t,r;this.isSwf||(\"m3u8\"==this.type?(e=new n.a({container:document.getElementById(this.id),screenshot:!1,video:{url:this.src,type:\"hls\"},autoplay:this.auto}),this.commonUtil(e)):\"flv\"==this.type?(t=new n.a({container:document.getElementById(this.id),screenshot:!1,video:{url:this.src,type:\"flv\"},autoplay:this.auto}),this.commonUtil(t)):\"mp4\"!=this.type&&\"mov\"!=this.type||(r=new n.a({container:document.getElementById(this.id),screenshot:!1,video:{url:this.src},autoplay:this.auto}),this.commonUtil(r)))},methods:{commonUtil:function(e){var t=this;e.on(\"contextmenu_show\",(function(){$(\".dplayer-menu\").hide()})),e.on(\"canplaythrough\",(function(){setTimeout((function(){t.$emit(\"getVtime\",e.video.duration)}),300)}))}}},m=(o=function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",[this.isSwf?t(\"object\",{attrs:{WIDTH:\"100%\",HEIGHT:this.height,id:\"myMovieName\"}},[t(\"embed\",{attrs:{src:this.src,quality:\"high\",bgcolor:\"#FFFFFF\",WIDTH:\"100%\",HEIGHT:this.height,NAME:\"myMovieName\",ALIGN:\"\",TYPE:\"application/x-shockwave-flash\",PLUGINSPAGE:\"http://www.macromedia.com/go/getflashplayer\"}})]):t(\"div\",{attrs:{id:this.id}})])},l=!(s=[]),d=\"29335bd2\",u=null,f=\"function\"==typeof(i=g)?i.options:i,o&&(f.render=o,f.staticRenderFns=s,f._compiled=!0),l&&(f.functional=!0),f._scopeId=\"data-v-\"+d,u&&(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),e&&e._registeredComponents&&e._registeredComponents.add(u)},f._ssrRegister=c),c&&(f.functional?(f._injectStyles=c,p=f.render,f.render=function(e,t){return c.call(t),p(e,t)}):(h=f.beforeCreate,f.beforeCreate=h?[].concat(h,c):[c])),{exports:i,options:f}).exports;m.install=function(e){return e.component(m.name,m)},\"undefined\"!=typeof window&&window.Vue&&window.Vue.component(m.name,m),t.default=m}},e.c=r,e.d=function(t,r,a){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:a})},e.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&\"object\"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,\"default\",{enumerable:!0,value:t}),2&r&&\"string\"!=typeof t)for(var n in t)e.d(a,n,function(e){return t[e]}.bind(null,n));return a},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,\"a\",r),r},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p=\"\",e(e.s=\"./src/index.js\");function e(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var t,r}));","extractedComments":[]}